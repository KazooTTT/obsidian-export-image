/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target, mod));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// node_modules/file-saver/dist/FileSaver.min.js
var require_FileSaver_min = __commonJS({
  "node_modules/file-saver/dist/FileSaver.min.js"(exports, module2) {
    (function(a, b) {
      if (typeof define == "function" && define.amd)
        define([], b);
      else if (typeof exports != "undefined")
        b();
      else {
        b(), a.FileSaver = { exports: {} }.exports;
      }
    })(exports, function() {
      "use strict";
      function b(a2, b2) {
        return typeof b2 == "undefined" ? b2 = { autoBom: false } : typeof b2 != "object" && (console.warn("Deprecated: Expected third argument to be a object"), b2 = { autoBom: !b2 }), b2.autoBom && /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a2.type) ? new Blob(["\uFEFF", a2], { type: a2.type }) : a2;
      }
      function c(a2, b2, c2) {
        var d2 = new XMLHttpRequest();
        d2.open("GET", a2), d2.responseType = "blob", d2.onload = function() {
          g(d2.response, b2, c2);
        }, d2.onerror = function() {
          console.error("could not download file");
        }, d2.send();
      }
      function d(a2) {
        var b2 = new XMLHttpRequest();
        b2.open("HEAD", a2, false);
        try {
          b2.send();
        } catch (a3) {
        }
        return 200 <= b2.status && 299 >= b2.status;
      }
      function e(a2) {
        try {
          a2.dispatchEvent(new MouseEvent("click"));
        } catch (c2) {
          var b2 = document.createEvent("MouseEvents");
          b2.initMouseEvent("click", true, true, window, 0, 0, 0, 80, 20, false, false, false, false, 0, null), a2.dispatchEvent(b2);
        }
      }
      var f = typeof window == "object" && window.window === window ? window : typeof self == "object" && self.self === self ? self : typeof global == "object" && global.global === global ? global : void 0, a = f.navigator && /Macintosh/.test(navigator.userAgent) && /AppleWebKit/.test(navigator.userAgent) && !/Safari/.test(navigator.userAgent), g = f.saveAs || (typeof window != "object" || window !== f ? function() {
      } : "download" in HTMLAnchorElement.prototype && !a ? function(b2, g2, h) {
        var i = f.URL || f.webkitURL, j = document.createElement("a");
        g2 = g2 || b2.name || "download", j.download = g2, j.rel = "noopener", typeof b2 == "string" ? (j.href = b2, j.origin === location.origin ? e(j) : d(j.href) ? c(b2, g2, h) : e(j, j.target = "_blank")) : (j.href = i.createObjectURL(b2), setTimeout(function() {
          i.revokeObjectURL(j.href);
        }, 4e4), setTimeout(function() {
          e(j);
        }, 0));
      } : "msSaveOrOpenBlob" in navigator ? function(f2, g2, h) {
        if (g2 = g2 || f2.name || "download", typeof f2 != "string")
          navigator.msSaveOrOpenBlob(b(f2, h), g2);
        else if (d(f2))
          c(f2, g2, h);
        else {
          var i = document.createElement("a");
          i.href = f2, i.target = "_blank", setTimeout(function() {
            e(i);
          });
        }
      } : function(b2, d2, e2, g2) {
        if (g2 = g2 || open("", "_blank"), g2 && (g2.document.title = g2.document.body.innerText = "downloading..."), typeof b2 == "string")
          return c(b2, d2, e2);
        var h = b2.type === "application/octet-stream", i = /constructor/i.test(f.HTMLElement) || f.safari, j = /CriOS\/[\d]+/.test(navigator.userAgent);
        if ((j || h && i || a) && typeof FileReader != "undefined") {
          var k = new FileReader();
          k.onloadend = function() {
            var a2 = k.result;
            a2 = j ? a2 : a2.replace(/^data:[^;]*;/, "data:attachment/file;"), g2 ? g2.location.href = a2 : location = a2, g2 = null;
          }, k.readAsDataURL(b2);
        } else {
          var l = f.URL || f.webkitURL, m = l.createObjectURL(b2);
          g2 ? g2.location = m : location.href = m, g2 = null, setTimeout(function() {
            l.revokeObjectURL(m);
          }, 4e4);
        }
      });
      f.saveAs = g.saveAs = g, typeof module2 != "undefined" && (module2.exports = g);
    });
  }
});

// dom-to-image.js
var require_dom_to_image = __commonJS({
  "dom-to-image.js"(exports, module2) {
    (function(global2) {
      "use strict";
      var util = newUtil();
      var inliner = newInliner();
      var fontFaces = newFontFaces();
      var images = newImages();
      var defaultOptions = {
        imagePlaceholder: void 0,
        cacheBust: false
      };
      var domtoimage = {
        toSvg,
        toPng,
        toJpeg,
        toBlob,
        toPixelData,
        toBlobWithClonedDom: toBlobWithClonedDom2,
        cloneNode: cloneNode2,
        impl: {
          fontFaces,
          images,
          util,
          inliner,
          options: {}
        }
      };
      if (typeof module2 !== "undefined")
        module2.exports = domtoimage;
      else
        global2.domtoimage = domtoimage;
      function toSvg(node, options) {
        options = options || {};
        copyOptions(options);
        return Promise.resolve(node).then(function(node2) {
          return cloneNode2(node2, options.filter, true);
        }).then(embedFonts).then(inlineImages).then(applyOptions).then(function(clone) {
          return makeSvgDataUri(clone, options.width || util.width(node), options.height || util.height(node));
        });
        function applyOptions(clone) {
          if (options.bgcolor)
            clone.style.backgroundColor = options.bgcolor;
          if (options.width)
            clone.style.width = options.width + "px";
          if (options.height)
            clone.style.height = options.height + "px";
          if (options.style)
            Object.keys(options.style).forEach(function(property) {
              clone.style[property] = options.style[property];
            });
          return clone;
        }
      }
      function toSvgWithClonedDom(node, clone, options) {
        options = options || {};
        copyOptions(options);
        return Promise.resolve(clone).then(embedFonts).then(inlineImages).then(applyOptions).then(function(clone2) {
          return makeSvgDataUri(clone2, options.width * 2, options.height * 2);
        });
        function applyOptions(clone2) {
          if (options.bgcolor)
            clone2.style.backgroundColor = options.bgcolor;
          if (options.width)
            clone2.style.width = options.width + "px";
          if (options.height)
            clone2.style.height = options.height + "px";
          if (options.style)
            Object.keys(options.style).forEach(function(property) {
              clone2.style[property] = options.style[property];
            });
          return clone2;
        }
      }
      function toPixelData(node, options) {
        return draw(node, options || {}).then(function(canvas) {
          return canvas.getContext("2d").getImageData(0, 0, util.width(node), util.height(node)).data;
        });
      }
      function toPng(node, options) {
        return draw(node, options || {}).then(function(canvas) {
          return canvas.toDataURL();
        });
      }
      function toJpeg(node, options) {
        options = options || {};
        return draw(node, options).then(function(canvas) {
          return canvas.toDataURL("image/jpeg", options.quality || 1);
        });
      }
      function toBlob(node, options) {
        return draw(node, options || {}).then(function(canvas) {
          return util.canvasToBlob(canvas, options);
        });
      }
      function toBlobWithClonedDom2(node, clone, options) {
        return drawWithClonedDom(node, clone, options || {}).then(function(canvas) {
          return util.canvasToBlob(canvas, options);
        });
      }
      function copyOptions(options) {
        if (typeof options.imagePlaceholder === "undefined") {
          domtoimage.impl.options.imagePlaceholder = defaultOptions.imagePlaceholder;
        } else {
          domtoimage.impl.options.imagePlaceholder = options.imagePlaceholder;
        }
        if (typeof options.cacheBust === "undefined") {
          domtoimage.impl.options.cacheBust = defaultOptions.cacheBust;
        } else {
          domtoimage.impl.options.cacheBust = options.cacheBust;
        }
      }
      function draw(domNode, options) {
        return toSvg(domNode, options).then(util.makeImage).then(util.delay(100)).then(function(image) {
          var canvas = newCanvas(domNode);
          canvas.getContext("2d").drawImage(image, 0, 0);
          return canvas;
        });
        function newCanvas(domNode2) {
          var canvas = document.createElement("canvas");
          canvas.width = options.width || util.width(domNode2);
          canvas.height = options.height || util.height(domNode2);
          if (options.bgcolor) {
            var ctx = canvas.getContext("2d");
            ctx.fillStyle = options.bgcolor;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
          }
          return canvas;
        }
      }
      function drawWithClonedDom(domNode, clone, options) {
        return toSvgWithClonedDom(domNode, clone, options).then(util.makeImage).then(util.delay(100)).then(function(image) {
          var canvas = newCanvas(domNode);
          canvas.getContext("2d").drawImage(image, 0, 0, options.width, options.height);
          return canvas;
        });
        function newCanvas(domNode2) {
          var canvas = document.createElement("canvas");
          canvas.width = options.width / 2;
          canvas.height = options.height / 2;
          if (options.bgcolor) {
            var ctx = canvas.getContext("2d");
            ctx.fillStyle = options.bgcolor;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
          }
          return canvas;
        }
      }
      function cloneNode2(node, filter, root) {
        if (!root && filter && !filter(node))
          return Promise.resolve();
        return Promise.resolve(node).then(makeNodeCopy).then(function(clone) {
          return cloneChildren(node, clone, filter);
        }).then(function(clone) {
          return processClone(node, clone);
        });
        function makeNodeCopy(node2) {
          if (node2 instanceof HTMLCanvasElement)
            return util.makeImage(node2.toDataURL());
          return node2.cloneNode(false);
        }
        function cloneChildren(original, clone, filter2) {
          var children = original.childNodes;
          if (children.length === 0)
            return Promise.resolve(clone);
          return cloneChildrenInOrder(clone, util.asArray(children), filter2).then(function() {
            return clone;
          });
          function cloneChildrenInOrder(parent, children2, filter3) {
            var done = Promise.resolve();
            children2.forEach(function(child) {
              done = done.then(function() {
                return cloneNode2(child, filter3);
              }).then(function(childClone) {
                if (childClone)
                  parent.appendChild(childClone);
              });
            });
            return done;
          }
        }
        function processClone(original, clone) {
          if (!(clone instanceof Element))
            return clone;
          return Promise.resolve().then(cloneStyle).then(clonePseudoElements).then(copyUserInput).then(fixSvg).then(function() {
            return clone;
          });
          function cloneStyle() {
            copyStyle(window.getComputedStyle(original), clone.style || {});
            function copyStyle(source, target) {
              if (source.cssText)
                target.cssText = source.cssText;
              else
                copyProperties(source, target);
              function copyProperties(source2, target2) {
                if (target2.setProperty) {
                  util.asArray(source2).forEach(function(name) {
                    target2.setProperty(name, source2.getPropertyValue(name), source2.getPropertyPriority(name));
                  });
                }
              }
            }
          }
          function clonePseudoElements() {
            [":before", ":after"].forEach(function(element) {
              clonePseudoElement(element);
            });
            function clonePseudoElement(element) {
              var style = window.getComputedStyle(original, element);
              var content = style.getPropertyValue("content");
              if (content === "" || content === "none")
                return;
              var className = util.uid();
              clone.className = clone.className + " " + className;
              var styleElement = document.createElement("style");
              styleElement.appendChild(formatPseudoElementStyle(className, element, style));
              clone.appendChild(styleElement);
              function formatPseudoElementStyle(className2, element2, style2) {
                var selector = "." + className2 + ":" + element2;
                var cssText = style2.cssText ? formatCssText(style2) : formatCssProperties(style2);
                return document.createTextNode(selector + "{" + cssText + "}");
                function formatCssText(style3) {
                  var content2 = style3.getPropertyValue("content");
                  return style3.cssText + " content: " + content2 + ";";
                }
                function formatCssProperties(style3) {
                  return util.asArray(style3).map(formatProperty).join("; ") + ";";
                  function formatProperty(name) {
                    return name + ": " + style3.getPropertyValue(name) + (style3.getPropertyPriority(name) ? " !important" : "");
                  }
                }
              }
            }
          }
          function copyUserInput() {
            if (original instanceof HTMLTextAreaElement)
              clone.innerHTML = original.value;
            if (original instanceof HTMLInputElement)
              clone.setAttribute("value", original.value);
          }
          function fixSvg() {
            if (!(clone instanceof SVGElement))
              return;
            clone.setAttribute("xmlns", "http://www.w3.org/2000/svg");
            if (!(clone instanceof SVGRectElement))
              return;
            ["width", "height"].forEach(function(attribute) {
              var value = clone.getAttribute(attribute);
              if (!value)
                return;
              clone.style.setProperty(attribute, value);
            });
          }
        }
      }
      function embedFonts(node) {
        return fontFaces.resolveAll().then(function(cssText) {
          var styleNode = document.createElement("style");
          node.appendChild(styleNode);
          styleNode.appendChild(document.createTextNode(cssText));
          return node;
        });
      }
      function inlineImages(node) {
        return images.inlineAll(node).then(function() {
          return node;
        });
      }
      function makeSvgDataUri(node, width, height) {
        return Promise.resolve(node).then(function(node2) {
          node2.setAttribute("xmlns", "http://www.w3.org/1999/xhtml");
          return new XMLSerializer().serializeToString(node2);
        }).then(util.escapeXhtml).then(function(xhtml) {
          return '<foreignObject x="0" y="0" width="100%" height="100%">' + xhtml + "</foreignObject>";
        }).then(function(foreignObject) {
          return '<svg xmlns="http://www.w3.org/2000/svg" width="' + width + '" height="' + height + '">' + foreignObject + "</svg>";
        }).then(function(svg) {
          return "data:image/svg+xml;charset=utf-8," + svg;
        });
      }
      function newUtil() {
        return {
          escape,
          parseExtension,
          mimeType,
          dataAsUrl,
          isDataUrl,
          canvasToBlob,
          resolveUrl,
          getAndEncode,
          uid: uid(),
          delay: delay2,
          asArray,
          escapeXhtml,
          makeImage,
          width,
          height
        };
        function mimes() {
          var WOFF = "application/font-woff";
          var JPEG = "image/jpeg";
          return {
            "woff": WOFF,
            "woff2": WOFF,
            "ttf": "application/font-truetype",
            "eot": "application/vnd.ms-fontobject",
            "png": "image/png",
            "jpg": JPEG,
            "jpeg": JPEG,
            "gif": "image/gif",
            "tiff": "image/tiff",
            "svg": "image/svg+xml"
          };
        }
        function parseExtension(url) {
          var match = /\.([^\.\/]*?)$/g.exec(url);
          if (match)
            return match[1];
          else
            return "";
        }
        function mimeType(url) {
          var extension = parseExtension(url).toLowerCase();
          return mimes()[extension] || "";
        }
        function isDataUrl(url) {
          return url.search(/^(data:)/) !== -1;
        }
        function toBlob2(canvas, options) {
          return new Promise(function(resolve) {
            var binaryString = window.atob(canvas.toDataURL("image/jpeg", options.quality || 1).split(",")[1]);
            var length = binaryString.length;
            var binaryArray = new Uint8Array(length);
            for (var i = 0; i < length; i++)
              binaryArray[i] = binaryString.charCodeAt(i);
            resolve(new Blob([binaryArray], {
              type: "image/jpeg"
            }));
          });
        }
        function canvasToBlob(canvas, options) {
          if (canvas.toBlob)
            return new Promise(function(resolve) {
              canvas.toBlob(resolve, "image/jpeg", options.quality || 1);
            });
          return toBlob2(canvas, options);
        }
        function resolveUrl(url, baseUrl) {
          var doc = document.implementation.createHTMLDocument();
          var base = doc.createElement("base");
          doc.head.appendChild(base);
          var a = doc.createElement("a");
          doc.body.appendChild(a);
          base.href = baseUrl;
          a.href = url;
          return a.href;
        }
        function uid() {
          var index = 0;
          return function() {
            return "u" + fourRandomChars() + index++;
            function fourRandomChars() {
              return ("0000" + (Math.random() * Math.pow(36, 4) << 0).toString(36)).slice(-4);
            }
          };
        }
        function makeImage(uri) {
          return new Promise(function(resolve, reject) {
            var image = new Image();
            image.onload = function() {
              resolve(image);
            };
            image.onerror = reject;
            image.src = uri;
          });
        }
        function getAndEncode(url) {
          var TIMEOUT = 3e4;
          if (domtoimage.impl.options.cacheBust) {
            url += (/\?/.test(url) ? "&" : "?") + new Date().getTime();
          }
          return new Promise(function(resolve) {
            var request = new XMLHttpRequest();
            request.onreadystatechange = done;
            request.ontimeout = timeout;
            request.responseType = "blob";
            request.timeout = TIMEOUT;
            request.open("GET", url, true);
            request.send();
            var placeholder;
            if (domtoimage.impl.options.imagePlaceholder) {
              var split = domtoimage.impl.options.imagePlaceholder.split(/,/);
              if (split && split[1]) {
                placeholder = split[1];
              }
            }
            function done() {
              if (request.readyState !== 4)
                return;
              if (request.status !== 200) {
                if (placeholder) {
                  resolve(placeholder);
                } else {
                  fail("cannot fetch resource: " + url + ", status: " + request.status);
                }
                return;
              }
              var encoder = new FileReader();
              encoder.onloadend = function() {
                var content = encoder.result.split(/,/)[1];
                resolve(content);
              };
              encoder.readAsDataURL(request.response);
            }
            function timeout() {
              if (placeholder) {
                resolve(placeholder);
              } else {
                fail("timeout of " + TIMEOUT + "ms occured while fetching resource: " + url);
              }
            }
            function fail(message) {
              console.error(message);
              resolve("");
            }
          });
        }
        function dataAsUrl(content, type) {
          return "data:" + type + ";base64," + content;
        }
        function escape(string) {
          return string.replace(/([.*+?^${}()|\[\]\/\\])/g, "\\$1");
        }
        function delay2(ms) {
          return function(arg) {
            return new Promise(function(resolve) {
              setTimeout(function() {
                resolve(arg);
              }, ms);
            });
          };
        }
        function asArray(arrayLike) {
          var array = [];
          var length = arrayLike.length;
          for (var i = 0; i < length; i++)
            array.push(arrayLike[i]);
          return array;
        }
        function escapeXhtml(string) {
          return string.replace(/#/g, "%23").replace(/\n/g, "%0A");
        }
        function width(node) {
          var leftBorder = px(node, "border-left-width");
          var rightBorder = px(node, "border-right-width");
          return node.scrollWidth + leftBorder + rightBorder;
        }
        function height(node) {
          var topBorder = px(node, "border-top-width");
          var bottomBorder = px(node, "border-bottom-width");
          return node.scrollHeight + topBorder + bottomBorder;
        }
        function px(node, styleProperty) {
          var value = window.getComputedStyle(node).getPropertyValue(styleProperty);
          return parseFloat(value.replace("px", ""));
        }
      }
      function newInliner() {
        var URL_REGEX = /url\(['"]?([^'"]+?)['"]?\)/g;
        return {
          inlineAll,
          shouldProcess,
          impl: {
            readUrls,
            inline
          }
        };
        function shouldProcess(string) {
          return string.search(URL_REGEX) !== -1;
        }
        function readUrls(string) {
          var result = [];
          var match;
          while ((match = URL_REGEX.exec(string)) !== null) {
            result.push(match[1]);
          }
          return result.filter(function(url) {
            return !util.isDataUrl(url);
          });
        }
        function inline(string, url, baseUrl, get) {
          return Promise.resolve(url).then(function(url2) {
            return baseUrl ? util.resolveUrl(url2, baseUrl) : url2;
          }).then(get || util.getAndEncode).then(function(data) {
            return util.dataAsUrl(data, util.mimeType(url));
          }).then(function(dataUrl) {
            return string.replace(urlAsRegex(url), "$1" + dataUrl + "$3");
          });
          function urlAsRegex(url2) {
            return new RegExp(`(url\\(['"]?)(` + util.escape(url2) + `)(['"]?\\))`, "g");
          }
        }
        function inlineAll(string, baseUrl, get) {
          if (nothingToInline())
            return Promise.resolve(string);
          return Promise.resolve(string).then(readUrls).then(function(urls) {
            var done = Promise.resolve(string);
            urls.forEach(function(url) {
              done = done.then(function(string2) {
                return inline(string2, url, baseUrl, get);
              });
            });
            return done;
          });
          function nothingToInline() {
            return !shouldProcess(string);
          }
        }
      }
      function newFontFaces() {
        return {
          resolveAll,
          impl: {
            readAll
          }
        };
        function resolveAll() {
          return readAll(document).then(function(webFonts) {
            return Promise.all(webFonts.map(function(webFont) {
              return webFont.resolve();
            }));
          }).then(function(cssStrings) {
            return cssStrings.join("\n");
          });
        }
        function readAll() {
          return Promise.resolve(util.asArray(document.styleSheets)).then(getCssRules).then(selectWebFontRules).then(function(rules) {
            return rules.map(newWebFont);
          });
          function selectWebFontRules(cssRules) {
            return cssRules.filter(function(rule) {
              return rule.type === CSSRule.FONT_FACE_RULE;
            }).filter(function(rule) {
              return inliner.shouldProcess(rule.style.getPropertyValue("src"));
            });
          }
          function getCssRules(styleSheets) {
            var cssRules = [];
            styleSheets.forEach(function(sheet) {
              try {
                util.asArray(sheet.cssRules || []).forEach(cssRules.push.bind(cssRules));
              } catch (e) {
                console.log("Error while reading CSS rules from " + sheet.href, e.toString());
              }
            });
            return cssRules;
          }
          function newWebFont(webFontRule) {
            return {
              resolve: function resolve() {
                var baseUrl = (webFontRule.parentStyleSheet || {}).href;
                return inliner.inlineAll(webFontRule.cssText, baseUrl);
              },
              src: function() {
                return webFontRule.style.getPropertyValue("src");
              }
            };
          }
        }
      }
      function newImages() {
        return {
          inlineAll,
          impl: {
            newImage
          }
        };
        function newImage(element) {
          return {
            inline
          };
          function inline(get) {
            if (util.isDataUrl(element.src))
              return Promise.resolve();
            return Promise.resolve(element.src).then(get || util.getAndEncode).then(function(data) {
              return util.dataAsUrl(data, util.mimeType(element.src));
            }).then(function(dataUrl) {
              return new Promise(function(resolve, reject) {
                element.onload = resolve;
                element.onerror = reject;
                element.src = dataUrl;
              });
            });
          }
        }
        function inlineAll(node) {
          if (!(node instanceof Element))
            return Promise.resolve(node);
          return inlineBackground(node).then(function() {
            if (node instanceof HTMLImageElement)
              return newImage(node).inline();
            else
              return Promise.all(util.asArray(node.childNodes).map(function(child) {
                return inlineAll(child);
              }));
          });
          function inlineBackground(node2) {
            try {
              var background = node2.style.getPropertyValue("background");
            } catch (e) {
              return Promise.resolve(node2);
            }
            if (!background)
              return Promise.resolve(node2);
            return inliner.inlineAll(background).then(function(inlined) {
              node2.style.setProperty("background", inlined, node2.style.getPropertyPriority("background"));
            }).then(function() {
              return node2;
            });
          }
        }
      }
    })(exports);
  }
});

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => main_default
});
module.exports = __toCommonJS(main_exports);

// ExportImagePlugin.ts
var import_obsidian = require("obsidian");
var import_file_saver = __toESM(require_FileSaver_min());

// constents.ts
var DEFAULT_SETTINGS = {
  width: "400"
};

// ExportImagePlugin.ts
var import_dom_to_image = __toESM(require_dom_to_image());
function delay(ms) {
  return new Promise(function(resolve) {
    setTimeout(function() {
      resolve(void 0);
    }, ms);
  });
}
var ExportImagePlugin = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    this.addCommand({
      id: "export-to-image-zh",
      name: "Export to image",
      checkCallback: (checking) => {
        const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
        if ((markdownView == null ? void 0 : markdownView.getMode()) === "preview") {
          if (!checking) {
            (async () => {
              const el = markdownView.contentEl.find(".markdown-preview-section");
              const container = el.parentElement;
              const scrollCache = container.scrollTop;
              container.scrollTo(0, 0);
              await delay(40);
              const totalHeight = el.clientHeight;
              console.log("scollHeight:", totalHeight);
              const screenHeight = markdownView.contentEl.clientHeight;
              let scrollIndex = 0;
              let height = el.clientHeight - parseFloat(el.style.paddingBottom) + 40;
              el.addClass("epxort-image-force-no-margin");
              const clone = await (0, import_dom_to_image.cloneNode)(el);
              const observer = new MutationObserver(async (records) => {
                for (let r of records) {
                  for (let node of Array.from(r.addedNodes)) {
                    clone.append(await (0, import_dom_to_image.cloneNode)(node));
                    const img = node.find("img");
                    if (img) {
                      height += img.clientHeight / 2;
                    } else {
                      const math = node.find(".math-block");
                      if (math) {
                        height += node.clientHeight;
                      }
                    }
                  }
                }
              });
              observer.observe(el, {
                childList: true
              });
              while (scrollIndex <= totalHeight - screenHeight) {
                scrollIndex += screenHeight;
                container.scrollTo(0, scrollIndex);
                await delay(40);
              }
              observer.disconnect();
              container.scrollTo(0, scrollCache);
              el.removeClass("epxort-image-force-no-margin");
              console.log(el.clientWidth, height);
              const blob = await (0, import_dom_to_image.toBlobWithClonedDom)(el, clone, {
                width: el.clientWidth * 2,
                height: height * 2,
                bgcolor: window.getComputedStyle(el.closest(".view-content")).backgroundColor,
                quality: 0.9,
                style: {
                  transform: "scale(2)",
                  transformOrigin: "top left"
                }
              });
              (0, import_file_saver.saveAs)(blob, `${markdownView.getDisplayText().replace(/\s+/g, "_")}.jpg`);
            })();
          }
          return true;
        }
      }
    });
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};

// main.ts
var main_default = ExportImagePlugin;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL2ZpbGUtc2F2ZXIvc3JjL0ZpbGVTYXZlci5qcyIsICJkb20tdG8taW1hZ2UuanMiLCAibWFpbi50cyIsICJFeHBvcnRJbWFnZVBsdWdpbi50cyIsICJjb25zdGVudHMudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8qXG4qIEZpbGVTYXZlci5qc1xuKiBBIHNhdmVBcygpIEZpbGVTYXZlciBpbXBsZW1lbnRhdGlvbi5cbipcbiogQnkgRWxpIEdyZXksIGh0dHA6Ly9lbGlncmV5LmNvbVxuKlxuKiBMaWNlbnNlIDogaHR0cHM6Ly9naXRodWIuY29tL2VsaWdyZXkvRmlsZVNhdmVyLmpzL2Jsb2IvbWFzdGVyL0xJQ0VOU0UubWQgKE1JVClcbiogc291cmNlICA6IGh0dHA6Ly9wdXJsLmVsaWdyZXkuY29tL2dpdGh1Yi9GaWxlU2F2ZXIuanNcbiovXG5cbi8vIFRoZSBvbmUgYW5kIG9ubHkgd2F5IG9mIGdldHRpbmcgZ2xvYmFsIHNjb3BlIGluIGFsbCBlbnZpcm9ubWVudHNcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcS8zMjc3MTgyLzEwMDg5OTlcbnZhciBfZ2xvYmFsID0gdHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LndpbmRvdyA9PT0gd2luZG93XG4gID8gd2luZG93IDogdHlwZW9mIHNlbGYgPT09ICdvYmplY3QnICYmIHNlbGYuc2VsZiA9PT0gc2VsZlxuICA/IHNlbGYgOiB0eXBlb2YgZ2xvYmFsID09PSAnb2JqZWN0JyAmJiBnbG9iYWwuZ2xvYmFsID09PSBnbG9iYWxcbiAgPyBnbG9iYWxcbiAgOiB0aGlzXG5cbmZ1bmN0aW9uIGJvbSAoYmxvYiwgb3B0cykge1xuICBpZiAodHlwZW9mIG9wdHMgPT09ICd1bmRlZmluZWQnKSBvcHRzID0geyBhdXRvQm9tOiBmYWxzZSB9XG4gIGVsc2UgaWYgKHR5cGVvZiBvcHRzICE9PSAnb2JqZWN0Jykge1xuICAgIGNvbnNvbGUud2FybignRGVwcmVjYXRlZDogRXhwZWN0ZWQgdGhpcmQgYXJndW1lbnQgdG8gYmUgYSBvYmplY3QnKVxuICAgIG9wdHMgPSB7IGF1dG9Cb206ICFvcHRzIH1cbiAgfVxuXG4gIC8vIHByZXBlbmQgQk9NIGZvciBVVEYtOCBYTUwgYW5kIHRleHQvKiB0eXBlcyAoaW5jbHVkaW5nIEhUTUwpXG4gIC8vIG5vdGU6IHlvdXIgYnJvd3NlciB3aWxsIGF1dG9tYXRpY2FsbHkgY29udmVydCBVVEYtMTYgVStGRUZGIHRvIEVGIEJCIEJGXG4gIGlmIChvcHRzLmF1dG9Cb20gJiYgL15cXHMqKD86dGV4dFxcL1xcUyp8YXBwbGljYXRpb25cXC94bWx8XFxTKlxcL1xcUypcXCt4bWwpXFxzKjsuKmNoYXJzZXRcXHMqPVxccyp1dGYtOC9pLnRlc3QoYmxvYi50eXBlKSkge1xuICAgIHJldHVybiBuZXcgQmxvYihbU3RyaW5nLmZyb21DaGFyQ29kZSgweEZFRkYpLCBibG9iXSwgeyB0eXBlOiBibG9iLnR5cGUgfSlcbiAgfVxuICByZXR1cm4gYmxvYlxufVxuXG5mdW5jdGlvbiBkb3dubG9hZCAodXJsLCBuYW1lLCBvcHRzKSB7XG4gIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKVxuICB4aHIub3BlbignR0VUJywgdXJsKVxuICB4aHIucmVzcG9uc2VUeXBlID0gJ2Jsb2InXG4gIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgc2F2ZUFzKHhoci5yZXNwb25zZSwgbmFtZSwgb3B0cylcbiAgfVxuICB4aHIub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zb2xlLmVycm9yKCdjb3VsZCBub3QgZG93bmxvYWQgZmlsZScpXG4gIH1cbiAgeGhyLnNlbmQoKVxufVxuXG5mdW5jdGlvbiBjb3JzRW5hYmxlZCAodXJsKSB7XG4gIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKVxuICAvLyB1c2Ugc3luYyB0byBhdm9pZCBwb3B1cCBibG9ja2VyXG4gIHhoci5vcGVuKCdIRUFEJywgdXJsLCBmYWxzZSlcbiAgdHJ5IHtcbiAgICB4aHIuc2VuZCgpXG4gIH0gY2F0Y2ggKGUpIHt9XG4gIHJldHVybiB4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDw9IDI5OVxufVxuXG4vLyBgYS5jbGljaygpYCBkb2Vzbid0IHdvcmsgZm9yIGFsbCBicm93c2VycyAoIzQ2NSlcbmZ1bmN0aW9uIGNsaWNrIChub2RlKSB7XG4gIHRyeSB7XG4gICAgbm9kZS5kaXNwYXRjaEV2ZW50KG5ldyBNb3VzZUV2ZW50KCdjbGljaycpKVxuICB9IGNhdGNoIChlKSB7XG4gICAgdmFyIGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdNb3VzZUV2ZW50cycpXG4gICAgZXZ0LmluaXRNb3VzZUV2ZW50KCdjbGljaycsIHRydWUsIHRydWUsIHdpbmRvdywgMCwgMCwgMCwgODAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDIwLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgMCwgbnVsbClcbiAgICBub2RlLmRpc3BhdGNoRXZlbnQoZXZ0KVxuICB9XG59XG5cbi8vIERldGVjdCBXZWJWaWV3IGluc2lkZSBhIG5hdGl2ZSBtYWNPUyBhcHAgYnkgcnVsaW5nIG91dCBhbGwgYnJvd3NlcnNcbi8vIFdlIGp1c3QgbmVlZCB0byBjaGVjayBmb3IgJ1NhZmFyaScgYmVjYXVzZSBhbGwgb3RoZXIgYnJvd3NlcnMgKGJlc2lkZXMgRmlyZWZveCkgaW5jbHVkZSB0aGF0IHRvb1xuLy8gaHR0cHM6Ly93d3cud2hhdGlzbXlicm93c2VyLmNvbS9ndWlkZXMvdGhlLWxhdGVzdC11c2VyLWFnZW50L21hY29zXG52YXIgaXNNYWNPU1dlYlZpZXcgPSBfZ2xvYmFsLm5hdmlnYXRvciAmJiAvTWFjaW50b3NoLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmIC9BcHBsZVdlYktpdC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiAhL1NhZmFyaS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KVxuXG52YXIgc2F2ZUFzID0gX2dsb2JhbC5zYXZlQXMgfHwgKFxuICAvLyBwcm9iYWJseSBpbiBzb21lIHdlYiB3b3JrZXJcbiAgKHR5cGVvZiB3aW5kb3cgIT09ICdvYmplY3QnIHx8IHdpbmRvdyAhPT0gX2dsb2JhbClcbiAgICA/IGZ1bmN0aW9uIHNhdmVBcyAoKSB7IC8qIG5vb3AgKi8gfVxuXG4gIC8vIFVzZSBkb3dubG9hZCBhdHRyaWJ1dGUgZmlyc3QgaWYgcG9zc2libGUgKCMxOTMgTHVtaWEgbW9iaWxlKSB1bmxlc3MgdGhpcyBpcyBhIG1hY09TIFdlYlZpZXdcbiAgOiAoJ2Rvd25sb2FkJyBpbiBIVE1MQW5jaG9yRWxlbWVudC5wcm90b3R5cGUgJiYgIWlzTWFjT1NXZWJWaWV3KVxuICA/IGZ1bmN0aW9uIHNhdmVBcyAoYmxvYiwgbmFtZSwgb3B0cykge1xuICAgIHZhciBVUkwgPSBfZ2xvYmFsLlVSTCB8fCBfZ2xvYmFsLndlYmtpdFVSTFxuICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpXG4gICAgbmFtZSA9IG5hbWUgfHwgYmxvYi5uYW1lIHx8ICdkb3dubG9hZCdcblxuICAgIGEuZG93bmxvYWQgPSBuYW1lXG4gICAgYS5yZWwgPSAnbm9vcGVuZXInIC8vIHRhYm5hYmJpbmdcblxuICAgIC8vIFRPRE86IGRldGVjdCBjaHJvbWUgZXh0ZW5zaW9ucyAmIHBhY2thZ2VkIGFwcHNcbiAgICAvLyBhLnRhcmdldCA9ICdfYmxhbmsnXG5cbiAgICBpZiAodHlwZW9mIGJsb2IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBTdXBwb3J0IHJlZ3VsYXIgbGlua3NcbiAgICAgIGEuaHJlZiA9IGJsb2JcbiAgICAgIGlmIChhLm9yaWdpbiAhPT0gbG9jYXRpb24ub3JpZ2luKSB7XG4gICAgICAgIGNvcnNFbmFibGVkKGEuaHJlZilcbiAgICAgICAgICA/IGRvd25sb2FkKGJsb2IsIG5hbWUsIG9wdHMpXG4gICAgICAgICAgOiBjbGljayhhLCBhLnRhcmdldCA9ICdfYmxhbmsnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2xpY2soYSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU3VwcG9ydCBibG9ic1xuICAgICAgYS5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKVxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IFVSTC5yZXZva2VPYmplY3RVUkwoYS5ocmVmKSB9LCA0RTQpIC8vIDQwc1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IGNsaWNrKGEpIH0sIDApXG4gICAgfVxuICB9XG5cbiAgLy8gVXNlIG1zU2F2ZU9yT3BlbkJsb2IgYXMgYSBzZWNvbmQgYXBwcm9hY2hcbiAgOiAnbXNTYXZlT3JPcGVuQmxvYicgaW4gbmF2aWdhdG9yXG4gID8gZnVuY3Rpb24gc2F2ZUFzIChibG9iLCBuYW1lLCBvcHRzKSB7XG4gICAgbmFtZSA9IG5hbWUgfHwgYmxvYi5uYW1lIHx8ICdkb3dubG9hZCdcblxuICAgIGlmICh0eXBlb2YgYmxvYiA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGlmIChjb3JzRW5hYmxlZChibG9iKSkge1xuICAgICAgICBkb3dubG9hZChibG9iLCBuYW1lLCBvcHRzKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcbiAgICAgICAgYS5ocmVmID0gYmxvYlxuICAgICAgICBhLnRhcmdldCA9ICdfYmxhbmsnXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyBjbGljayhhKSB9KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBuYXZpZ2F0b3IubXNTYXZlT3JPcGVuQmxvYihib20oYmxvYiwgb3B0cyksIG5hbWUpXG4gICAgfVxuICB9XG5cbiAgLy8gRmFsbGJhY2sgdG8gdXNpbmcgRmlsZVJlYWRlciBhbmQgYSBwb3B1cFxuICA6IGZ1bmN0aW9uIHNhdmVBcyAoYmxvYiwgbmFtZSwgb3B0cywgcG9wdXApIHtcbiAgICAvLyBPcGVuIGEgcG9wdXAgaW1tZWRpYXRlbHkgZG8gZ28gYXJvdW5kIHBvcHVwIGJsb2NrZXJcbiAgICAvLyBNb3N0bHkgb25seSBhdmFpbGFibGUgb24gdXNlciBpbnRlcmFjdGlvbiBhbmQgdGhlIGZpbGVSZWFkZXIgaXMgYXN5bmMgc28uLi5cbiAgICBwb3B1cCA9IHBvcHVwIHx8IG9wZW4oJycsICdfYmxhbmsnKVxuICAgIGlmIChwb3B1cCkge1xuICAgICAgcG9wdXAuZG9jdW1lbnQudGl0bGUgPVxuICAgICAgcG9wdXAuZG9jdW1lbnQuYm9keS5pbm5lclRleHQgPSAnZG93bmxvYWRpbmcuLi4nXG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBibG9iID09PSAnc3RyaW5nJykgcmV0dXJuIGRvd25sb2FkKGJsb2IsIG5hbWUsIG9wdHMpXG5cbiAgICB2YXIgZm9yY2UgPSBibG9iLnR5cGUgPT09ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nXG4gICAgdmFyIGlzU2FmYXJpID0gL2NvbnN0cnVjdG9yL2kudGVzdChfZ2xvYmFsLkhUTUxFbGVtZW50KSB8fCBfZ2xvYmFsLnNhZmFyaVxuICAgIHZhciBpc0Nocm9tZUlPUyA9IC9DcmlPU1xcL1tcXGRdKy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KVxuXG4gICAgaWYgKChpc0Nocm9tZUlPUyB8fCAoZm9yY2UgJiYgaXNTYWZhcmkpIHx8IGlzTWFjT1NXZWJWaWV3KSAmJiB0eXBlb2YgRmlsZVJlYWRlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIFNhZmFyaSBkb2Vzbid0IGFsbG93IGRvd25sb2FkaW5nIG9mIGJsb2IgVVJMc1xuICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKClcbiAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB1cmwgPSByZWFkZXIucmVzdWx0XG4gICAgICAgIHVybCA9IGlzQ2hyb21lSU9TID8gdXJsIDogdXJsLnJlcGxhY2UoL15kYXRhOlteO10qOy8sICdkYXRhOmF0dGFjaG1lbnQvZmlsZTsnKVxuICAgICAgICBpZiAocG9wdXApIHBvcHVwLmxvY2F0aW9uLmhyZWYgPSB1cmxcbiAgICAgICAgZWxzZSBsb2NhdGlvbiA9IHVybFxuICAgICAgICBwb3B1cCA9IG51bGwgLy8gcmV2ZXJzZS10YWJuYWJiaW5nICM0NjBcbiAgICAgIH1cbiAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGJsb2IpXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBVUkwgPSBfZ2xvYmFsLlVSTCB8fCBfZ2xvYmFsLndlYmtpdFVSTFxuICAgICAgdmFyIHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYilcbiAgICAgIGlmIChwb3B1cCkgcG9wdXAubG9jYXRpb24gPSB1cmxcbiAgICAgIGVsc2UgbG9jYXRpb24uaHJlZiA9IHVybFxuICAgICAgcG9wdXAgPSBudWxsIC8vIHJldmVyc2UtdGFibmFiYmluZyAjNDYwXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpIH0sIDRFNCkgLy8gNDBzXG4gICAgfVxuICB9XG4pXG5cbl9nbG9iYWwuc2F2ZUFzID0gc2F2ZUFzLnNhdmVBcyA9IHNhdmVBc1xuXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSBzYXZlQXM7XG59XG4iLCAiKGZ1bmN0aW9uIChnbG9iYWwpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciB1dGlsID0gbmV3VXRpbCgpO1xuICB2YXIgaW5saW5lciA9IG5ld0lubGluZXIoKTtcbiAgdmFyIGZvbnRGYWNlcyA9IG5ld0ZvbnRGYWNlcygpO1xuICB2YXIgaW1hZ2VzID0gbmV3SW1hZ2VzKCk7XG5cbiAgLy8gRGVmYXVsdCBpbXBsIG9wdGlvbnNcbiAgdmFyIGRlZmF1bHRPcHRpb25zID0ge1xuICAgIC8vIERlZmF1bHQgaXMgdG8gZmFpbCBvbiBlcnJvciwgbm8gcGxhY2Vob2xkZXJcbiAgICBpbWFnZVBsYWNlaG9sZGVyOiB1bmRlZmluZWQsXG4gICAgLy8gRGVmYXVsdCBjYWNoZSBidXN0IGlzIGZhbHNlLCBpdCB3aWxsIHVzZSB0aGUgY2FjaGVcbiAgICBjYWNoZUJ1c3Q6IGZhbHNlXG4gIH07XG5cbiAgdmFyIGRvbXRvaW1hZ2UgPSB7XG4gICAgdG9Tdmc6IHRvU3ZnLFxuICAgIHRvUG5nOiB0b1BuZyxcbiAgICB0b0pwZWc6IHRvSnBlZyxcbiAgICB0b0Jsb2I6IHRvQmxvYixcbiAgICB0b1BpeGVsRGF0YTogdG9QaXhlbERhdGEsXG4gICAgdG9CbG9iV2l0aENsb25lZERvbTogdG9CbG9iV2l0aENsb25lZERvbSxcbiAgICBjbG9uZU5vZGU6IGNsb25lTm9kZSxcbiAgICBpbXBsOiB7XG4gICAgICBmb250RmFjZXM6IGZvbnRGYWNlcyxcbiAgICAgIGltYWdlczogaW1hZ2VzLFxuICAgICAgdXRpbDogdXRpbCxcbiAgICAgIGlubGluZXI6IGlubGluZXIsXG4gICAgICBvcHRpb25zOiB7fVxuICAgIH1cbiAgfTtcblxuICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBkb210b2ltYWdlO1xuICBlbHNlXG4gICAgZ2xvYmFsLmRvbXRvaW1hZ2UgPSBkb210b2ltYWdlO1xuXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Tm9kZX0gbm9kZSAtIFRoZSBET00gTm9kZSBvYmplY3QgdG8gcmVuZGVyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gUmVuZGVyaW5nIG9wdGlvbnNcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3B0aW9ucy5maWx0ZXIgLSBTaG91bGQgcmV0dXJuIHRydWUgaWYgcGFzc2VkIG5vZGUgc2hvdWxkIGJlIGluY2x1ZGVkIGluIHRoZSBvdXRwdXRcbiAgICogICAgICAgICAgKGV4Y2x1ZGluZyBub2RlIG1lYW5zIGV4Y2x1ZGluZyBpdCdzIGNoaWxkcmVuIGFzIHdlbGwpLiBOb3QgY2FsbGVkIG9uIHRoZSByb290IG5vZGUuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBvcHRpb25zLmJnY29sb3IgLSBjb2xvciBmb3IgdGhlIGJhY2tncm91bmQsIGFueSB2YWxpZCBDU1MgY29sb3IgdmFsdWUuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBvcHRpb25zLndpZHRoIC0gd2lkdGggdG8gYmUgYXBwbGllZCB0byBub2RlIGJlZm9yZSByZW5kZXJpbmcuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBvcHRpb25zLmhlaWdodCAtIGhlaWdodCB0byBiZSBhcHBsaWVkIHRvIG5vZGUgYmVmb3JlIHJlbmRlcmluZy5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMuc3R5bGUgLSBhbiBvYmplY3Qgd2hvc2UgcHJvcGVydGllcyB0byBiZSBjb3BpZWQgdG8gbm9kZSdzIHN0eWxlIGJlZm9yZSByZW5kZXJpbmcuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBvcHRpb25zLnF1YWxpdHkgLSBhIE51bWJlciBiZXR3ZWVuIDAgYW5kIDEgaW5kaWNhdGluZyBpbWFnZSBxdWFsaXR5IChhcHBsaWNhYmxlIHRvIEpQRUcgb25seSksXG4gICAgICAgICAgICAgIGRlZmF1bHRzIHRvIDEuMC5cbiAgICogQHBhcmFtIHtTdHJpbmd9IG9wdGlvbnMuaW1hZ2VQbGFjZWhvbGRlciAtIGRhdGFVUkwgdG8gdXNlIGFzIGEgcGxhY2Vob2xkZXIgZm9yIGZhaWxlZCBpbWFnZXMsIGRlZmF1bHQgYmVoYXZpb3VyIGlzIHRvIGZhaWwgZmFzdCBvbiBpbWFnZXMgd2UgY2FuJ3QgZmV0Y2hcbiAgICogQHBhcmFtIHtCb29sZWFufSBvcHRpb25zLmNhY2hlQnVzdCAtIHNldCB0byB0cnVlIHRvIGNhY2hlIGJ1c3QgYnkgYXBwZW5kaW5nIHRoZSB0aW1lIHRvIHRoZSByZXF1ZXN0IHVybFxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIEEgcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aXRoIGEgU1ZHIGltYWdlIGRhdGEgVVJMXG4gICAqICovXG4gIGZ1bmN0aW9uIHRvU3ZnKG5vZGUsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICBjb3B5T3B0aW9ucyhvcHRpb25zKTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5vZGUpXG4gICAgICAudGhlbihmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICByZXR1cm4gY2xvbmVOb2RlKG5vZGUsIG9wdGlvbnMuZmlsdGVyLCB0cnVlKTtcbiAgICAgIH0pXG4gICAgICAudGhlbihlbWJlZEZvbnRzKVxuICAgICAgLnRoZW4oaW5saW5lSW1hZ2VzKVxuICAgICAgLnRoZW4oYXBwbHlPcHRpb25zKVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKGNsb25lKSB7XG4gICAgICAgIHJldHVybiBtYWtlU3ZnRGF0YVVyaShjbG9uZSxcbiAgICAgICAgICBvcHRpb25zLndpZHRoIHx8IHV0aWwud2lkdGgobm9kZSksXG4gICAgICAgICAgb3B0aW9ucy5oZWlnaHQgfHwgdXRpbC5oZWlnaHQobm9kZSlcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gYXBwbHlPcHRpb25zKGNsb25lKSB7XG4gICAgICBpZiAob3B0aW9ucy5iZ2NvbG9yKSBjbG9uZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBvcHRpb25zLmJnY29sb3I7XG5cbiAgICAgIGlmIChvcHRpb25zLndpZHRoKSBjbG9uZS5zdHlsZS53aWR0aCA9IG9wdGlvbnMud2lkdGggKyAncHgnO1xuICAgICAgaWYgKG9wdGlvbnMuaGVpZ2h0KSBjbG9uZS5zdHlsZS5oZWlnaHQgPSBvcHRpb25zLmhlaWdodCArICdweCc7XG5cbiAgICAgIGlmIChvcHRpb25zLnN0eWxlKVxuICAgICAgICBPYmplY3Qua2V5cyhvcHRpb25zLnN0eWxlKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuICAgICAgICAgIGNsb25lLnN0eWxlW3Byb3BlcnR5XSA9IG9wdGlvbnMuc3R5bGVbcHJvcGVydHldO1xuICAgICAgICB9KTtcblxuICAgICAgcmV0dXJuIGNsb25lO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHRvU3ZnV2l0aENsb25lZERvbShub2RlLCBjbG9uZSwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIGNvcHlPcHRpb25zKG9wdGlvbnMpO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoY2xvbmUpXG4gICAgICAudGhlbihlbWJlZEZvbnRzKVxuICAgICAgLnRoZW4oaW5saW5lSW1hZ2VzKVxuICAgICAgLnRoZW4oYXBwbHlPcHRpb25zKVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKGNsb25lKSB7XG4gICAgICAgIHJldHVybiBtYWtlU3ZnRGF0YVVyaShjbG9uZSxcbiAgICAgICAgICBvcHRpb25zLndpZHRoICogMixcbiAgICAgICAgICBvcHRpb25zLmhlaWdodCAqIDJcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gYXBwbHlPcHRpb25zKGNsb25lKSB7XG4gICAgICBpZiAob3B0aW9ucy5iZ2NvbG9yKSBjbG9uZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBvcHRpb25zLmJnY29sb3I7XG5cbiAgICAgIGlmIChvcHRpb25zLndpZHRoKSBjbG9uZS5zdHlsZS53aWR0aCA9IG9wdGlvbnMud2lkdGggKyAncHgnO1xuICAgICAgaWYgKG9wdGlvbnMuaGVpZ2h0KSBjbG9uZS5zdHlsZS5oZWlnaHQgPSBvcHRpb25zLmhlaWdodCArICdweCc7XG5cbiAgICAgIGlmIChvcHRpb25zLnN0eWxlKVxuICAgICAgICBPYmplY3Qua2V5cyhvcHRpb25zLnN0eWxlKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuICAgICAgICAgIGNsb25lLnN0eWxlW3Byb3BlcnR5XSA9IG9wdGlvbnMuc3R5bGVbcHJvcGVydHldO1xuICAgICAgICB9KTtcblxuICAgICAgcmV0dXJuIGNsb25lO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge05vZGV9IG5vZGUgLSBUaGUgRE9NIE5vZGUgb2JqZWN0IHRvIHJlbmRlclxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIFJlbmRlcmluZyBvcHRpb25zLCBAc2VlIHtAbGluayB0b1N2Z31cbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSBBIHByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgd2l0aCBhIFVpbnQ4QXJyYXkgY29udGFpbmluZyBSR0JBIHBpeGVsIGRhdGEuXG4gICAqICovXG4gIGZ1bmN0aW9uIHRvUGl4ZWxEYXRhKG5vZGUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZHJhdyhub2RlLCBvcHRpb25zIHx8IHt9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKGNhbnZhcykge1xuICAgICAgICByZXR1cm4gY2FudmFzLmdldENvbnRleHQoJzJkJykuZ2V0SW1hZ2VEYXRhKFxuICAgICAgICAgIDAsXG4gICAgICAgICAgMCxcbiAgICAgICAgICB1dGlsLndpZHRoKG5vZGUpLFxuICAgICAgICAgIHV0aWwuaGVpZ2h0KG5vZGUpXG4gICAgICAgICkuZGF0YTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Tm9kZX0gbm9kZSAtIFRoZSBET00gTm9kZSBvYmplY3QgdG8gcmVuZGVyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gUmVuZGVyaW5nIG9wdGlvbnMsIEBzZWUge0BsaW5rIHRvU3ZnfVxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIEEgcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aXRoIGEgUE5HIGltYWdlIGRhdGEgVVJMXG4gICAqICovXG4gIGZ1bmN0aW9uIHRvUG5nKG5vZGUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZHJhdyhub2RlLCBvcHRpb25zIHx8IHt9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKGNhbnZhcykge1xuICAgICAgICByZXR1cm4gY2FudmFzLnRvRGF0YVVSTCgpO1xuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtOb2RlfSBub2RlIC0gVGhlIERPTSBOb2RlIG9iamVjdCB0byByZW5kZXJcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBSZW5kZXJpbmcgb3B0aW9ucywgQHNlZSB7QGxpbmsgdG9Tdmd9XG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gQSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdpdGggYSBKUEVHIGltYWdlIGRhdGEgVVJMXG4gICAqICovXG4gIGZ1bmN0aW9uIHRvSnBlZyhub2RlLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgcmV0dXJuIGRyYXcobm9kZSwgb3B0aW9ucylcbiAgICAgIC50aGVuKGZ1bmN0aW9uIChjYW52YXMpIHtcbiAgICAgICAgcmV0dXJuIGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL2pwZWcnLCBvcHRpb25zLnF1YWxpdHkgfHwgMS4wKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Tm9kZX0gbm9kZSAtIFRoZSBET00gTm9kZSBvYmplY3QgdG8gcmVuZGVyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gUmVuZGVyaW5nIG9wdGlvbnMsIEBzZWUge0BsaW5rIHRvU3ZnfVxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIEEgcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aXRoIGEgUE5HIGltYWdlIGJsb2JcbiAgICogKi9cbiAgZnVuY3Rpb24gdG9CbG9iKG5vZGUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZHJhdyhub2RlLCBvcHRpb25zIHx8IHt9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKGNhbnZhcykge1xuICAgICAgICByZXR1cm4gdXRpbC5jYW52YXNUb0Jsb2IoY2FudmFzLCBvcHRpb25zKTtcbiAgICAgIH0pO1xuICB9XG5cblxuICBmdW5jdGlvbiB0b0Jsb2JXaXRoQ2xvbmVkRG9tKG5vZGUsIGNsb25lLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGRyYXdXaXRoQ2xvbmVkRG9tKG5vZGUsIGNsb25lLCBvcHRpb25zIHx8IHt9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKGNhbnZhcykge1xuICAgICAgICByZXR1cm4gdXRpbC5jYW52YXNUb0Jsb2IoY2FudmFzLCBvcHRpb25zKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gY29weU9wdGlvbnMob3B0aW9ucykge1xuICAgIC8vIENvcHkgb3B0aW9ucyB0byBpbXBsIG9wdGlvbnMgZm9yIHVzZSBpbiBpbXBsXG4gICAgaWYgKHR5cGVvZiAob3B0aW9ucy5pbWFnZVBsYWNlaG9sZGVyKSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRvbXRvaW1hZ2UuaW1wbC5vcHRpb25zLmltYWdlUGxhY2Vob2xkZXIgPSBkZWZhdWx0T3B0aW9ucy5pbWFnZVBsYWNlaG9sZGVyO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb210b2ltYWdlLmltcGwub3B0aW9ucy5pbWFnZVBsYWNlaG9sZGVyID0gb3B0aW9ucy5pbWFnZVBsYWNlaG9sZGVyO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgKG9wdGlvbnMuY2FjaGVCdXN0KSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRvbXRvaW1hZ2UuaW1wbC5vcHRpb25zLmNhY2hlQnVzdCA9IGRlZmF1bHRPcHRpb25zLmNhY2hlQnVzdDtcbiAgICB9IGVsc2Uge1xuICAgICAgZG9tdG9pbWFnZS5pbXBsLm9wdGlvbnMuY2FjaGVCdXN0ID0gb3B0aW9ucy5jYWNoZUJ1c3Q7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZHJhdyhkb21Ob2RlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRvU3ZnKGRvbU5vZGUsIG9wdGlvbnMpXG4gICAgICAudGhlbih1dGlsLm1ha2VJbWFnZSlcbiAgICAgIC50aGVuKHV0aWwuZGVsYXkoMTAwKSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uIChpbWFnZSkge1xuICAgICAgICB2YXIgY2FudmFzID0gbmV3Q2FudmFzKGRvbU5vZGUpO1xuICAgICAgICBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKS5kcmF3SW1hZ2UoaW1hZ2UsIDAsIDApO1xuICAgICAgICByZXR1cm4gY2FudmFzO1xuICAgICAgfSk7XG5cbiAgICBmdW5jdGlvbiBuZXdDYW52YXMoZG9tTm9kZSkge1xuICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgY2FudmFzLndpZHRoID0gb3B0aW9ucy53aWR0aCB8fCB1dGlsLndpZHRoKGRvbU5vZGUpO1xuICAgICAgY2FudmFzLmhlaWdodCA9IG9wdGlvbnMuaGVpZ2h0IHx8IHV0aWwuaGVpZ2h0KGRvbU5vZGUpO1xuXG4gICAgICBpZiAob3B0aW9ucy5iZ2NvbG9yKSB7XG4gICAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IG9wdGlvbnMuYmdjb2xvcjtcbiAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjYW52YXM7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGRyYXdXaXRoQ2xvbmVkRG9tKGRvbU5vZGUsIGNsb25lLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRvU3ZnV2l0aENsb25lZERvbShkb21Ob2RlLCBjbG9uZSwgb3B0aW9ucylcbiAgICAgIC50aGVuKHV0aWwubWFrZUltYWdlKVxuICAgICAgLnRoZW4odXRpbC5kZWxheSgxMDApKVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKGltYWdlKSB7XG4gICAgICAgIHZhciBjYW52YXMgPSBuZXdDYW52YXMoZG9tTm9kZSk7XG4gICAgICAgIGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpLmRyYXdJbWFnZShpbWFnZSwgMCwgMCwgb3B0aW9ucy53aWR0aCwgb3B0aW9ucy5oZWlnaHQpO1xuICAgICAgICByZXR1cm4gY2FudmFzO1xuICAgICAgfSk7XG5cbiAgICBmdW5jdGlvbiBuZXdDYW52YXMoZG9tTm9kZSkge1xuICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgY2FudmFzLndpZHRoID0gb3B0aW9ucy53aWR0aCAvIDI7XG4gICAgICBjYW52YXMuaGVpZ2h0ID0gb3B0aW9ucy5oZWlnaHQgLyAyO1xuXG4gICAgICBpZiAob3B0aW9ucy5iZ2NvbG9yKSB7XG4gICAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IG9wdGlvbnMuYmdjb2xvcjtcbiAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjYW52YXM7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2xvbmVOb2RlKG5vZGUsIGZpbHRlciwgcm9vdCkge1xuICAgIGlmICghcm9vdCAmJiBmaWx0ZXIgJiYgIWZpbHRlcihub2RlKSkgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuXG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShub2RlKVxuICAgICAgLnRoZW4obWFrZU5vZGVDb3B5KVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKGNsb25lKSB7XG4gICAgICAgIHJldHVybiBjbG9uZUNoaWxkcmVuKG5vZGUsIGNsb25lLCBmaWx0ZXIpO1xuICAgICAgfSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uIChjbG9uZSkge1xuICAgICAgICByZXR1cm4gcHJvY2Vzc0Nsb25lKG5vZGUsIGNsb25lKTtcbiAgICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gbWFrZU5vZGVDb3B5KG5vZGUpIHtcbiAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpIHJldHVybiB1dGlsLm1ha2VJbWFnZShub2RlLnRvRGF0YVVSTCgpKTtcbiAgICAgIHJldHVybiBub2RlLmNsb25lTm9kZShmYWxzZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xvbmVDaGlsZHJlbihvcmlnaW5hbCwgY2xvbmUsIGZpbHRlcikge1xuICAgICAgdmFyIGNoaWxkcmVuID0gb3JpZ2luYWwuY2hpbGROb2RlcztcbiAgICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPT09IDApIHJldHVybiBQcm9taXNlLnJlc29sdmUoY2xvbmUpO1xuXG4gICAgICByZXR1cm4gY2xvbmVDaGlsZHJlbkluT3JkZXIoY2xvbmUsIHV0aWwuYXNBcnJheShjaGlsZHJlbiksIGZpbHRlcilcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBjbG9uZTtcbiAgICAgICAgfSk7XG5cbiAgICAgIGZ1bmN0aW9uIGNsb25lQ2hpbGRyZW5Jbk9yZGVyKHBhcmVudCwgY2hpbGRyZW4sIGZpbHRlcikge1xuICAgICAgICB2YXIgZG9uZSA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICBjaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICAgIGRvbmUgPSBkb25lXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHJldHVybiBjbG9uZU5vZGUoY2hpbGQsIGZpbHRlcik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGNoaWxkQ2xvbmUpIHtcbiAgICAgICAgICAgICAgaWYgKGNoaWxkQ2xvbmUpIHBhcmVudC5hcHBlbmRDaGlsZChjaGlsZENsb25lKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRvbmU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcHJvY2Vzc0Nsb25lKG9yaWdpbmFsLCBjbG9uZSkge1xuICAgICAgaWYgKCEoY2xvbmUgaW5zdGFuY2VvZiBFbGVtZW50KSkgcmV0dXJuIGNsb25lO1xuXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKClcbiAgICAgICAgLnRoZW4oY2xvbmVTdHlsZSlcbiAgICAgICAgLnRoZW4oY2xvbmVQc2V1ZG9FbGVtZW50cylcbiAgICAgICAgLnRoZW4oY29weVVzZXJJbnB1dClcbiAgICAgICAgLnRoZW4oZml4U3ZnKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIGNsb25lO1xuICAgICAgICB9KTtcblxuICAgICAgZnVuY3Rpb24gY2xvbmVTdHlsZSgpIHtcbiAgICAgICAgY29weVN0eWxlKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG9yaWdpbmFsKSwgY2xvbmUuc3R5bGUgfHwge30pO1xuXG4gICAgICAgIGZ1bmN0aW9uIGNvcHlTdHlsZShzb3VyY2UsIHRhcmdldCkge1xuICAgICAgICAgIGlmIChzb3VyY2UuY3NzVGV4dCkgdGFyZ2V0LmNzc1RleHQgPSBzb3VyY2UuY3NzVGV4dDtcbiAgICAgICAgICBlbHNlIGNvcHlQcm9wZXJ0aWVzKHNvdXJjZSwgdGFyZ2V0KTtcblxuICAgICAgICAgIGZ1bmN0aW9uIGNvcHlQcm9wZXJ0aWVzKHNvdXJjZSwgdGFyZ2V0KSB7XG4gICAgICAgICAgICBpZiAodGFyZ2V0LnNldFByb3BlcnR5KSB7XG4gICAgICAgICAgICAgIHV0aWwuYXNBcnJheShzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQuc2V0UHJvcGVydHkoXG4gICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgc291cmNlLmdldFByb3BlcnR5VmFsdWUobmFtZSksXG4gICAgICAgICAgICAgICAgICBzb3VyY2UuZ2V0UHJvcGVydHlQcmlvcml0eShuYW1lKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjbG9uZVBzZXVkb0VsZW1lbnRzKCkge1xuICAgICAgICBbJzpiZWZvcmUnLCAnOmFmdGVyJ10uZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgIGNsb25lUHNldWRvRWxlbWVudChlbGVtZW50KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZnVuY3Rpb24gY2xvbmVQc2V1ZG9FbGVtZW50KGVsZW1lbnQpIHtcbiAgICAgICAgICB2YXIgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShvcmlnaW5hbCwgZWxlbWVudCk7XG4gICAgICAgICAgdmFyIGNvbnRlbnQgPSBzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdjb250ZW50Jyk7XG5cbiAgICAgICAgICBpZiAoY29udGVudCA9PT0gJycgfHwgY29udGVudCA9PT0gJ25vbmUnKSByZXR1cm47XG5cbiAgICAgICAgICB2YXIgY2xhc3NOYW1lID0gdXRpbC51aWQoKTtcbiAgICAgICAgICBjbG9uZS5jbGFzc05hbWUgPSBjbG9uZS5jbGFzc05hbWUgKyAnICcgKyBjbGFzc05hbWU7XG4gICAgICAgICAgdmFyIHN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICAgICAgc3R5bGVFbGVtZW50LmFwcGVuZENoaWxkKGZvcm1hdFBzZXVkb0VsZW1lbnRTdHlsZShjbGFzc05hbWUsIGVsZW1lbnQsIHN0eWxlKSk7XG4gICAgICAgICAgY2xvbmUuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcblxuICAgICAgICAgIGZ1bmN0aW9uIGZvcm1hdFBzZXVkb0VsZW1lbnRTdHlsZShjbGFzc05hbWUsIGVsZW1lbnQsIHN0eWxlKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSAnLicgKyBjbGFzc05hbWUgKyAnOicgKyBlbGVtZW50O1xuICAgICAgICAgICAgdmFyIGNzc1RleHQgPSBzdHlsZS5jc3NUZXh0ID8gZm9ybWF0Q3NzVGV4dChzdHlsZSkgOiBmb3JtYXRDc3NQcm9wZXJ0aWVzKHN0eWxlKTtcbiAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShzZWxlY3RvciArICd7JyArIGNzc1RleHQgKyAnfScpO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBmb3JtYXRDc3NUZXh0KHN0eWxlKSB7XG4gICAgICAgICAgICAgIHZhciBjb250ZW50ID0gc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnY29udGVudCcpO1xuICAgICAgICAgICAgICByZXR1cm4gc3R5bGUuY3NzVGV4dCArICcgY29udGVudDogJyArIGNvbnRlbnQgKyAnOyc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGZvcm1hdENzc1Byb3BlcnRpZXMoc3R5bGUpIHtcblxuICAgICAgICAgICAgICByZXR1cm4gdXRpbC5hc0FycmF5KHN0eWxlKVxuICAgICAgICAgICAgICAgIC5tYXAoZm9ybWF0UHJvcGVydHkpXG4gICAgICAgICAgICAgICAgLmpvaW4oJzsgJykgKyAnOyc7XG5cbiAgICAgICAgICAgICAgZnVuY3Rpb24gZm9ybWF0UHJvcGVydHkobmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuYW1lICsgJzogJyArXG4gICAgICAgICAgICAgICAgICBzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKG5hbWUpICtcbiAgICAgICAgICAgICAgICAgIChzdHlsZS5nZXRQcm9wZXJ0eVByaW9yaXR5KG5hbWUpID8gJyAhaW1wb3J0YW50JyA6ICcnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjb3B5VXNlcklucHV0KCkge1xuICAgICAgICBpZiAob3JpZ2luYWwgaW5zdGFuY2VvZiBIVE1MVGV4dEFyZWFFbGVtZW50KSBjbG9uZS5pbm5lckhUTUwgPSBvcmlnaW5hbC52YWx1ZTtcbiAgICAgICAgaWYgKG9yaWdpbmFsIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkgY2xvbmUuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgb3JpZ2luYWwudmFsdWUpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBmaXhTdmcoKSB7XG4gICAgICAgIGlmICghKGNsb25lIGluc3RhbmNlb2YgU1ZHRWxlbWVudCkpIHJldHVybjtcbiAgICAgICAgY2xvbmUuc2V0QXR0cmlidXRlKCd4bWxucycsICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycpO1xuXG4gICAgICAgIGlmICghKGNsb25lIGluc3RhbmNlb2YgU1ZHUmVjdEVsZW1lbnQpKSByZXR1cm47XG4gICAgICAgIFsnd2lkdGgnLCAnaGVpZ2h0J10uZm9yRWFjaChmdW5jdGlvbiAoYXR0cmlidXRlKSB7XG4gICAgICAgICAgdmFyIHZhbHVlID0gY2xvbmUuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZSk7XG4gICAgICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuO1xuXG4gICAgICAgICAgY2xvbmUuc3R5bGUuc2V0UHJvcGVydHkoYXR0cmlidXRlLCB2YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGVtYmVkRm9udHMobm9kZSkge1xuICAgIHJldHVybiBmb250RmFjZXMucmVzb2x2ZUFsbCgpXG4gICAgICAudGhlbihmdW5jdGlvbiAoY3NzVGV4dCkge1xuICAgICAgICB2YXIgc3R5bGVOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChzdHlsZU5vZGUpO1xuICAgICAgICBzdHlsZU5vZGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzVGV4dCkpO1xuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5saW5lSW1hZ2VzKG5vZGUpIHtcbiAgICByZXR1cm4gaW1hZ2VzLmlubGluZUFsbChub2RlKVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gbWFrZVN2Z0RhdGFVcmkobm9kZSwgd2lkdGgsIGhlaWdodCkge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobm9kZSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCd4bWxucycsICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sJyk7XG4gICAgICAgIHJldHVybiBuZXcgWE1MU2VyaWFsaXplcigpLnNlcmlhbGl6ZVRvU3RyaW5nKG5vZGUpO1xuICAgICAgfSlcbiAgICAgIC50aGVuKHV0aWwuZXNjYXBlWGh0bWwpXG4gICAgICAudGhlbihmdW5jdGlvbiAoeGh0bWwpIHtcbiAgICAgICAgcmV0dXJuICc8Zm9yZWlnbk9iamVjdCB4PVwiMFwiIHk9XCIwXCIgd2lkdGg9XCIxMDAlXCIgaGVpZ2h0PVwiMTAwJVwiPicgKyB4aHRtbCArICc8L2ZvcmVpZ25PYmplY3Q+JztcbiAgICAgIH0pXG4gICAgICAudGhlbihmdW5jdGlvbiAoZm9yZWlnbk9iamVjdCkge1xuICAgICAgICByZXR1cm4gJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiJyArIHdpZHRoICsgJ1wiIGhlaWdodD1cIicgKyBoZWlnaHQgKyAnXCI+JyArXG4gICAgICAgICAgZm9yZWlnbk9iamVjdCArICc8L3N2Zz4nO1xuICAgICAgfSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uIChzdmcpIHtcbiAgICAgICAgcmV0dXJuICdkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCwnICsgc3ZnO1xuICAgICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBuZXdVdGlsKCkge1xuICAgIHJldHVybiB7XG4gICAgICBlc2NhcGU6IGVzY2FwZSxcbiAgICAgIHBhcnNlRXh0ZW5zaW9uOiBwYXJzZUV4dGVuc2lvbixcbiAgICAgIG1pbWVUeXBlOiBtaW1lVHlwZSxcbiAgICAgIGRhdGFBc1VybDogZGF0YUFzVXJsLFxuICAgICAgaXNEYXRhVXJsOiBpc0RhdGFVcmwsXG4gICAgICBjYW52YXNUb0Jsb2I6IGNhbnZhc1RvQmxvYixcbiAgICAgIHJlc29sdmVVcmw6IHJlc29sdmVVcmwsXG4gICAgICBnZXRBbmRFbmNvZGU6IGdldEFuZEVuY29kZSxcbiAgICAgIHVpZDogdWlkKCksXG4gICAgICBkZWxheTogZGVsYXksXG4gICAgICBhc0FycmF5OiBhc0FycmF5LFxuICAgICAgZXNjYXBlWGh0bWw6IGVzY2FwZVhodG1sLFxuICAgICAgbWFrZUltYWdlOiBtYWtlSW1hZ2UsXG4gICAgICB3aWR0aDogd2lkdGgsXG4gICAgICBoZWlnaHQ6IGhlaWdodFxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBtaW1lcygpIHtcbiAgICAgIC8qXG4gICAgICAgKiBPbmx5IFdPRkYgYW5kIEVPVCBtaW1lIHR5cGVzIGZvciBmb250cyBhcmUgJ3JlYWwnXG4gICAgICAgKiBzZWUgaHR0cDovL3d3dy5pYW5hLm9yZy9hc3NpZ25tZW50cy9tZWRpYS10eXBlcy9tZWRpYS10eXBlcy54aHRtbFxuICAgICAgICovXG4gICAgICB2YXIgV09GRiA9ICdhcHBsaWNhdGlvbi9mb250LXdvZmYnO1xuICAgICAgdmFyIEpQRUcgPSAnaW1hZ2UvanBlZyc7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgICd3b2ZmJzogV09GRixcbiAgICAgICAgJ3dvZmYyJzogV09GRixcbiAgICAgICAgJ3R0Zic6ICdhcHBsaWNhdGlvbi9mb250LXRydWV0eXBlJyxcbiAgICAgICAgJ2VvdCc6ICdhcHBsaWNhdGlvbi92bmQubXMtZm9udG9iamVjdCcsXG4gICAgICAgICdwbmcnOiAnaW1hZ2UvcG5nJyxcbiAgICAgICAgJ2pwZyc6IEpQRUcsXG4gICAgICAgICdqcGVnJzogSlBFRyxcbiAgICAgICAgJ2dpZic6ICdpbWFnZS9naWYnLFxuICAgICAgICAndGlmZic6ICdpbWFnZS90aWZmJyxcbiAgICAgICAgJ3N2Zyc6ICdpbWFnZS9zdmcreG1sJ1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZUV4dGVuc2lvbih1cmwpIHtcbiAgICAgIHZhciBtYXRjaCA9IC9cXC4oW15cXC5cXC9dKj8pJC9nLmV4ZWModXJsKTtcbiAgICAgIGlmIChtYXRjaCkgcmV0dXJuIG1hdGNoWzFdO1xuICAgICAgZWxzZSByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWltZVR5cGUodXJsKSB7XG4gICAgICB2YXIgZXh0ZW5zaW9uID0gcGFyc2VFeHRlbnNpb24odXJsKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgcmV0dXJuIG1pbWVzKClbZXh0ZW5zaW9uXSB8fCAnJztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0RhdGFVcmwodXJsKSB7XG4gICAgICByZXR1cm4gdXJsLnNlYXJjaCgvXihkYXRhOikvKSAhPT0gLTE7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdG9CbG9iKGNhbnZhcywgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgIHZhciBiaW5hcnlTdHJpbmcgPSB3aW5kb3cuYXRvYihjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9qcGVnJywgb3B0aW9ucy5xdWFsaXR5IHx8IDEuMCkuc3BsaXQoJywnKVsxXSk7XG4gICAgICAgIHZhciBsZW5ndGggPSBiaW5hcnlTdHJpbmcubGVuZ3RoO1xuICAgICAgICB2YXIgYmluYXJ5QXJyYXkgPSBuZXcgVWludDhBcnJheShsZW5ndGgpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXG4gICAgICAgICAgYmluYXJ5QXJyYXlbaV0gPSBiaW5hcnlTdHJpbmcuY2hhckNvZGVBdChpKTtcblxuICAgICAgICByZXNvbHZlKG5ldyBCbG9iKFtiaW5hcnlBcnJheV0sIHtcbiAgICAgICAgICB0eXBlOiAnaW1hZ2UvanBlZydcbiAgICAgICAgfSkpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FudmFzVG9CbG9iKGNhbnZhcywgb3B0aW9ucykge1xuICAgICAgaWYgKGNhbnZhcy50b0Jsb2IpXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgIGNhbnZhcy50b0Jsb2IocmVzb2x2ZSwgJ2ltYWdlL2pwZWcnLCBvcHRpb25zLnF1YWxpdHkgfHwgMS4wKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB0b0Jsb2IoY2FudmFzLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNvbHZlVXJsKHVybCwgYmFzZVVybCkge1xuICAgICAgdmFyIGRvYyA9IGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgpO1xuICAgICAgdmFyIGJhc2UgPSBkb2MuY3JlYXRlRWxlbWVudCgnYmFzZScpO1xuICAgICAgZG9jLmhlYWQuYXBwZW5kQ2hpbGQoYmFzZSk7XG4gICAgICB2YXIgYSA9IGRvYy5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICBkb2MuYm9keS5hcHBlbmRDaGlsZChhKTtcbiAgICAgIGJhc2UuaHJlZiA9IGJhc2VVcmw7XG4gICAgICBhLmhyZWYgPSB1cmw7XG4gICAgICByZXR1cm4gYS5ocmVmO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVpZCgpIHtcbiAgICAgIHZhciBpbmRleCA9IDA7XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAndScgKyBmb3VyUmFuZG9tQ2hhcnMoKSArIGluZGV4Kys7XG5cbiAgICAgICAgZnVuY3Rpb24gZm91clJhbmRvbUNoYXJzKCkge1xuICAgICAgICAgIC8qIHNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS82MjQ4NzIyLzI1MTkzNzMgKi9cbiAgICAgICAgICByZXR1cm4gKCcwMDAwJyArIChNYXRoLnJhbmRvbSgpICogTWF0aC5wb3coMzYsIDQpIDw8IDApLnRvU3RyaW5nKDM2KSkuc2xpY2UoLTQpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1ha2VJbWFnZSh1cmkpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmVzb2x2ZShpbWFnZSk7XG4gICAgICAgIH07XG4gICAgICAgIGltYWdlLm9uZXJyb3IgPSByZWplY3Q7XG4gICAgICAgIGltYWdlLnNyYyA9IHVyaTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEFuZEVuY29kZSh1cmwpIHtcbiAgICAgIHZhciBUSU1FT1VUID0gMzAwMDA7XG4gICAgICBpZiAoZG9tdG9pbWFnZS5pbXBsLm9wdGlvbnMuY2FjaGVCdXN0KSB7XG4gICAgICAgIC8vIENhY2hlIGJ5cGFzcyBzbyB3ZSBkb250IGhhdmUgQ09SUyBpc3N1ZXMgd2l0aCBjYWNoZWQgaW1hZ2VzXG4gICAgICAgIC8vIFNvdXJjZTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vZG9jcy9XZWIvQVBJL1hNTEh0dHBSZXF1ZXN0L1VzaW5nX1hNTEh0dHBSZXF1ZXN0I0J5cGFzc2luZ190aGVfY2FjaGVcbiAgICAgICAgdXJsICs9ICgoL1xcPy8pLnRlc3QodXJsKSA/IFwiJlwiIDogXCI/XCIpICsgKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgIHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAgICAgcmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBkb25lO1xuICAgICAgICByZXF1ZXN0Lm9udGltZW91dCA9IHRpbWVvdXQ7XG4gICAgICAgIHJlcXVlc3QucmVzcG9uc2VUeXBlID0gJ2Jsb2InO1xuICAgICAgICByZXF1ZXN0LnRpbWVvdXQgPSBUSU1FT1VUO1xuICAgICAgICByZXF1ZXN0Lm9wZW4oJ0dFVCcsIHVybCwgdHJ1ZSk7XG4gICAgICAgIHJlcXVlc3Quc2VuZCgpO1xuXG4gICAgICAgIHZhciBwbGFjZWhvbGRlcjtcbiAgICAgICAgaWYgKGRvbXRvaW1hZ2UuaW1wbC5vcHRpb25zLmltYWdlUGxhY2Vob2xkZXIpIHtcbiAgICAgICAgICB2YXIgc3BsaXQgPSBkb210b2ltYWdlLmltcGwub3B0aW9ucy5pbWFnZVBsYWNlaG9sZGVyLnNwbGl0KC8sLyk7XG4gICAgICAgICAgaWYgKHNwbGl0ICYmIHNwbGl0WzFdKSB7XG4gICAgICAgICAgICBwbGFjZWhvbGRlciA9IHNwbGl0WzFdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRvbmUoKSB7XG4gICAgICAgICAgaWYgKHJlcXVlc3QucmVhZHlTdGF0ZSAhPT0gNCkgcmV0dXJuO1xuXG4gICAgICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzICE9PSAyMDApIHtcbiAgICAgICAgICAgIGlmIChwbGFjZWhvbGRlcikge1xuICAgICAgICAgICAgICByZXNvbHZlKHBsYWNlaG9sZGVyKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGZhaWwoJ2Nhbm5vdCBmZXRjaCByZXNvdXJjZTogJyArIHVybCArICcsIHN0YXR1czogJyArIHJlcXVlc3Quc3RhdHVzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBlbmNvZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgICBlbmNvZGVyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gZW5jb2Rlci5yZXN1bHQuc3BsaXQoLywvKVsxXTtcbiAgICAgICAgICAgIHJlc29sdmUoY29udGVudCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBlbmNvZGVyLnJlYWRBc0RhdGFVUkwocmVxdWVzdC5yZXNwb25zZSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB0aW1lb3V0KCkge1xuICAgICAgICAgIGlmIChwbGFjZWhvbGRlcikge1xuICAgICAgICAgICAgcmVzb2x2ZShwbGFjZWhvbGRlcik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZhaWwoJ3RpbWVvdXQgb2YgJyArIFRJTUVPVVQgKyAnbXMgb2NjdXJlZCB3aGlsZSBmZXRjaGluZyByZXNvdXJjZTogJyArIHVybCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZmFpbChtZXNzYWdlKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTtcbiAgICAgICAgICByZXNvbHZlKCcnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGF0YUFzVXJsKGNvbnRlbnQsIHR5cGUpIHtcbiAgICAgIHJldHVybiAnZGF0YTonICsgdHlwZSArICc7YmFzZTY0LCcgKyBjb250ZW50O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVzY2FwZShzdHJpbmcpIHtcbiAgICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvKFsuKis/XiR7fSgpfFxcW1xcXVxcL1xcXFxdKS9nLCAnXFxcXCQxJyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVsYXkobXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoYXJnKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmVzb2x2ZShhcmcpO1xuICAgICAgICAgIH0sIG1zKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFzQXJyYXkoYXJyYXlMaWtlKSB7XG4gICAgICB2YXIgYXJyYXkgPSBbXTtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheUxpa2UubGVuZ3RoO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgYXJyYXkucHVzaChhcnJheUxpa2VbaV0pO1xuICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVzY2FwZVhodG1sKHN0cmluZykge1xuICAgICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC8jL2csICclMjMnKS5yZXBsYWNlKC9cXG4vZywgJyUwQScpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHdpZHRoKG5vZGUpIHtcbiAgICAgIHZhciBsZWZ0Qm9yZGVyID0gcHgobm9kZSwgJ2JvcmRlci1sZWZ0LXdpZHRoJyk7XG4gICAgICB2YXIgcmlnaHRCb3JkZXIgPSBweChub2RlLCAnYm9yZGVyLXJpZ2h0LXdpZHRoJyk7XG4gICAgICByZXR1cm4gbm9kZS5zY3JvbGxXaWR0aCArIGxlZnRCb3JkZXIgKyByaWdodEJvcmRlcjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoZWlnaHQobm9kZSkge1xuICAgICAgdmFyIHRvcEJvcmRlciA9IHB4KG5vZGUsICdib3JkZXItdG9wLXdpZHRoJyk7XG4gICAgICB2YXIgYm90dG9tQm9yZGVyID0gcHgobm9kZSwgJ2JvcmRlci1ib3R0b20td2lkdGgnKTtcbiAgICAgIHJldHVybiBub2RlLnNjcm9sbEhlaWdodCArIHRvcEJvcmRlciArIGJvdHRvbUJvcmRlcjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBweChub2RlLCBzdHlsZVByb3BlcnR5KSB7XG4gICAgICB2YXIgdmFsdWUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShub2RlKS5nZXRQcm9wZXJ0eVZhbHVlKHN0eWxlUHJvcGVydHkpO1xuICAgICAgcmV0dXJuIHBhcnNlRmxvYXQodmFsdWUucmVwbGFjZSgncHgnLCAnJykpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG5ld0lubGluZXIoKSB7XG4gICAgdmFyIFVSTF9SRUdFWCA9IC91cmxcXChbJ1wiXT8oW14nXCJdKz8pWydcIl0/XFwpL2c7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaW5saW5lQWxsOiBpbmxpbmVBbGwsXG4gICAgICBzaG91bGRQcm9jZXNzOiBzaG91bGRQcm9jZXNzLFxuICAgICAgaW1wbDoge1xuICAgICAgICByZWFkVXJsczogcmVhZFVybHMsXG4gICAgICAgIGlubGluZTogaW5saW5lXG4gICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHNob3VsZFByb2Nlc3Moc3RyaW5nKSB7XG4gICAgICByZXR1cm4gc3RyaW5nLnNlYXJjaChVUkxfUkVHRVgpICE9PSAtMTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZWFkVXJscyhzdHJpbmcpIHtcbiAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgIHZhciBtYXRjaDtcbiAgICAgIHdoaWxlICgobWF0Y2ggPSBVUkxfUkVHRVguZXhlYyhzdHJpbmcpKSAhPT0gbnVsbCkge1xuICAgICAgICByZXN1bHQucHVzaChtYXRjaFsxXSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0LmZpbHRlcihmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgIHJldHVybiAhdXRpbC5pc0RhdGFVcmwodXJsKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlubGluZShzdHJpbmcsIHVybCwgYmFzZVVybCwgZ2V0KSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHVybClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHVybCkge1xuICAgICAgICAgIHJldHVybiBiYXNlVXJsID8gdXRpbC5yZXNvbHZlVXJsKHVybCwgYmFzZVVybCkgOiB1cmw7XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKGdldCB8fCB1dGlsLmdldEFuZEVuY29kZSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICByZXR1cm4gdXRpbC5kYXRhQXNVcmwoZGF0YSwgdXRpbC5taW1lVHlwZSh1cmwpKTtcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGFVcmwpIHtcbiAgICAgICAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UodXJsQXNSZWdleCh1cmwpLCAnJDEnICsgZGF0YVVybCArICckMycpO1xuICAgICAgICB9KTtcblxuICAgICAgZnVuY3Rpb24gdXJsQXNSZWdleCh1cmwpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoJyh1cmxcXFxcKFtcXCdcIl0/KSgnICsgdXRpbC5lc2NhcGUodXJsKSArICcpKFtcXCdcIl0/XFxcXCkpJywgJ2cnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbmxpbmVBbGwoc3RyaW5nLCBiYXNlVXJsLCBnZXQpIHtcbiAgICAgIGlmIChub3RoaW5nVG9JbmxpbmUoKSkgcmV0dXJuIFByb21pc2UucmVzb2x2ZShzdHJpbmcpO1xuXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHN0cmluZylcbiAgICAgICAgLnRoZW4ocmVhZFVybHMpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uICh1cmxzKSB7XG4gICAgICAgICAgdmFyIGRvbmUgPSBQcm9taXNlLnJlc29sdmUoc3RyaW5nKTtcbiAgICAgICAgICB1cmxzLmZvckVhY2goZnVuY3Rpb24gKHVybCkge1xuICAgICAgICAgICAgZG9uZSA9IGRvbmUudGhlbihmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgICAgICAgICAgIHJldHVybiBpbmxpbmUoc3RyaW5nLCB1cmwsIGJhc2VVcmwsIGdldCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gZG9uZTtcbiAgICAgICAgfSk7XG5cbiAgICAgIGZ1bmN0aW9uIG5vdGhpbmdUb0lubGluZSgpIHtcbiAgICAgICAgcmV0dXJuICFzaG91bGRQcm9jZXNzKHN0cmluZyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbmV3Rm9udEZhY2VzKCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXNvbHZlQWxsOiByZXNvbHZlQWxsLFxuICAgICAgaW1wbDoge1xuICAgICAgICByZWFkQWxsOiByZWFkQWxsXG4gICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHJlc29sdmVBbGwoKSB7XG4gICAgICByZXR1cm4gcmVhZEFsbChkb2N1bWVudClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHdlYkZvbnRzKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFxuICAgICAgICAgICAgd2ViRm9udHMubWFwKGZ1bmN0aW9uICh3ZWJGb250KSB7XG4gICAgICAgICAgICAgIHJldHVybiB3ZWJGb250LnJlc29sdmUoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKTtcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGNzc1N0cmluZ3MpIHtcbiAgICAgICAgICByZXR1cm4gY3NzU3RyaW5ncy5qb2luKCdcXG4nKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVhZEFsbCgpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodXRpbC5hc0FycmF5KGRvY3VtZW50LnN0eWxlU2hlZXRzKSlcbiAgICAgICAgLnRoZW4oZ2V0Q3NzUnVsZXMpXG4gICAgICAgIC50aGVuKHNlbGVjdFdlYkZvbnRSdWxlcylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJ1bGVzKSB7XG4gICAgICAgICAgcmV0dXJuIHJ1bGVzLm1hcChuZXdXZWJGb250KTtcbiAgICAgICAgfSk7XG5cbiAgICAgIGZ1bmN0aW9uIHNlbGVjdFdlYkZvbnRSdWxlcyhjc3NSdWxlcykge1xuICAgICAgICByZXR1cm4gY3NzUnVsZXNcbiAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChydWxlKSB7XG4gICAgICAgICAgICByZXR1cm4gcnVsZS50eXBlID09PSBDU1NSdWxlLkZPTlRfRkFDRV9SVUxFO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAocnVsZSkge1xuICAgICAgICAgICAgcmV0dXJuIGlubGluZXIuc2hvdWxkUHJvY2VzcyhydWxlLnN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ3NyYycpKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZ2V0Q3NzUnVsZXMoc3R5bGVTaGVldHMpIHtcbiAgICAgICAgdmFyIGNzc1J1bGVzID0gW107XG4gICAgICAgIHN0eWxlU2hlZXRzLmZvckVhY2goZnVuY3Rpb24gKHNoZWV0KSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHV0aWwuYXNBcnJheShzaGVldC5jc3NSdWxlcyB8fCBbXSkuZm9yRWFjaChjc3NSdWxlcy5wdXNoLmJpbmQoY3NzUnVsZXMpKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3Igd2hpbGUgcmVhZGluZyBDU1MgcnVsZXMgZnJvbSAnICsgc2hlZXQuaHJlZiwgZS50b1N0cmluZygpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gY3NzUnVsZXM7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG5ld1dlYkZvbnQod2ViRm9udFJ1bGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICByZXNvbHZlOiBmdW5jdGlvbiByZXNvbHZlKCkge1xuICAgICAgICAgICAgdmFyIGJhc2VVcmwgPSAod2ViRm9udFJ1bGUucGFyZW50U3R5bGVTaGVldCB8fCB7fSkuaHJlZjtcbiAgICAgICAgICAgIHJldHVybiBpbmxpbmVyLmlubGluZUFsbCh3ZWJGb250UnVsZS5jc3NUZXh0LCBiYXNlVXJsKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNyYzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHdlYkZvbnRSdWxlLnN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ3NyYycpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBuZXdJbWFnZXMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlubGluZUFsbDogaW5saW5lQWxsLFxuICAgICAgaW1wbDoge1xuICAgICAgICBuZXdJbWFnZTogbmV3SW1hZ2VcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gbmV3SW1hZ2UoZWxlbWVudCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaW5saW5lOiBpbmxpbmVcbiAgICAgIH07XG5cbiAgICAgIGZ1bmN0aW9uIGlubGluZShnZXQpIHtcbiAgICAgICAgaWYgKHV0aWwuaXNEYXRhVXJsKGVsZW1lbnQuc3JjKSkgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZWxlbWVudC5zcmMpXG4gICAgICAgICAgLnRoZW4oZ2V0IHx8IHV0aWwuZ2V0QW5kRW5jb2RlKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gdXRpbC5kYXRhQXNVcmwoZGF0YSwgdXRpbC5taW1lVHlwZShlbGVtZW50LnNyYykpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGFVcmwpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgIGVsZW1lbnQub25sb2FkID0gcmVzb2x2ZTtcbiAgICAgICAgICAgICAgZWxlbWVudC5vbmVycm9yID0gcmVqZWN0O1xuICAgICAgICAgICAgICBlbGVtZW50LnNyYyA9IGRhdGFVcmw7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbmxpbmVBbGwobm9kZSkge1xuICAgICAgaWYgKCEobm9kZSBpbnN0YW5jZW9mIEVsZW1lbnQpKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5vZGUpO1xuXG4gICAgICByZXR1cm4gaW5saW5lQmFja2dyb3VuZChub2RlKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50KVxuICAgICAgICAgICAgcmV0dXJuIG5ld0ltYWdlKG5vZGUpLmlubGluZSgpO1xuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChcbiAgICAgICAgICAgICAgdXRpbC5hc0FycmF5KG5vZGUuY2hpbGROb2RlcykubWFwKGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbmxpbmVBbGwoY2hpbGQpO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIGZ1bmN0aW9uIGlubGluZUJhY2tncm91bmQobm9kZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHZhciBiYWNrZ3JvdW5kID0gbm9kZS5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdiYWNrZ3JvdW5kJyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5vZGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFiYWNrZ3JvdW5kKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5vZGUpO1xuXG4gICAgICAgIHJldHVybiBpbmxpbmVyLmlubGluZUFsbChiYWNrZ3JvdW5kKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChpbmxpbmVkKSB7XG4gICAgICAgICAgICBub2RlLnN0eWxlLnNldFByb3BlcnR5KFxuICAgICAgICAgICAgICAnYmFja2dyb3VuZCcsXG4gICAgICAgICAgICAgIGlubGluZWQsXG4gICAgICAgICAgICAgIG5vZGUuc3R5bGUuZ2V0UHJvcGVydHlQcmlvcml0eSgnYmFja2dyb3VuZCcpXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KSh0aGlzKTtcbiIsICJpbXBvcnQgRXhwb3J0SW1hZ2VQbHVnaW4gZnJvbSAnLi9FeHBvcnRJbWFnZVBsdWdpbic7XG5cbmV4cG9ydCBkZWZhdWx0IEV4cG9ydEltYWdlUGx1Z2luO1xuIiwgImltcG9ydCB7IEVkaXRvciwgTWFya2Rvd25WaWV3LCBNYXJrZG93blByZXZpZXdWaWV3LCBNYXJrZG93blJlbmRlcmVyLCBOb3RpY2UsIFBsdWdpbiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IHNhdmVBcyB9IGZyb20gJ2ZpbGUtc2F2ZXInO1xuaW1wb3J0IHsgRXhwb3J0SW1hZ2VTZXR0aW5nVGFiIH0gZnJvbSAnLi9FeHBvcnRJbWFnZVNldHRpbmdUYWInO1xuaW1wb3J0IHsgREVGQVVMVF9TRVRUSU5HUyB9IGZyb20gXCIuL2NvbnN0ZW50c1wiO1xuaW1wb3J0IHsgY2xvbmVOb2RlLCB0b0Jsb2JXaXRoQ2xvbmVkRG9tIH0gZnJvbSAnZG9tLXRvLWltYWdlJztcblxuZnVuY3Rpb24gZGVsYXkobXM6IG51bWJlcik6IFByb21pc2U8dW5kZWZpbmVkPiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgcmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgIH0sIG1zKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEV4cG9ydEltYWdlUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcbiAgc2V0dGluZ3M6IEV4cG9ydEltYWdlU2V0dGluZ3M7XG5cbiAgYXN5bmMgb25sb2FkKCkge1xuICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cbiAgICAvLyBUaGlzIGFkZHMgYSBjb21wbGV4IGNvbW1hbmQgdGhhdCBjYW4gY2hlY2sgd2hldGhlciB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgYXBwIGFsbG93cyBleGVjdXRpb24gb2YgdGhlIGNvbW1hbmRcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdleHBvcnQtdG8taW1hZ2UtemgnLFxuICAgICAgbmFtZTogJ0V4cG9ydCB0byBpbWFnZScsXG4gICAgICBjaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4pID0+IHtcbiAgICAgICAgLy8gQ29uZGl0aW9ucyB0byBjaGVja1xuICAgICAgICBjb25zdCBtYXJrZG93blZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgICBpZiAobWFya2Rvd25WaWV3Py5nZXRNb2RlKCkgPT09ICdwcmV2aWV3Jykge1xuICAgICAgICAgIC8vIElmIGNoZWNraW5nIGlzIHRydWUsIHdlJ3JlIHNpbXBseSBcImNoZWNraW5nXCIgaWYgdGhlIGNvbW1hbmQgY2FuIGJlIHJ1bi5cbiAgICAgICAgICAvLyBJZiBjaGVja2luZyBpcyBmYWxzZSwgdGhlbiB3ZSB3YW50IHRvIGFjdHVhbGx5IHBlcmZvcm0gdGhlIG9wZXJhdGlvbi5cbiAgICAgICAgICBpZiAoIWNoZWNraW5nKSB7XG4gICAgICAgICAgICAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBlbCA9IG1hcmtkb3duVmlldy5jb250ZW50RWwuZmluZCgnLm1hcmtkb3duLXByZXZpZXctc2VjdGlvbicpO1xuICAgICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBlbC5wYXJlbnRFbGVtZW50ITtcbiAgICAgICAgICAgICAgY29uc3Qgc2Nyb2xsQ2FjaGUgPSBjb250YWluZXIuc2Nyb2xsVG9wO1xuICAgICAgICAgICAgICBjb250YWluZXIuc2Nyb2xsVG8oMCwgMCk7XG4gICAgICAgICAgICAgIGF3YWl0IGRlbGF5KDQwKTtcbiAgICAgICAgICAgICAgY29uc3QgdG90YWxIZWlnaHQgPSBlbC5jbGllbnRIZWlnaHQ7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzY29sbEhlaWdodDonLCB0b3RhbEhlaWdodCk7XG4gICAgICAgICAgICAgIGNvbnN0IHNjcmVlbkhlaWdodCA9IG1hcmtkb3duVmlldy5jb250ZW50RWwuY2xpZW50SGVpZ2h0O1xuICAgICAgICAgICAgICBsZXQgc2Nyb2xsSW5kZXggPSAwO1xuICAgICAgICAgICAgICBsZXQgaGVpZ2h0ID0gZWwuY2xpZW50SGVpZ2h0IC0gcGFyc2VGbG9hdChlbC5zdHlsZS5wYWRkaW5nQm90dG9tKSArIDQwO1xuICAgICAgICAgICAgICBlbC5hZGRDbGFzcygnZXB4b3J0LWltYWdlLWZvcmNlLW5vLW1hcmdpbicpO1xuICAgICAgICAgICAgICBjb25zdCBjbG9uZSA9IGF3YWl0IGNsb25lTm9kZShlbCk7XG4gICAgICAgICAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoYXN5bmMgcmVjb3JkcyA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgciBvZiByZWNvcmRzKSB7XG4gICAgICAgICAgICAgICAgICBmb3IgKGxldCBub2RlIG9mIEFycmF5LmZyb20oci5hZGRlZE5vZGVzKSkge1xuICAgICAgICAgICAgICAgICAgICBjbG9uZS5hcHBlbmQoYXdhaXQgY2xvbmVOb2RlKG5vZGUgYXMgSFRNTEVsZW1lbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1nID0gKG5vZGUgYXMgSFRNTEVsZW1lbnQpLmZpbmQoJ2ltZycpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW1nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ICs9IGltZy5jbGllbnRIZWlnaHQgLyAyO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGggPSAobm9kZSBhcyBIVE1MRWxlbWVudCkuZmluZCgnLm1hdGgtYmxvY2snKTtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ICs9IChub2RlIGFzIEhUTUxFbGVtZW50KS5jbGllbnRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShlbCwge1xuICAgICAgICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgd2hpbGUgKHNjcm9sbEluZGV4IDw9IHRvdGFsSGVpZ2h0IC0gc2NyZWVuSGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsSW5kZXggKz0gc2NyZWVuSGVpZ2h0O1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zY3JvbGxUbygwLCBzY3JvbGxJbmRleCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgZGVsYXkoNDApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgICAgY29udGFpbmVyLnNjcm9sbFRvKDAsIHNjcm9sbENhY2hlKTtcblxuICAgICAgICAgICAgICBlbC5yZW1vdmVDbGFzcygnZXB4b3J0LWltYWdlLWZvcmNlLW5vLW1hcmdpbicpO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlbC5jbGllbnRXaWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHRvQmxvYldpdGhDbG9uZWREb20oZWwsIGNsb25lLCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IGVsLmNsaWVudFdpZHRoICogMixcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGhlaWdodCAqIDIsXG4gICAgICAgICAgICAgICAgYmdjb2xvcjogd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwuY2xvc2VzdCgnLnZpZXctY29udGVudCcpISkuYmFja2dyb3VuZENvbG9yLFxuICAgICAgICAgICAgICAgIHF1YWxpdHk6IDAuOSxcbiAgICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAnc2NhbGUoMiknLFxuICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtT3JpZ2luOiAndG9wIGxlZnQnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgc2F2ZUFzKGJsb2IsIGAke21hcmtkb3duVmlldy5nZXREaXNwbGF5VGV4dCgpLnJlcGxhY2UoL1xccysvZywgJ18nKX0uanBnYCk7XG4gICAgICAgICAgICB9KSgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFRoaXMgY29tbWFuZCB3aWxsIG9ubHkgc2hvdyB1cCBpbiBDb21tYW5kIFBhbGV0dGUgd2hlbiB0aGUgY2hlY2sgZnVuY3Rpb24gcmV0dXJucyB0cnVlXG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuXG4gIH1cblxuICBvbnVubG9hZCgpIHtcbiAgfVxuXG4gIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcbiAgfVxuXG4gIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICB9XG59XG4iLCAiLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L3ByZWZlci1kZWZhdWx0LWV4cG9ydCAqL1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IEV4cG9ydElt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
