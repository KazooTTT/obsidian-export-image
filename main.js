/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target, mod));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// node_modules/file-saver/dist/FileSaver.min.js
var require_FileSaver_min = __commonJS({
  "node_modules/file-saver/dist/FileSaver.min.js"(exports, module2) {
    (function(a, b) {
      if (typeof define == "function" && define.amd)
        define([], b);
      else if (typeof exports != "undefined")
        b();
      else {
        b(), a.FileSaver = { exports: {} }.exports;
      }
    })(exports, function() {
      "use strict";
      function b(a2, b2) {
        return typeof b2 == "undefined" ? b2 = { autoBom: false } : typeof b2 != "object" && (console.warn("Deprecated: Expected third argument to be a object"), b2 = { autoBom: !b2 }), b2.autoBom && /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a2.type) ? new Blob(["\uFEFF", a2], { type: a2.type }) : a2;
      }
      function c(a2, b2, c2) {
        var d2 = new XMLHttpRequest();
        d2.open("GET", a2), d2.responseType = "blob", d2.onload = function() {
          g(d2.response, b2, c2);
        }, d2.onerror = function() {
          console.error("could not download file");
        }, d2.send();
      }
      function d(a2) {
        var b2 = new XMLHttpRequest();
        b2.open("HEAD", a2, false);
        try {
          b2.send();
        } catch (a3) {
        }
        return 200 <= b2.status && 299 >= b2.status;
      }
      function e(a2) {
        try {
          a2.dispatchEvent(new MouseEvent("click"));
        } catch (c2) {
          var b2 = document.createEvent("MouseEvents");
          b2.initMouseEvent("click", true, true, window, 0, 0, 0, 80, 20, false, false, false, false, 0, null), a2.dispatchEvent(b2);
        }
      }
      var f = typeof window == "object" && window.window === window ? window : typeof self == "object" && self.self === self ? self : typeof global == "object" && global.global === global ? global : void 0, a = f.navigator && /Macintosh/.test(navigator.userAgent) && /AppleWebKit/.test(navigator.userAgent) && !/Safari/.test(navigator.userAgent), g = f.saveAs || (typeof window != "object" || window !== f ? function() {
      } : "download" in HTMLAnchorElement.prototype && !a ? function(b2, g2, h) {
        var i = f.URL || f.webkitURL, j = document.createElement("a");
        g2 = g2 || b2.name || "download", j.download = g2, j.rel = "noopener", typeof b2 == "string" ? (j.href = b2, j.origin === location.origin ? e(j) : d(j.href) ? c(b2, g2, h) : e(j, j.target = "_blank")) : (j.href = i.createObjectURL(b2), setTimeout(function() {
          i.revokeObjectURL(j.href);
        }, 4e4), setTimeout(function() {
          e(j);
        }, 0));
      } : "msSaveOrOpenBlob" in navigator ? function(f2, g2, h) {
        if (g2 = g2 || f2.name || "download", typeof f2 != "string")
          navigator.msSaveOrOpenBlob(b(f2, h), g2);
        else if (d(f2))
          c(f2, g2, h);
        else {
          var i = document.createElement("a");
          i.href = f2, i.target = "_blank", setTimeout(function() {
            e(i);
          });
        }
      } : function(b2, d2, e2, g2) {
        if (g2 = g2 || open("", "_blank"), g2 && (g2.document.title = g2.document.body.innerText = "downloading..."), typeof b2 == "string")
          return c(b2, d2, e2);
        var h = b2.type === "application/octet-stream", i = /constructor/i.test(f.HTMLElement) || f.safari, j = /CriOS\/[\d]+/.test(navigator.userAgent);
        if ((j || h && i || a) && typeof FileReader != "undefined") {
          var k = new FileReader();
          k.onloadend = function() {
            var a2 = k.result;
            a2 = j ? a2 : a2.replace(/^data:[^;]*;/, "data:attachment/file;"), g2 ? g2.location.href = a2 : location = a2, g2 = null;
          }, k.readAsDataURL(b2);
        } else {
          var l = f.URL || f.webkitURL, m = l.createObjectURL(b2);
          g2 ? g2.location = m : location.href = m, g2 = null, setTimeout(function() {
            l.revokeObjectURL(m);
          }, 4e4);
        }
      });
      f.saveAs = g.saveAs = g, typeof module2 != "undefined" && (module2.exports = g);
    });
  }
});

// dom-to-image.js
var require_dom_to_image = __commonJS({
  "dom-to-image.js"(exports, module2) {
    (function(global2) {
      "use strict";
      var util = newUtil();
      var inliner = newInliner();
      var fontFaces = newFontFaces();
      var images = newImages();
      var defaultOptions = {
        imagePlaceholder: void 0,
        cacheBust: false
      };
      var domtoimage = {
        toSvg,
        toPng,
        toJpeg,
        toBlob,
        toPixelData,
        toBlobWithClonedDom: toBlobWithClonedDom2,
        cloneNode: cloneNode2,
        impl: {
          fontFaces,
          images,
          util,
          inliner,
          options: {}
        }
      };
      if (typeof module2 !== "undefined")
        module2.exports = domtoimage;
      else
        global2.domtoimage = domtoimage;
      function toSvg(node, options) {
        options = options || {};
        copyOptions(options);
        return Promise.resolve(node).then(function(node2) {
          return cloneNode2(node2, options.filter, true);
        }).then(embedFonts).then(inlineImages).then(applyOptions).then(function(clone) {
          return makeSvgDataUri(clone, options.width || util.width(node), options.height || util.height(node));
        });
        function applyOptions(clone) {
          if (options.bgcolor)
            clone.style.backgroundColor = options.bgcolor;
          if (options.width)
            clone.style.width = options.width + "px";
          if (options.height)
            clone.style.height = options.height + "px";
          if (options.style)
            Object.keys(options.style).forEach(function(property) {
              clone.style[property] = options.style[property];
            });
          return clone;
        }
      }
      function toSvgWithClonedDom(node, clone, options) {
        options = options || {};
        copyOptions(options);
        return Promise.resolve(clone).then(embedFonts).then(inlineImages).then(applyOptions).then(function(clone2) {
          return makeSvgDataUri(clone2, options.width * 2, options.height * 2);
        });
        function applyOptions(clone2) {
          if (options.bgcolor)
            clone2.style.backgroundColor = options.bgcolor;
          if (options.width)
            clone2.style.width = options.width + "px";
          if (options.height)
            clone2.style.height = options.height + "px";
          if (options.style)
            Object.keys(options.style).forEach(function(property) {
              clone2.style[property] = options.style[property];
            });
          return clone2;
        }
      }
      function toPixelData(node, options) {
        return draw(node, options || {}).then(function(canvas) {
          return canvas.getContext("2d").getImageData(0, 0, util.width(node), util.height(node)).data;
        });
      }
      function toPng(node, options) {
        return draw(node, options || {}).then(function(canvas) {
          return canvas.toDataURL();
        });
      }
      function toJpeg(node, options) {
        options = options || {};
        return draw(node, options).then(function(canvas) {
          return canvas.toDataURL("image/jpeg", options.quality || 1);
        });
      }
      function toBlob(node, options) {
        return draw(node, options || {}).then(function(canvas) {
          return util.canvasToBlob(canvas, options);
        });
      }
      function toBlobWithClonedDom2(node, clone, options) {
        return drawWithClonedDom(node, clone, options || {}).then(function(canvas) {
          return util.canvasToBlob(canvas, options);
        });
      }
      function copyOptions(options) {
        if (typeof options.imagePlaceholder === "undefined") {
          domtoimage.impl.options.imagePlaceholder = defaultOptions.imagePlaceholder;
        } else {
          domtoimage.impl.options.imagePlaceholder = options.imagePlaceholder;
        }
        if (typeof options.cacheBust === "undefined") {
          domtoimage.impl.options.cacheBust = defaultOptions.cacheBust;
        } else {
          domtoimage.impl.options.cacheBust = options.cacheBust;
        }
      }
      function draw(domNode, options) {
        return toSvg(domNode, options).then(util.makeImage).then(util.delay(100)).then(function(image) {
          var canvas = newCanvas(domNode);
          canvas.getContext("2d").drawImage(image, 0, 0);
          return canvas;
        });
        function newCanvas(domNode2) {
          var canvas = document.createElement("canvas");
          canvas.width = options.width || util.width(domNode2);
          canvas.height = options.height || util.height(domNode2);
          if (options.bgcolor) {
            var ctx = canvas.getContext("2d");
            ctx.fillStyle = options.bgcolor;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
          }
          return canvas;
        }
      }
      function drawWithClonedDom(domNode, clone, options) {
        return toSvgWithClonedDom(domNode, clone, options).then(util.makeImage).then(util.delay(100)).then(function(image) {
          var canvas = newCanvas(domNode);
          canvas.getContext("2d").drawImage(image, 0, 0, options.width, options.height);
          return canvas;
        });
        function newCanvas(domNode2) {
          var canvas = document.createElement("canvas");
          canvas.width = options.width / 2;
          canvas.height = options.height / 2;
          if (options.bgcolor) {
            var ctx = canvas.getContext("2d");
            ctx.fillStyle = options.bgcolor;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
          }
          return canvas;
        }
      }
      function cloneNode2(node, filter, root) {
        if (!root && filter && !filter(node))
          return Promise.resolve();
        return Promise.resolve(node).then(makeNodeCopy).then(function(clone) {
          return cloneChildren(node, clone, filter);
        }).then(function(clone) {
          return processClone(node, clone);
        });
        function makeNodeCopy(node2) {
          if (node2 instanceof HTMLCanvasElement)
            return util.makeImage(node2.toDataURL());
          return node2.cloneNode(false);
        }
        function cloneChildren(original, clone, filter2) {
          var children = original.childNodes;
          if (children.length === 0)
            return Promise.resolve(clone);
          return cloneChildrenInOrder(clone, util.asArray(children), filter2).then(function() {
            return clone;
          });
          function cloneChildrenInOrder(parent, children2, filter3) {
            var done = Promise.resolve();
            children2.forEach(function(child) {
              done = done.then(function() {
                return cloneNode2(child, filter3);
              }).then(function(childClone) {
                if (childClone)
                  parent.appendChild(childClone);
              });
            });
            return done;
          }
        }
        function processClone(original, clone) {
          if (!(clone instanceof Element))
            return clone;
          return Promise.resolve().then(cloneStyle).then(clonePseudoElements).then(copyUserInput).then(fixSvg).then(function() {
            return clone;
          });
          function cloneStyle() {
            copyStyle(window.getComputedStyle(original), clone.style);
            function copyStyle(source, target) {
              if (source.cssText)
                target.cssText = source.cssText;
              else
                copyProperties(source, target);
              function copyProperties(source2, target2) {
                util.asArray(source2).forEach(function(name) {
                  target2.setProperty(name, source2.getPropertyValue(name), source2.getPropertyPriority(name));
                });
              }
            }
          }
          function clonePseudoElements() {
            [":before", ":after"].forEach(function(element) {
              clonePseudoElement(element);
            });
            function clonePseudoElement(element) {
              var style = window.getComputedStyle(original, element);
              var content = style.getPropertyValue("content");
              if (content === "" || content === "none")
                return;
              var className = util.uid();
              clone.className = clone.className + " " + className;
              var styleElement = document.createElement("style");
              styleElement.appendChild(formatPseudoElementStyle(className, element, style));
              clone.appendChild(styleElement);
              function formatPseudoElementStyle(className2, element2, style2) {
                var selector = "." + className2 + ":" + element2;
                var cssText = style2.cssText ? formatCssText(style2) : formatCssProperties(style2);
                return document.createTextNode(selector + "{" + cssText + "}");
                function formatCssText(style3) {
                  var content2 = style3.getPropertyValue("content");
                  return style3.cssText + " content: " + content2 + ";";
                }
                function formatCssProperties(style3) {
                  return util.asArray(style3).map(formatProperty).join("; ") + ";";
                  function formatProperty(name) {
                    return name + ": " + style3.getPropertyValue(name) + (style3.getPropertyPriority(name) ? " !important" : "");
                  }
                }
              }
            }
          }
          function copyUserInput() {
            if (original instanceof HTMLTextAreaElement)
              clone.innerHTML = original.value;
            if (original instanceof HTMLInputElement)
              clone.setAttribute("value", original.value);
          }
          function fixSvg() {
            if (!(clone instanceof SVGElement))
              return;
            clone.setAttribute("xmlns", "http://www.w3.org/2000/svg");
            if (!(clone instanceof SVGRectElement))
              return;
            ["width", "height"].forEach(function(attribute) {
              var value = clone.getAttribute(attribute);
              if (!value)
                return;
              clone.style.setProperty(attribute, value);
            });
          }
        }
      }
      function embedFonts(node) {
        return fontFaces.resolveAll().then(function(cssText) {
          var styleNode = document.createElement("style");
          node.appendChild(styleNode);
          styleNode.appendChild(document.createTextNode(cssText));
          return node;
        });
      }
      function inlineImages(node) {
        return images.inlineAll(node).then(function() {
          return node;
        });
      }
      function makeSvgDataUri(node, width, height) {
        return Promise.resolve(node).then(function(node2) {
          node2.setAttribute("xmlns", "http://www.w3.org/1999/xhtml");
          return new XMLSerializer().serializeToString(node2);
        }).then(util.escapeXhtml).then(function(xhtml) {
          return '<foreignObject x="0" y="0" width="100%" height="100%">' + xhtml + "</foreignObject>";
        }).then(function(foreignObject) {
          return '<svg xmlns="http://www.w3.org/2000/svg" width="' + width + '" height="' + height + '">' + foreignObject + "</svg>";
        }).then(function(svg) {
          return "data:image/svg+xml;charset=utf-8," + svg;
        });
      }
      function newUtil() {
        return {
          escape,
          parseExtension,
          mimeType,
          dataAsUrl,
          isDataUrl,
          canvasToBlob,
          resolveUrl,
          getAndEncode,
          uid: uid(),
          delay: delay2,
          asArray,
          escapeXhtml,
          makeImage,
          width,
          height
        };
        function mimes() {
          var WOFF = "application/font-woff";
          var JPEG = "image/jpeg";
          return {
            "woff": WOFF,
            "woff2": WOFF,
            "ttf": "application/font-truetype",
            "eot": "application/vnd.ms-fontobject",
            "png": "image/png",
            "jpg": JPEG,
            "jpeg": JPEG,
            "gif": "image/gif",
            "tiff": "image/tiff",
            "svg": "image/svg+xml"
          };
        }
        function parseExtension(url) {
          var match = /\.([^\.\/]*?)$/g.exec(url);
          if (match)
            return match[1];
          else
            return "";
        }
        function mimeType(url) {
          var extension = parseExtension(url).toLowerCase();
          return mimes()[extension] || "";
        }
        function isDataUrl(url) {
          return url.search(/^(data:)/) !== -1;
        }
        function toBlob2(canvas, options) {
          return new Promise(function(resolve) {
            var binaryString = window.atob(canvas.toDataURL("image/jpeg", options.quality || 1).split(",")[1]);
            var length = binaryString.length;
            var binaryArray = new Uint8Array(length);
            for (var i = 0; i < length; i++)
              binaryArray[i] = binaryString.charCodeAt(i);
            resolve(new Blob([binaryArray], {
              type: "image/jpeg"
            }));
          });
        }
        function canvasToBlob(canvas, options) {
          if (canvas.toBlob)
            return new Promise(function(resolve) {
              canvas.toBlob(resolve, "image/jpeg", options.quality || 1);
            });
          return toBlob2(canvas, options);
        }
        function resolveUrl(url, baseUrl) {
          var doc = document.implementation.createHTMLDocument();
          var base = doc.createElement("base");
          doc.head.appendChild(base);
          var a = doc.createElement("a");
          doc.body.appendChild(a);
          base.href = baseUrl;
          a.href = url;
          return a.href;
        }
        function uid() {
          var index = 0;
          return function() {
            return "u" + fourRandomChars() + index++;
            function fourRandomChars() {
              return ("0000" + (Math.random() * Math.pow(36, 4) << 0).toString(36)).slice(-4);
            }
          };
        }
        function makeImage(uri) {
          return new Promise(function(resolve, reject) {
            var image = new Image();
            image.onload = function() {
              resolve(image);
            };
            image.onerror = reject;
            image.src = uri;
          });
        }
        function getAndEncode(url) {
          var TIMEOUT = 3e4;
          if (domtoimage.impl.options.cacheBust) {
            url += (/\?/.test(url) ? "&" : "?") + new Date().getTime();
          }
          return new Promise(function(resolve) {
            var request = new XMLHttpRequest();
            request.onreadystatechange = done;
            request.ontimeout = timeout;
            request.responseType = "blob";
            request.timeout = TIMEOUT;
            request.open("GET", url, true);
            request.send();
            var placeholder;
            if (domtoimage.impl.options.imagePlaceholder) {
              var split = domtoimage.impl.options.imagePlaceholder.split(/,/);
              if (split && split[1]) {
                placeholder = split[1];
              }
            }
            function done() {
              if (request.readyState !== 4)
                return;
              if (request.status !== 200) {
                if (placeholder) {
                  resolve(placeholder);
                } else {
                  fail("cannot fetch resource: " + url + ", status: " + request.status);
                }
                return;
              }
              var encoder = new FileReader();
              encoder.onloadend = function() {
                var content = encoder.result.split(/,/)[1];
                resolve(content);
              };
              encoder.readAsDataURL(request.response);
            }
            function timeout() {
              if (placeholder) {
                resolve(placeholder);
              } else {
                fail("timeout of " + TIMEOUT + "ms occured while fetching resource: " + url);
              }
            }
            function fail(message) {
              console.error(message);
              resolve("");
            }
          });
        }
        function dataAsUrl(content, type) {
          return "data:" + type + ";base64," + content;
        }
        function escape(string) {
          return string.replace(/([.*+?^${}()|\[\]\/\\])/g, "\\$1");
        }
        function delay2(ms) {
          return function(arg) {
            return new Promise(function(resolve) {
              setTimeout(function() {
                resolve(arg);
              }, ms);
            });
          };
        }
        function asArray(arrayLike) {
          var array = [];
          var length = arrayLike.length;
          for (var i = 0; i < length; i++)
            array.push(arrayLike[i]);
          return array;
        }
        function escapeXhtml(string) {
          return string.replace(/#/g, "%23").replace(/\n/g, "%0A");
        }
        function width(node) {
          var leftBorder = px(node, "border-left-width");
          var rightBorder = px(node, "border-right-width");
          return node.scrollWidth + leftBorder + rightBorder;
        }
        function height(node) {
          var topBorder = px(node, "border-top-width");
          var bottomBorder = px(node, "border-bottom-width");
          return node.scrollHeight + topBorder + bottomBorder;
        }
        function px(node, styleProperty) {
          var value = window.getComputedStyle(node).getPropertyValue(styleProperty);
          return parseFloat(value.replace("px", ""));
        }
      }
      function newInliner() {
        var URL_REGEX = /url\(['"]?([^'"]+?)['"]?\)/g;
        return {
          inlineAll,
          shouldProcess,
          impl: {
            readUrls,
            inline
          }
        };
        function shouldProcess(string) {
          return string.search(URL_REGEX) !== -1;
        }
        function readUrls(string) {
          var result = [];
          var match;
          while ((match = URL_REGEX.exec(string)) !== null) {
            result.push(match[1]);
          }
          return result.filter(function(url) {
            return !util.isDataUrl(url);
          });
        }
        function inline(string, url, baseUrl, get) {
          return Promise.resolve(url).then(function(url2) {
            return baseUrl ? util.resolveUrl(url2, baseUrl) : url2;
          }).then(get || util.getAndEncode).then(function(data) {
            return util.dataAsUrl(data, util.mimeType(url));
          }).then(function(dataUrl) {
            return string.replace(urlAsRegex(url), "$1" + dataUrl + "$3");
          });
          function urlAsRegex(url2) {
            return new RegExp(`(url\\(['"]?)(` + util.escape(url2) + `)(['"]?\\))`, "g");
          }
        }
        function inlineAll(string, baseUrl, get) {
          if (nothingToInline())
            return Promise.resolve(string);
          return Promise.resolve(string).then(readUrls).then(function(urls) {
            var done = Promise.resolve(string);
            urls.forEach(function(url) {
              done = done.then(function(string2) {
                return inline(string2, url, baseUrl, get);
              });
            });
            return done;
          });
          function nothingToInline() {
            return !shouldProcess(string);
          }
        }
      }
      function newFontFaces() {
        return {
          resolveAll,
          impl: {
            readAll
          }
        };
        function resolveAll() {
          return readAll(document).then(function(webFonts) {
            return Promise.all(webFonts.map(function(webFont) {
              return webFont.resolve();
            }));
          }).then(function(cssStrings) {
            return cssStrings.join("\n");
          });
        }
        function readAll() {
          return Promise.resolve(util.asArray(document.styleSheets)).then(getCssRules).then(selectWebFontRules).then(function(rules) {
            return rules.map(newWebFont);
          });
          function selectWebFontRules(cssRules) {
            return cssRules.filter(function(rule) {
              return rule.type === CSSRule.FONT_FACE_RULE;
            }).filter(function(rule) {
              return inliner.shouldProcess(rule.style.getPropertyValue("src"));
            });
          }
          function getCssRules(styleSheets) {
            var cssRules = [];
            styleSheets.forEach(function(sheet) {
              try {
                util.asArray(sheet.cssRules || []).forEach(cssRules.push.bind(cssRules));
              } catch (e) {
                console.log("Error while reading CSS rules from " + sheet.href, e.toString());
              }
            });
            return cssRules;
          }
          function newWebFont(webFontRule) {
            return {
              resolve: function resolve() {
                var baseUrl = (webFontRule.parentStyleSheet || {}).href;
                return inliner.inlineAll(webFontRule.cssText, baseUrl);
              },
              src: function() {
                return webFontRule.style.getPropertyValue("src");
              }
            };
          }
        }
      }
      function newImages() {
        return {
          inlineAll,
          impl: {
            newImage
          }
        };
        function newImage(element) {
          return {
            inline
          };
          function inline(get) {
            if (util.isDataUrl(element.src))
              return Promise.resolve();
            return Promise.resolve(element.src).then(get || util.getAndEncode).then(function(data) {
              return util.dataAsUrl(data, util.mimeType(element.src));
            }).then(function(dataUrl) {
              return new Promise(function(resolve, reject) {
                element.onload = resolve;
                element.onerror = reject;
                element.src = dataUrl;
              });
            });
          }
        }
        function inlineAll(node) {
          if (!(node instanceof Element))
            return Promise.resolve(node);
          return inlineBackground(node).then(function() {
            if (node instanceof HTMLImageElement)
              return newImage(node).inline();
            else
              return Promise.all(util.asArray(node.childNodes).map(function(child) {
                return inlineAll(child);
              }));
          });
          function inlineBackground(node2) {
            var background = node2.style.getPropertyValue("background");
            if (!background)
              return Promise.resolve(node2);
            return inliner.inlineAll(background).then(function(inlined) {
              node2.style.setProperty("background", inlined, node2.style.getPropertyPriority("background"));
            }).then(function() {
              return node2;
            });
          }
        }
      }
    })(exports);
  }
});

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => main_default
});
module.exports = __toCommonJS(main_exports);

// ExportImagePlugin.ts
var import_obsidian = require("obsidian");
var import_file_saver = __toESM(require_FileSaver_min());

// constents.ts
var DEFAULT_SETTINGS = {
  width: "400"
};

// ExportImagePlugin.ts
var import_dom_to_image = __toESM(require_dom_to_image());
function delay(ms) {
  return new Promise(function(resolve) {
    setTimeout(function() {
      resolve(void 0);
    }, ms);
  });
}
var ExportImagePlugin = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    this.addCommand({
      id: "export-to-image-zh",
      name: "Export to image",
      checkCallback: (checking) => {
        const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
        if ((markdownView == null ? void 0 : markdownView.getMode()) === "preview") {
          if (!checking) {
            (async () => {
              const el = markdownView.contentEl.find(".markdown-preview-section");
              const container = el.parentElement;
              const scrollCache = container.scrollTop;
              container.scrollTo(0, 0);
              await delay(40);
              const totalHeight = el.scrollHeight;
              console.log("scollHeight:", totalHeight);
              const screenHeight = markdownView.contentEl.clientHeight;
              let scrollIndex = 0;
              let height = el.clientHeight - parseFloat(el.style.paddingBottom);
              for (let i = 0; i < el.children.length; i++) {
              }
              const clone = await (0, import_dom_to_image.cloneNode)(el);
              const observer = new MutationObserver((records) => records.forEach((r) => r.addedNodes.forEach(async (node) => {
                clone.append(await (0, import_dom_to_image.cloneNode)(node));
              })));
              observer.observe(el, {
                childList: true
              });
              while (scrollIndex <= totalHeight - screenHeight) {
                scrollIndex += screenHeight;
                container.scrollTo(0, scrollIndex);
                await delay(40);
              }
              container.scrollTo(0, scrollCache);
              console.log(el.clientWidth, height);
              const blob = await (0, import_dom_to_image.toBlobWithClonedDom)(el, clone, {
                width: (el.clientWidth + 200) * 2,
                height: (height + 100) * 2,
                bgcolor: window.getComputedStyle(el.closest(".view-content")).backgroundColor,
                quality: 0.9,
                style: {
                  transform: "scale(2)",
                  transformOrigin: "top left",
                  paddingTop: "50px"
                }
              });
              (0, import_file_saver.saveAs)(blob, `${markdownView.getDisplayText().replace(/\s+/g, "_")}.jpg`);
              observer.disconnect();
            })();
          }
          return true;
        }
      }
    });
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};

// main.ts
var main_default = ExportImagePlugin;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL2ZpbGUtc2F2ZXIvc3JjL0ZpbGVTYXZlci5qcyIsICJkb20tdG8taW1hZ2UuanMiLCAibWFpbi50cyIsICJFeHBvcnRJbWFnZVBsdWdpbi50cyIsICJjb25zdGVudHMudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8qXG4qIEZpbGVTYXZlci5qc1xuKiBBIHNhdmVBcygpIEZpbGVTYXZlciBpbXBsZW1lbnRhdGlvbi5cbipcbiogQnkgRWxpIEdyZXksIGh0dHA6Ly9lbGlncmV5LmNvbVxuKlxuKiBMaWNlbnNlIDogaHR0cHM6Ly9naXRodWIuY29tL2VsaWdyZXkvRmlsZVNhdmVyLmpzL2Jsb2IvbWFzdGVyL0xJQ0VOU0UubWQgKE1JVClcbiogc291cmNlICA6IGh0dHA6Ly9wdXJsLmVsaWdyZXkuY29tL2dpdGh1Yi9GaWxlU2F2ZXIuanNcbiovXG5cbi8vIFRoZSBvbmUgYW5kIG9ubHkgd2F5IG9mIGdldHRpbmcgZ2xvYmFsIHNjb3BlIGluIGFsbCBlbnZpcm9ubWVudHNcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcS8zMjc3MTgyLzEwMDg5OTlcbnZhciBfZ2xvYmFsID0gdHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LndpbmRvdyA9PT0gd2luZG93XG4gID8gd2luZG93IDogdHlwZW9mIHNlbGYgPT09ICdvYmplY3QnICYmIHNlbGYuc2VsZiA9PT0gc2VsZlxuICA/IHNlbGYgOiB0eXBlb2YgZ2xvYmFsID09PSAnb2JqZWN0JyAmJiBnbG9iYWwuZ2xvYmFsID09PSBnbG9iYWxcbiAgPyBnbG9iYWxcbiAgOiB0aGlzXG5cbmZ1bmN0aW9uIGJvbSAoYmxvYiwgb3B0cykge1xuICBpZiAodHlwZW9mIG9wdHMgPT09ICd1bmRlZmluZWQnKSBvcHRzID0geyBhdXRvQm9tOiBmYWxzZSB9XG4gIGVsc2UgaWYgKHR5cGVvZiBvcHRzICE9PSAnb2JqZWN0Jykge1xuICAgIGNvbnNvbGUud2FybignRGVwcmVjYXRlZDogRXhwZWN0ZWQgdGhpcmQgYXJndW1lbnQgdG8gYmUgYSBvYmplY3QnKVxuICAgIG9wdHMgPSB7IGF1dG9Cb206ICFvcHRzIH1cbiAgfVxuXG4gIC8vIHByZXBlbmQgQk9NIGZvciBVVEYtOCBYTUwgYW5kIHRleHQvKiB0eXBlcyAoaW5jbHVkaW5nIEhUTUwpXG4gIC8vIG5vdGU6IHlvdXIgYnJvd3NlciB3aWxsIGF1dG9tYXRpY2FsbHkgY29udmVydCBVVEYtMTYgVStGRUZGIHRvIEVGIEJCIEJGXG4gIGlmIChvcHRzLmF1dG9Cb20gJiYgL15cXHMqKD86dGV4dFxcL1xcUyp8YXBwbGljYXRpb25cXC94bWx8XFxTKlxcL1xcUypcXCt4bWwpXFxzKjsuKmNoYXJzZXRcXHMqPVxccyp1dGYtOC9pLnRlc3QoYmxvYi50eXBlKSkge1xuICAgIHJldHVybiBuZXcgQmxvYihbU3RyaW5nLmZyb21DaGFyQ29kZSgweEZFRkYpLCBibG9iXSwgeyB0eXBlOiBibG9iLnR5cGUgfSlcbiAgfVxuICByZXR1cm4gYmxvYlxufVxuXG5mdW5jdGlvbiBkb3dubG9hZCAodXJsLCBuYW1lLCBvcHRzKSB7XG4gIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKVxuICB4aHIub3BlbignR0VUJywgdXJsKVxuICB4aHIucmVzcG9uc2VUeXBlID0gJ2Jsb2InXG4gIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgc2F2ZUFzKHhoci5yZXNwb25zZSwgbmFtZSwgb3B0cylcbiAgfVxuICB4aHIub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zb2xlLmVycm9yKCdjb3VsZCBub3QgZG93bmxvYWQgZmlsZScpXG4gIH1cbiAgeGhyLnNlbmQoKVxufVxuXG5mdW5jdGlvbiBjb3JzRW5hYmxlZCAodXJsKSB7XG4gIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKVxuICAvLyB1c2Ugc3luYyB0byBhdm9pZCBwb3B1cCBibG9ja2VyXG4gIHhoci5vcGVuKCdIRUFEJywgdXJsLCBmYWxzZSlcbiAgdHJ5IHtcbiAgICB4aHIuc2VuZCgpXG4gIH0gY2F0Y2ggKGUpIHt9XG4gIHJldHVybiB4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDw9IDI5OVxufVxuXG4vLyBgYS5jbGljaygpYCBkb2Vzbid0IHdvcmsgZm9yIGFsbCBicm93c2VycyAoIzQ2NSlcbmZ1bmN0aW9uIGNsaWNrIChub2RlKSB7XG4gIHRyeSB7XG4gICAgbm9kZS5kaXNwYXRjaEV2ZW50KG5ldyBNb3VzZUV2ZW50KCdjbGljaycpKVxuICB9IGNhdGNoIChlKSB7XG4gICAgdmFyIGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdNb3VzZUV2ZW50cycpXG4gICAgZXZ0LmluaXRNb3VzZUV2ZW50KCdjbGljaycsIHRydWUsIHRydWUsIHdpbmRvdywgMCwgMCwgMCwgODAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDIwLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgMCwgbnVsbClcbiAgICBub2RlLmRpc3BhdGNoRXZlbnQoZXZ0KVxuICB9XG59XG5cbi8vIERldGVjdCBXZWJWaWV3IGluc2lkZSBhIG5hdGl2ZSBtYWNPUyBhcHAgYnkgcnVsaW5nIG91dCBhbGwgYnJvd3NlcnNcbi8vIFdlIGp1c3QgbmVlZCB0byBjaGVjayBmb3IgJ1NhZmFyaScgYmVjYXVzZSBhbGwgb3RoZXIgYnJvd3NlcnMgKGJlc2lkZXMgRmlyZWZveCkgaW5jbHVkZSB0aGF0IHRvb1xuLy8gaHR0cHM6Ly93d3cud2hhdGlzbXlicm93c2VyLmNvbS9ndWlkZXMvdGhlLWxhdGVzdC11c2VyLWFnZW50L21hY29zXG52YXIgaXNNYWNPU1dlYlZpZXcgPSBfZ2xvYmFsLm5hdmlnYXRvciAmJiAvTWFjaW50b3NoLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmIC9BcHBsZVdlYktpdC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiAhL1NhZmFyaS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KVxuXG52YXIgc2F2ZUFzID0gX2dsb2JhbC5zYXZlQXMgfHwgKFxuICAvLyBwcm9iYWJseSBpbiBzb21lIHdlYiB3b3JrZXJcbiAgKHR5cGVvZiB3aW5kb3cgIT09ICdvYmplY3QnIHx8IHdpbmRvdyAhPT0gX2dsb2JhbClcbiAgICA/IGZ1bmN0aW9uIHNhdmVBcyAoKSB7IC8qIG5vb3AgKi8gfVxuXG4gIC8vIFVzZSBkb3dubG9hZCBhdHRyaWJ1dGUgZmlyc3QgaWYgcG9zc2libGUgKCMxOTMgTHVtaWEgbW9iaWxlKSB1bmxlc3MgdGhpcyBpcyBhIG1hY09TIFdlYlZpZXdcbiAgOiAoJ2Rvd25sb2FkJyBpbiBIVE1MQW5jaG9yRWxlbWVudC5wcm90b3R5cGUgJiYgIWlzTWFjT1NXZWJWaWV3KVxuICA/IGZ1bmN0aW9uIHNhdmVBcyAoYmxvYiwgbmFtZSwgb3B0cykge1xuICAgIHZhciBVUkwgPSBfZ2xvYmFsLlVSTCB8fCBfZ2xvYmFsLndlYmtpdFVSTFxuICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpXG4gICAgbmFtZSA9IG5hbWUgfHwgYmxvYi5uYW1lIHx8ICdkb3dubG9hZCdcblxuICAgIGEuZG93bmxvYWQgPSBuYW1lXG4gICAgYS5yZWwgPSAnbm9vcGVuZXInIC8vIHRhYm5hYmJpbmdcblxuICAgIC8vIFRPRE86IGRldGVjdCBjaHJvbWUgZXh0ZW5zaW9ucyAmIHBhY2thZ2VkIGFwcHNcbiAgICAvLyBhLnRhcmdldCA9ICdfYmxhbmsnXG5cbiAgICBpZiAodHlwZW9mIGJsb2IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBTdXBwb3J0IHJlZ3VsYXIgbGlua3NcbiAgICAgIGEuaHJlZiA9IGJsb2JcbiAgICAgIGlmIChhLm9yaWdpbiAhPT0gbG9jYXRpb24ub3JpZ2luKSB7XG4gICAgICAgIGNvcnNFbmFibGVkKGEuaHJlZilcbiAgICAgICAgICA/IGRvd25sb2FkKGJsb2IsIG5hbWUsIG9wdHMpXG4gICAgICAgICAgOiBjbGljayhhLCBhLnRhcmdldCA9ICdfYmxhbmsnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2xpY2soYSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU3VwcG9ydCBibG9ic1xuICAgICAgYS5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKVxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IFVSTC5yZXZva2VPYmplY3RVUkwoYS5ocmVmKSB9LCA0RTQpIC8vIDQwc1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IGNsaWNrKGEpIH0sIDApXG4gICAgfVxuICB9XG5cbiAgLy8gVXNlIG1zU2F2ZU9yT3BlbkJsb2IgYXMgYSBzZWNvbmQgYXBwcm9hY2hcbiAgOiAnbXNTYXZlT3JPcGVuQmxvYicgaW4gbmF2aWdhdG9yXG4gID8gZnVuY3Rpb24gc2F2ZUFzIChibG9iLCBuYW1lLCBvcHRzKSB7XG4gICAgbmFtZSA9IG5hbWUgfHwgYmxvYi5uYW1lIHx8ICdkb3dubG9hZCdcblxuICAgIGlmICh0eXBlb2YgYmxvYiA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGlmIChjb3JzRW5hYmxlZChibG9iKSkge1xuICAgICAgICBkb3dubG9hZChibG9iLCBuYW1lLCBvcHRzKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcbiAgICAgICAgYS5ocmVmID0gYmxvYlxuICAgICAgICBhLnRhcmdldCA9ICdfYmxhbmsnXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyBjbGljayhhKSB9KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBuYXZpZ2F0b3IubXNTYXZlT3JPcGVuQmxvYihib20oYmxvYiwgb3B0cyksIG5hbWUpXG4gICAgfVxuICB9XG5cbiAgLy8gRmFsbGJhY2sgdG8gdXNpbmcgRmlsZVJlYWRlciBhbmQgYSBwb3B1cFxuICA6IGZ1bmN0aW9uIHNhdmVBcyAoYmxvYiwgbmFtZSwgb3B0cywgcG9wdXApIHtcbiAgICAvLyBPcGVuIGEgcG9wdXAgaW1tZWRpYXRlbHkgZG8gZ28gYXJvdW5kIHBvcHVwIGJsb2NrZXJcbiAgICAvLyBNb3N0bHkgb25seSBhdmFpbGFibGUgb24gdXNlciBpbnRlcmFjdGlvbiBhbmQgdGhlIGZpbGVSZWFkZXIgaXMgYXN5bmMgc28uLi5cbiAgICBwb3B1cCA9IHBvcHVwIHx8IG9wZW4oJycsICdfYmxhbmsnKVxuICAgIGlmIChwb3B1cCkge1xuICAgICAgcG9wdXAuZG9jdW1lbnQudGl0bGUgPVxuICAgICAgcG9wdXAuZG9jdW1lbnQuYm9keS5pbm5lclRleHQgPSAnZG93bmxvYWRpbmcuLi4nXG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBibG9iID09PSAnc3RyaW5nJykgcmV0dXJuIGRvd25sb2FkKGJsb2IsIG5hbWUsIG9wdHMpXG5cbiAgICB2YXIgZm9yY2UgPSBibG9iLnR5cGUgPT09ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nXG4gICAgdmFyIGlzU2FmYXJpID0gL2NvbnN0cnVjdG9yL2kudGVzdChfZ2xvYmFsLkhUTUxFbGVtZW50KSB8fCBfZ2xvYmFsLnNhZmFyaVxuICAgIHZhciBpc0Nocm9tZUlPUyA9IC9DcmlPU1xcL1tcXGRdKy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KVxuXG4gICAgaWYgKChpc0Nocm9tZUlPUyB8fCAoZm9yY2UgJiYgaXNTYWZhcmkpIHx8IGlzTWFjT1NXZWJWaWV3KSAmJiB0eXBlb2YgRmlsZVJlYWRlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIFNhZmFyaSBkb2Vzbid0IGFsbG93IGRvd25sb2FkaW5nIG9mIGJsb2IgVVJMc1xuICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKClcbiAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB1cmwgPSByZWFkZXIucmVzdWx0XG4gICAgICAgIHVybCA9IGlzQ2hyb21lSU9TID8gdXJsIDogdXJsLnJlcGxhY2UoL15kYXRhOlteO10qOy8sICdkYXRhOmF0dGFjaG1lbnQvZmlsZTsnKVxuICAgICAgICBpZiAocG9wdXApIHBvcHVwLmxvY2F0aW9uLmhyZWYgPSB1cmxcbiAgICAgICAgZWxzZSBsb2NhdGlvbiA9IHVybFxuICAgICAgICBwb3B1cCA9IG51bGwgLy8gcmV2ZXJzZS10YWJuYWJiaW5nICM0NjBcbiAgICAgIH1cbiAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGJsb2IpXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBVUkwgPSBfZ2xvYmFsLlVSTCB8fCBfZ2xvYmFsLndlYmtpdFVSTFxuICAgICAgdmFyIHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYilcbiAgICAgIGlmIChwb3B1cCkgcG9wdXAubG9jYXRpb24gPSB1cmxcbiAgICAgIGVsc2UgbG9jYXRpb24uaHJlZiA9IHVybFxuICAgICAgcG9wdXAgPSBudWxsIC8vIHJldmVyc2UtdGFibmFiYmluZyAjNDYwXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpIH0sIDRFNCkgLy8gNDBzXG4gICAgfVxuICB9XG4pXG5cbl9nbG9iYWwuc2F2ZUFzID0gc2F2ZUFzLnNhdmVBcyA9IHNhdmVBc1xuXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSBzYXZlQXM7XG59XG4iLCAiKGZ1bmN0aW9uIChnbG9iYWwpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciB1dGlsID0gbmV3VXRpbCgpO1xuICB2YXIgaW5saW5lciA9IG5ld0lubGluZXIoKTtcbiAgdmFyIGZvbnRGYWNlcyA9IG5ld0ZvbnRGYWNlcygpO1xuICB2YXIgaW1hZ2VzID0gbmV3SW1hZ2VzKCk7XG5cbiAgLy8gRGVmYXVsdCBpbXBsIG9wdGlvbnNcbiAgdmFyIGRlZmF1bHRPcHRpb25zID0ge1xuICAgIC8vIERlZmF1bHQgaXMgdG8gZmFpbCBvbiBlcnJvciwgbm8gcGxhY2Vob2xkZXJcbiAgICBpbWFnZVBsYWNlaG9sZGVyOiB1bmRlZmluZWQsXG4gICAgLy8gRGVmYXVsdCBjYWNoZSBidXN0IGlzIGZhbHNlLCBpdCB3aWxsIHVzZSB0aGUgY2FjaGVcbiAgICBjYWNoZUJ1c3Q6IGZhbHNlXG4gIH07XG5cbiAgdmFyIGRvbXRvaW1hZ2UgPSB7XG4gICAgdG9Tdmc6IHRvU3ZnLFxuICAgIHRvUG5nOiB0b1BuZyxcbiAgICB0b0pwZWc6IHRvSnBlZyxcbiAgICB0b0Jsb2I6IHRvQmxvYixcbiAgICB0b1BpeGVsRGF0YTogdG9QaXhlbERhdGEsXG4gICAgdG9CbG9iV2l0aENsb25lZERvbTogdG9CbG9iV2l0aENsb25lZERvbSxcbiAgICBjbG9uZU5vZGU6IGNsb25lTm9kZSxcbiAgICBpbXBsOiB7XG4gICAgICBmb250RmFjZXM6IGZvbnRGYWNlcyxcbiAgICAgIGltYWdlczogaW1hZ2VzLFxuICAgICAgdXRpbDogdXRpbCxcbiAgICAgIGlubGluZXI6IGlubGluZXIsXG4gICAgICBvcHRpb25zOiB7fVxuICAgIH1cbiAgfTtcblxuICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBkb210b2ltYWdlO1xuICBlbHNlXG4gICAgZ2xvYmFsLmRvbXRvaW1hZ2UgPSBkb210b2ltYWdlO1xuXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Tm9kZX0gbm9kZSAtIFRoZSBET00gTm9kZSBvYmplY3QgdG8gcmVuZGVyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gUmVuZGVyaW5nIG9wdGlvbnNcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3B0aW9ucy5maWx0ZXIgLSBTaG91bGQgcmV0dXJuIHRydWUgaWYgcGFzc2VkIG5vZGUgc2hvdWxkIGJlIGluY2x1ZGVkIGluIHRoZSBvdXRwdXRcbiAgICogICAgICAgICAgKGV4Y2x1ZGluZyBub2RlIG1lYW5zIGV4Y2x1ZGluZyBpdCdzIGNoaWxkcmVuIGFzIHdlbGwpLiBOb3QgY2FsbGVkIG9uIHRoZSByb290IG5vZGUuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBvcHRpb25zLmJnY29sb3IgLSBjb2xvciBmb3IgdGhlIGJhY2tncm91bmQsIGFueSB2YWxpZCBDU1MgY29sb3IgdmFsdWUuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBvcHRpb25zLndpZHRoIC0gd2lkdGggdG8gYmUgYXBwbGllZCB0byBub2RlIGJlZm9yZSByZW5kZXJpbmcuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBvcHRpb25zLmhlaWdodCAtIGhlaWdodCB0byBiZSBhcHBsaWVkIHRvIG5vZGUgYmVmb3JlIHJlbmRlcmluZy5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMuc3R5bGUgLSBhbiBvYmplY3Qgd2hvc2UgcHJvcGVydGllcyB0byBiZSBjb3BpZWQgdG8gbm9kZSdzIHN0eWxlIGJlZm9yZSByZW5kZXJpbmcuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBvcHRpb25zLnF1YWxpdHkgLSBhIE51bWJlciBiZXR3ZWVuIDAgYW5kIDEgaW5kaWNhdGluZyBpbWFnZSBxdWFsaXR5IChhcHBsaWNhYmxlIHRvIEpQRUcgb25seSksXG4gICAgICAgICAgICAgIGRlZmF1bHRzIHRvIDEuMC5cbiAgICogQHBhcmFtIHtTdHJpbmd9IG9wdGlvbnMuaW1hZ2VQbGFjZWhvbGRlciAtIGRhdGFVUkwgdG8gdXNlIGFzIGEgcGxhY2Vob2xkZXIgZm9yIGZhaWxlZCBpbWFnZXMsIGRlZmF1bHQgYmVoYXZpb3VyIGlzIHRvIGZhaWwgZmFzdCBvbiBpbWFnZXMgd2UgY2FuJ3QgZmV0Y2hcbiAgICogQHBhcmFtIHtCb29sZWFufSBvcHRpb25zLmNhY2hlQnVzdCAtIHNldCB0byB0cnVlIHRvIGNhY2hlIGJ1c3QgYnkgYXBwZW5kaW5nIHRoZSB0aW1lIHRvIHRoZSByZXF1ZXN0IHVybFxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIEEgcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aXRoIGEgU1ZHIGltYWdlIGRhdGEgVVJMXG4gICAqICovXG4gIGZ1bmN0aW9uIHRvU3ZnKG5vZGUsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICBjb3B5T3B0aW9ucyhvcHRpb25zKTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5vZGUpXG4gICAgICAudGhlbihmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICByZXR1cm4gY2xvbmVOb2RlKG5vZGUsIG9wdGlvbnMuZmlsdGVyLCB0cnVlKTtcbiAgICAgIH0pXG4gICAgICAudGhlbihlbWJlZEZvbnRzKVxuICAgICAgLnRoZW4oaW5saW5lSW1hZ2VzKVxuICAgICAgLnRoZW4oYXBwbHlPcHRpb25zKVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKGNsb25lKSB7XG4gICAgICAgIHJldHVybiBtYWtlU3ZnRGF0YVVyaShjbG9uZSxcbiAgICAgICAgICBvcHRpb25zLndpZHRoIHx8IHV0aWwud2lkdGgobm9kZSksXG4gICAgICAgICAgb3B0aW9ucy5oZWlnaHQgfHwgdXRpbC5oZWlnaHQobm9kZSlcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gYXBwbHlPcHRpb25zKGNsb25lKSB7XG4gICAgICBpZiAob3B0aW9ucy5iZ2NvbG9yKSBjbG9uZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBvcHRpb25zLmJnY29sb3I7XG5cbiAgICAgIGlmIChvcHRpb25zLndpZHRoKSBjbG9uZS5zdHlsZS53aWR0aCA9IG9wdGlvbnMud2lkdGggKyAncHgnO1xuICAgICAgaWYgKG9wdGlvbnMuaGVpZ2h0KSBjbG9uZS5zdHlsZS5oZWlnaHQgPSBvcHRpb25zLmhlaWdodCArICdweCc7XG5cbiAgICAgIGlmIChvcHRpb25zLnN0eWxlKVxuICAgICAgICBPYmplY3Qua2V5cyhvcHRpb25zLnN0eWxlKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuICAgICAgICAgIGNsb25lLnN0eWxlW3Byb3BlcnR5XSA9IG9wdGlvbnMuc3R5bGVbcHJvcGVydHldO1xuICAgICAgICB9KTtcblxuICAgICAgcmV0dXJuIGNsb25lO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHRvU3ZnV2l0aENsb25lZERvbShub2RlLCBjbG9uZSwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIGNvcHlPcHRpb25zKG9wdGlvbnMpO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoY2xvbmUpXG4gICAgICAudGhlbihlbWJlZEZvbnRzKVxuICAgICAgLnRoZW4oaW5saW5lSW1hZ2VzKVxuICAgICAgLnRoZW4oYXBwbHlPcHRpb25zKVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKGNsb25lKSB7XG4gICAgICAgIHJldHVybiBtYWtlU3ZnRGF0YVVyaShjbG9uZSxcbiAgICAgICAgICBvcHRpb25zLndpZHRoICogMixcbiAgICAgICAgICBvcHRpb25zLmhlaWdodCAqIDJcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gYXBwbHlPcHRpb25zKGNsb25lKSB7XG4gICAgICBpZiAob3B0aW9ucy5iZ2NvbG9yKSBjbG9uZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBvcHRpb25zLmJnY29sb3I7XG5cbiAgICAgIGlmIChvcHRpb25zLndpZHRoKSBjbG9uZS5zdHlsZS53aWR0aCA9IG9wdGlvbnMud2lkdGggKyAncHgnO1xuICAgICAgaWYgKG9wdGlvbnMuaGVpZ2h0KSBjbG9uZS5zdHlsZS5oZWlnaHQgPSBvcHRpb25zLmhlaWdodCArICdweCc7XG5cbiAgICAgIGlmIChvcHRpb25zLnN0eWxlKVxuICAgICAgICBPYmplY3Qua2V5cyhvcHRpb25zLnN0eWxlKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuICAgICAgICAgIGNsb25lLnN0eWxlW3Byb3BlcnR5XSA9IG9wdGlvbnMuc3R5bGVbcHJvcGVydHldO1xuICAgICAgICB9KTtcblxuICAgICAgcmV0dXJuIGNsb25lO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge05vZGV9IG5vZGUgLSBUaGUgRE9NIE5vZGUgb2JqZWN0IHRvIHJlbmRlclxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIFJlbmRlcmluZyBvcHRpb25zLCBAc2VlIHtAbGluayB0b1N2Z31cbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSBBIHByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgd2l0aCBhIFVpbnQ4QXJyYXkgY29udGFpbmluZyBSR0JBIHBpeGVsIGRhdGEuXG4gICAqICovXG4gIGZ1bmN0aW9uIHRvUGl4ZWxEYXRhKG5vZGUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZHJhdyhub2RlLCBvcHRpb25zIHx8IHt9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKGNhbnZhcykge1xuICAgICAgICByZXR1cm4gY2FudmFzLmdldENvbnRleHQoJzJkJykuZ2V0SW1hZ2VEYXRhKFxuICAgICAgICAgIDAsXG4gICAgICAgICAgMCxcbiAgICAgICAgICB1dGlsLndpZHRoKG5vZGUpLFxuICAgICAgICAgIHV0aWwuaGVpZ2h0KG5vZGUpXG4gICAgICAgICkuZGF0YTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Tm9kZX0gbm9kZSAtIFRoZSBET00gTm9kZSBvYmplY3QgdG8gcmVuZGVyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gUmVuZGVyaW5nIG9wdGlvbnMsIEBzZWUge0BsaW5rIHRvU3ZnfVxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIEEgcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aXRoIGEgUE5HIGltYWdlIGRhdGEgVVJMXG4gICAqICovXG4gIGZ1bmN0aW9uIHRvUG5nKG5vZGUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZHJhdyhub2RlLCBvcHRpb25zIHx8IHt9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKGNhbnZhcykge1xuICAgICAgICByZXR1cm4gY2FudmFzLnRvRGF0YVVSTCgpO1xuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtOb2RlfSBub2RlIC0gVGhlIERPTSBOb2RlIG9iamVjdCB0byByZW5kZXJcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBSZW5kZXJpbmcgb3B0aW9ucywgQHNlZSB7QGxpbmsgdG9Tdmd9XG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gQSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdpdGggYSBKUEVHIGltYWdlIGRhdGEgVVJMXG4gICAqICovXG4gIGZ1bmN0aW9uIHRvSnBlZyhub2RlLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgcmV0dXJuIGRyYXcobm9kZSwgb3B0aW9ucylcbiAgICAgIC50aGVuKGZ1bmN0aW9uIChjYW52YXMpIHtcbiAgICAgICAgcmV0dXJuIGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL2pwZWcnLCBvcHRpb25zLnF1YWxpdHkgfHwgMS4wKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Tm9kZX0gbm9kZSAtIFRoZSBET00gTm9kZSBvYmplY3QgdG8gcmVuZGVyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gUmVuZGVyaW5nIG9wdGlvbnMsIEBzZWUge0BsaW5rIHRvU3ZnfVxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIEEgcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aXRoIGEgUE5HIGltYWdlIGJsb2JcbiAgICogKi9cbiAgZnVuY3Rpb24gdG9CbG9iKG5vZGUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZHJhdyhub2RlLCBvcHRpb25zIHx8IHt9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKGNhbnZhcykge1xuICAgICAgICByZXR1cm4gdXRpbC5jYW52YXNUb0Jsb2IoY2FudmFzLCBvcHRpb25zKTtcbiAgICAgIH0pO1xuICB9XG5cblxuICBmdW5jdGlvbiB0b0Jsb2JXaXRoQ2xvbmVkRG9tKG5vZGUsIGNsb25lLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGRyYXdXaXRoQ2xvbmVkRG9tKG5vZGUsIGNsb25lLCBvcHRpb25zIHx8IHt9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKGNhbnZhcykge1xuICAgICAgICByZXR1cm4gdXRpbC5jYW52YXNUb0Jsb2IoY2FudmFzLCBvcHRpb25zKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gY29weU9wdGlvbnMob3B0aW9ucykge1xuICAgIC8vIENvcHkgb3B0aW9ucyB0byBpbXBsIG9wdGlvbnMgZm9yIHVzZSBpbiBpbXBsXG4gICAgaWYgKHR5cGVvZiAob3B0aW9ucy5pbWFnZVBsYWNlaG9sZGVyKSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRvbXRvaW1hZ2UuaW1wbC5vcHRpb25zLmltYWdlUGxhY2Vob2xkZXIgPSBkZWZhdWx0T3B0aW9ucy5pbWFnZVBsYWNlaG9sZGVyO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb210b2ltYWdlLmltcGwub3B0aW9ucy5pbWFnZVBsYWNlaG9sZGVyID0gb3B0aW9ucy5pbWFnZVBsYWNlaG9sZGVyO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgKG9wdGlvbnMuY2FjaGVCdXN0KSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRvbXRvaW1hZ2UuaW1wbC5vcHRpb25zLmNhY2hlQnVzdCA9IGRlZmF1bHRPcHRpb25zLmNhY2hlQnVzdDtcbiAgICB9IGVsc2Uge1xuICAgICAgZG9tdG9pbWFnZS5pbXBsLm9wdGlvbnMuY2FjaGVCdXN0ID0gb3B0aW9ucy5jYWNoZUJ1c3Q7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZHJhdyhkb21Ob2RlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRvU3ZnKGRvbU5vZGUsIG9wdGlvbnMpXG4gICAgICAudGhlbih1dGlsLm1ha2VJbWFnZSlcbiAgICAgIC50aGVuKHV0aWwuZGVsYXkoMTAwKSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uIChpbWFnZSkge1xuICAgICAgICB2YXIgY2FudmFzID0gbmV3Q2FudmFzKGRvbU5vZGUpO1xuICAgICAgICBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKS5kcmF3SW1hZ2UoaW1hZ2UsIDAsIDApO1xuICAgICAgICByZXR1cm4gY2FudmFzO1xuICAgICAgfSk7XG5cbiAgICBmdW5jdGlvbiBuZXdDYW52YXMoZG9tTm9kZSkge1xuICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgY2FudmFzLndpZHRoID0gb3B0aW9ucy53aWR0aCB8fCB1dGlsLndpZHRoKGRvbU5vZGUpO1xuICAgICAgY2FudmFzLmhlaWdodCA9IG9wdGlvbnMuaGVpZ2h0IHx8IHV0aWwuaGVpZ2h0KGRvbU5vZGUpO1xuXG4gICAgICBpZiAob3B0aW9ucy5iZ2NvbG9yKSB7XG4gICAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IG9wdGlvbnMuYmdjb2xvcjtcbiAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjYW52YXM7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGRyYXdXaXRoQ2xvbmVkRG9tKGRvbU5vZGUsIGNsb25lLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRvU3ZnV2l0aENsb25lZERvbShkb21Ob2RlLCBjbG9uZSwgb3B0aW9ucylcbiAgICAgIC50aGVuKHV0aWwubWFrZUltYWdlKVxuICAgICAgLnRoZW4odXRpbC5kZWxheSgxMDApKVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKGltYWdlKSB7XG4gICAgICAgIHZhciBjYW52YXMgPSBuZXdDYW52YXMoZG9tTm9kZSk7XG4gICAgICAgIGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpLmRyYXdJbWFnZShpbWFnZSwgMCwgMCwgb3B0aW9ucy53aWR0aCwgb3B0aW9ucy5oZWlnaHQpO1xuICAgICAgICByZXR1cm4gY2FudmFzO1xuICAgICAgfSk7XG5cbiAgICBmdW5jdGlvbiBuZXdDYW52YXMoZG9tTm9kZSkge1xuICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgY2FudmFzLndpZHRoID0gb3B0aW9ucy53aWR0aCAvIDI7XG4gICAgICBjYW52YXMuaGVpZ2h0ID0gb3B0aW9ucy5oZWlnaHQgLyAyO1xuXG4gICAgICBpZiAob3B0aW9ucy5iZ2NvbG9yKSB7XG4gICAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IG9wdGlvbnMuYmdjb2xvcjtcbiAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjYW52YXM7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2xvbmVOb2RlKG5vZGUsIGZpbHRlciwgcm9vdCkge1xuICAgIGlmICghcm9vdCAmJiBmaWx0ZXIgJiYgIWZpbHRlcihub2RlKSkgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuXG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShub2RlKVxuICAgICAgLnRoZW4obWFrZU5vZGVDb3B5KVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKGNsb25lKSB7XG4gICAgICAgIHJldHVybiBjbG9uZUNoaWxkcmVuKG5vZGUsIGNsb25lLCBmaWx0ZXIpO1xuICAgICAgfSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uIChjbG9uZSkge1xuICAgICAgICByZXR1cm4gcHJvY2Vzc0Nsb25lKG5vZGUsIGNsb25lKTtcbiAgICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gbWFrZU5vZGVDb3B5KG5vZGUpIHtcbiAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpIHJldHVybiB1dGlsLm1ha2VJbWFnZShub2RlLnRvRGF0YVVSTCgpKTtcbiAgICAgIHJldHVybiBub2RlLmNsb25lTm9kZShmYWxzZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xvbmVDaGlsZHJlbihvcmlnaW5hbCwgY2xvbmUsIGZpbHRlcikge1xuICAgICAgdmFyIGNoaWxkcmVuID0gb3JpZ2luYWwuY2hpbGROb2RlcztcbiAgICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPT09IDApIHJldHVybiBQcm9taXNlLnJlc29sdmUoY2xvbmUpO1xuXG4gICAgICByZXR1cm4gY2xvbmVDaGlsZHJlbkluT3JkZXIoY2xvbmUsIHV0aWwuYXNBcnJheShjaGlsZHJlbiksIGZpbHRlcilcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBjbG9uZTtcbiAgICAgICAgfSk7XG5cbiAgICAgIGZ1bmN0aW9uIGNsb25lQ2hpbGRyZW5Jbk9yZGVyKHBhcmVudCwgY2hpbGRyZW4sIGZpbHRlcikge1xuICAgICAgICB2YXIgZG9uZSA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICBjaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICAgIGRvbmUgPSBkb25lXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHJldHVybiBjbG9uZU5vZGUoY2hpbGQsIGZpbHRlcik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGNoaWxkQ2xvbmUpIHtcbiAgICAgICAgICAgICAgaWYgKGNoaWxkQ2xvbmUpIHBhcmVudC5hcHBlbmRDaGlsZChjaGlsZENsb25lKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRvbmU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcHJvY2Vzc0Nsb25lKG9yaWdpbmFsLCBjbG9uZSkge1xuICAgICAgaWYgKCEoY2xvbmUgaW5zdGFuY2VvZiBFbGVtZW50KSkgcmV0dXJuIGNsb25lO1xuXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKClcbiAgICAgICAgLnRoZW4oY2xvbmVTdHlsZSlcbiAgICAgICAgLnRoZW4oY2xvbmVQc2V1ZG9FbGVtZW50cylcbiAgICAgICAgLnRoZW4oY29weVVzZXJJbnB1dClcbiAgICAgICAgLnRoZW4oZml4U3ZnKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIGNsb25lO1xuICAgICAgICB9KTtcblxuICAgICAgZnVuY3Rpb24gY2xvbmVTdHlsZSgpIHtcbiAgICAgICAgY29weVN0eWxlKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG9yaWdpbmFsKSwgY2xvbmUuc3R5bGUpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGNvcHlTdHlsZShzb3VyY2UsIHRhcmdldCkge1xuICAgICAgICAgIGlmIChzb3VyY2UuY3NzVGV4dCkgdGFyZ2V0LmNzc1RleHQgPSBzb3VyY2UuY3NzVGV4dDtcbiAgICAgICAgICBlbHNlIGNvcHlQcm9wZXJ0aWVzKHNvdXJjZSwgdGFyZ2V0KTtcblxuICAgICAgICAgIGZ1bmN0aW9uIGNvcHlQcm9wZXJ0aWVzKHNvdXJjZSwgdGFyZ2V0KSB7XG4gICAgICAgICAgICB1dGlsLmFzQXJyYXkoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICAgIHRhcmdldC5zZXRQcm9wZXJ0eShcbiAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgIHNvdXJjZS5nZXRQcm9wZXJ0eVZhbHVlKG5hbWUpLFxuICAgICAgICAgICAgICAgIHNvdXJjZS5nZXRQcm9wZXJ0eVByaW9yaXR5KG5hbWUpXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY2xvbmVQc2V1ZG9FbGVtZW50cygpIHtcbiAgICAgICAgWyc6YmVmb3JlJywgJzphZnRlciddLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICBjbG9uZVBzZXVkb0VsZW1lbnQoZWxlbWVudCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIGNsb25lUHNldWRvRWxlbWVudChlbGVtZW50KSB7XG4gICAgICAgICAgdmFyIHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUob3JpZ2luYWwsIGVsZW1lbnQpO1xuICAgICAgICAgIHZhciBjb250ZW50ID0gc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnY29udGVudCcpO1xuXG4gICAgICAgICAgaWYgKGNvbnRlbnQgPT09ICcnIHx8IGNvbnRlbnQgPT09ICdub25lJykgcmV0dXJuO1xuXG4gICAgICAgICAgdmFyIGNsYXNzTmFtZSA9IHV0aWwudWlkKCk7XG4gICAgICAgICAgY2xvbmUuY2xhc3NOYW1lID0gY2xvbmUuY2xhc3NOYW1lICsgJyAnICsgY2xhc3NOYW1lO1xuICAgICAgICAgIHZhciBzdHlsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgICAgIHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChmb3JtYXRQc2V1ZG9FbGVtZW50U3R5bGUoY2xhc3NOYW1lLCBlbGVtZW50LCBzdHlsZSkpO1xuICAgICAgICAgIGNsb25lLmFwcGVuZENoaWxkKHN0eWxlRWxlbWVudCk7XG5cbiAgICAgICAgICBmdW5jdGlvbiBmb3JtYXRQc2V1ZG9FbGVtZW50U3R5bGUoY2xhc3NOYW1lLCBlbGVtZW50LCBzdHlsZSkge1xuICAgICAgICAgICAgdmFyIHNlbGVjdG9yID0gJy4nICsgY2xhc3NOYW1lICsgJzonICsgZWxlbWVudDtcbiAgICAgICAgICAgIHZhciBjc3NUZXh0ID0gc3R5bGUuY3NzVGV4dCA/IGZvcm1hdENzc1RleHQoc3R5bGUpIDogZm9ybWF0Q3NzUHJvcGVydGllcyhzdHlsZSk7XG4gICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoc2VsZWN0b3IgKyAneycgKyBjc3NUZXh0ICsgJ30nKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gZm9ybWF0Q3NzVGV4dChzdHlsZSkge1xuICAgICAgICAgICAgICB2YXIgY29udGVudCA9IHN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ2NvbnRlbnQnKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHN0eWxlLmNzc1RleHQgKyAnIGNvbnRlbnQ6ICcgKyBjb250ZW50ICsgJzsnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBmb3JtYXRDc3NQcm9wZXJ0aWVzKHN0eWxlKSB7XG5cbiAgICAgICAgICAgICAgcmV0dXJuIHV0aWwuYXNBcnJheShzdHlsZSlcbiAgICAgICAgICAgICAgICAubWFwKGZvcm1hdFByb3BlcnR5KVxuICAgICAgICAgICAgICAgIC5qb2luKCc7ICcpICsgJzsnO1xuXG4gICAgICAgICAgICAgIGZ1bmN0aW9uIGZvcm1hdFByb3BlcnR5KG5hbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmFtZSArICc6ICcgK1xuICAgICAgICAgICAgICAgICAgc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShuYW1lKSArXG4gICAgICAgICAgICAgICAgICAoc3R5bGUuZ2V0UHJvcGVydHlQcmlvcml0eShuYW1lKSA/ICcgIWltcG9ydGFudCcgOiAnJyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY29weVVzZXJJbnB1dCgpIHtcbiAgICAgICAgaWYgKG9yaWdpbmFsIGluc3RhbmNlb2YgSFRNTFRleHRBcmVhRWxlbWVudCkgY2xvbmUuaW5uZXJIVE1MID0gb3JpZ2luYWwudmFsdWU7XG4gICAgICAgIGlmIChvcmlnaW5hbCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIGNsb25lLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIG9yaWdpbmFsLnZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZml4U3ZnKCkge1xuICAgICAgICBpZiAoIShjbG9uZSBpbnN0YW5jZW9mIFNWR0VsZW1lbnQpKSByZXR1cm47XG4gICAgICAgIGNsb25lLnNldEF0dHJpYnV0ZSgneG1sbnMnLCAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnKTtcblxuICAgICAgICBpZiAoIShjbG9uZSBpbnN0YW5jZW9mIFNWR1JlY3RFbGVtZW50KSkgcmV0dXJuO1xuICAgICAgICBbJ3dpZHRoJywgJ2hlaWdodCddLmZvckVhY2goZnVuY3Rpb24gKGF0dHJpYnV0ZSkge1xuICAgICAgICAgIHZhciB2YWx1ZSA9IGNsb25lLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGUpO1xuICAgICAgICAgIGlmICghdmFsdWUpIHJldHVybjtcblxuICAgICAgICAgIGNsb25lLnN0eWxlLnNldFByb3BlcnR5KGF0dHJpYnV0ZSwgdmFsdWUpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBlbWJlZEZvbnRzKG5vZGUpIHtcbiAgICByZXR1cm4gZm9udEZhY2VzLnJlc29sdmVBbGwoKVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKGNzc1RleHQpIHtcbiAgICAgICAgdmFyIHN0eWxlTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoc3R5bGVOb2RlKTtcbiAgICAgICAgc3R5bGVOb2RlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzc1RleHQpKTtcbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlubGluZUltYWdlcyhub2RlKSB7XG4gICAgcmV0dXJuIGltYWdlcy5pbmxpbmVBbGwobm9kZSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1ha2VTdmdEYXRhVXJpKG5vZGUsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5vZGUpXG4gICAgICAudGhlbihmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgneG1sbnMnLCAnaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCcpO1xuICAgICAgICByZXR1cm4gbmV3IFhNTFNlcmlhbGl6ZXIoKS5zZXJpYWxpemVUb1N0cmluZyhub2RlKTtcbiAgICAgIH0pXG4gICAgICAudGhlbih1dGlsLmVzY2FwZVhodG1sKVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKHhodG1sKSB7XG4gICAgICAgIHJldHVybiAnPGZvcmVpZ25PYmplY3QgeD1cIjBcIiB5PVwiMFwiIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEwMCVcIj4nICsgeGh0bWwgKyAnPC9mb3JlaWduT2JqZWN0Pic7XG4gICAgICB9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKGZvcmVpZ25PYmplY3QpIHtcbiAgICAgICAgcmV0dXJuICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIicgKyB3aWR0aCArICdcIiBoZWlnaHQ9XCInICsgaGVpZ2h0ICsgJ1wiPicgK1xuICAgICAgICAgIGZvcmVpZ25PYmplY3QgKyAnPC9zdmc+JztcbiAgICAgIH0pXG4gICAgICAudGhlbihmdW5jdGlvbiAoc3ZnKSB7XG4gICAgICAgIHJldHVybiAnZGF0YTppbWFnZS9zdmcreG1sO2NoYXJzZXQ9dXRmLTgsJyArIHN2ZztcbiAgICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gbmV3VXRpbCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXNjYXBlOiBlc2NhcGUsXG4gICAgICBwYXJzZUV4dGVuc2lvbjogcGFyc2VFeHRlbnNpb24sXG4gICAgICBtaW1lVHlwZTogbWltZVR5cGUsXG4gICAgICBkYXRhQXNVcmw6IGRhdGFBc1VybCxcbiAgICAgIGlzRGF0YVVybDogaXNEYXRhVXJsLFxuICAgICAgY2FudmFzVG9CbG9iOiBjYW52YXNUb0Jsb2IsXG4gICAgICByZXNvbHZlVXJsOiByZXNvbHZlVXJsLFxuICAgICAgZ2V0QW5kRW5jb2RlOiBnZXRBbmRFbmNvZGUsXG4gICAgICB1aWQ6IHVpZCgpLFxuICAgICAgZGVsYXk6IGRlbGF5LFxuICAgICAgYXNBcnJheTogYXNBcnJheSxcbiAgICAgIGVzY2FwZVhodG1sOiBlc2NhcGVYaHRtbCxcbiAgICAgIG1ha2VJbWFnZTogbWFrZUltYWdlLFxuICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgaGVpZ2h0OiBoZWlnaHRcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gbWltZXMoKSB7XG4gICAgICAvKlxuICAgICAgICogT25seSBXT0ZGIGFuZCBFT1QgbWltZSB0eXBlcyBmb3IgZm9udHMgYXJlICdyZWFsJ1xuICAgICAgICogc2VlIGh0dHA6Ly93d3cuaWFuYS5vcmcvYXNzaWdubWVudHMvbWVkaWEtdHlwZXMvbWVkaWEtdHlwZXMueGh0bWxcbiAgICAgICAqL1xuICAgICAgdmFyIFdPRkYgPSAnYXBwbGljYXRpb24vZm9udC13b2ZmJztcbiAgICAgIHZhciBKUEVHID0gJ2ltYWdlL2pwZWcnO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICAnd29mZic6IFdPRkYsXG4gICAgICAgICd3b2ZmMic6IFdPRkYsXG4gICAgICAgICd0dGYnOiAnYXBwbGljYXRpb24vZm9udC10cnVldHlwZScsXG4gICAgICAgICdlb3QnOiAnYXBwbGljYXRpb24vdm5kLm1zLWZvbnRvYmplY3QnLFxuICAgICAgICAncG5nJzogJ2ltYWdlL3BuZycsXG4gICAgICAgICdqcGcnOiBKUEVHLFxuICAgICAgICAnanBlZyc6IEpQRUcsXG4gICAgICAgICdnaWYnOiAnaW1hZ2UvZ2lmJyxcbiAgICAgICAgJ3RpZmYnOiAnaW1hZ2UvdGlmZicsXG4gICAgICAgICdzdmcnOiAnaW1hZ2Uvc3ZnK3htbCdcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VFeHRlbnNpb24odXJsKSB7XG4gICAgICB2YXIgbWF0Y2ggPSAvXFwuKFteXFwuXFwvXSo/KSQvZy5leGVjKHVybCk7XG4gICAgICBpZiAobWF0Y2gpIHJldHVybiBtYXRjaFsxXTtcbiAgICAgIGVsc2UgcmV0dXJuICcnO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1pbWVUeXBlKHVybCkge1xuICAgICAgdmFyIGV4dGVuc2lvbiA9IHBhcnNlRXh0ZW5zaW9uKHVybCkudG9Mb3dlckNhc2UoKTtcbiAgICAgIHJldHVybiBtaW1lcygpW2V4dGVuc2lvbl0gfHwgJyc7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNEYXRhVXJsKHVybCkge1xuICAgICAgcmV0dXJuIHVybC5zZWFyY2goL14oZGF0YTopLykgIT09IC0xO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRvQmxvYihjYW52YXMsIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICB2YXIgYmluYXJ5U3RyaW5nID0gd2luZG93LmF0b2IoY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvanBlZycsIG9wdGlvbnMucXVhbGl0eSB8fCAxLjApLnNwbGl0KCcsJylbMV0pO1xuICAgICAgICB2YXIgbGVuZ3RoID0gYmluYXJ5U3RyaW5nLmxlbmd0aDtcbiAgICAgICAgdmFyIGJpbmFyeUFycmF5ID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKVxuICAgICAgICAgIGJpbmFyeUFycmF5W2ldID0gYmluYXJ5U3RyaW5nLmNoYXJDb2RlQXQoaSk7XG5cbiAgICAgICAgcmVzb2x2ZShuZXcgQmxvYihbYmluYXJ5QXJyYXldLCB7XG4gICAgICAgICAgdHlwZTogJ2ltYWdlL2pwZWcnXG4gICAgICAgIH0pKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhbnZhc1RvQmxvYihjYW52YXMsIG9wdGlvbnMpIHtcbiAgICAgIGlmIChjYW52YXMudG9CbG9iKVxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICBjYW52YXMudG9CbG9iKHJlc29sdmUsICdpbWFnZS9qcGVnJywgb3B0aW9ucy5xdWFsaXR5IHx8IDEuMCk7XG4gICAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gdG9CbG9iKGNhbnZhcywgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzb2x2ZVVybCh1cmwsIGJhc2VVcmwpIHtcbiAgICAgIHZhciBkb2MgPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoKTtcbiAgICAgIHZhciBiYXNlID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2Jhc2UnKTtcbiAgICAgIGRvYy5oZWFkLmFwcGVuZENoaWxkKGJhc2UpO1xuICAgICAgdmFyIGEgPSBkb2MuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgZG9jLmJvZHkuYXBwZW5kQ2hpbGQoYSk7XG4gICAgICBiYXNlLmhyZWYgPSBiYXNlVXJsO1xuICAgICAgYS5ocmVmID0gdXJsO1xuICAgICAgcmV0dXJuIGEuaHJlZjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1aWQoKSB7XG4gICAgICB2YXIgaW5kZXggPSAwO1xuXG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJ3UnICsgZm91clJhbmRvbUNoYXJzKCkgKyBpbmRleCsrO1xuXG4gICAgICAgIGZ1bmN0aW9uIGZvdXJSYW5kb21DaGFycygpIHtcbiAgICAgICAgICAvKiBzZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNjI0ODcyMi8yNTE5MzczICovXG4gICAgICAgICAgcmV0dXJuICgnMDAwMCcgKyAoTWF0aC5yYW5kb20oKSAqIE1hdGgucG93KDM2LCA0KSA8PCAwKS50b1N0cmluZygzNikpLnNsaWNlKC00KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYWtlSW1hZ2UodXJpKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB2YXIgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaW1hZ2Uub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJlc29sdmUoaW1hZ2UpO1xuICAgICAgICB9O1xuICAgICAgICBpbWFnZS5vbmVycm9yID0gcmVqZWN0O1xuICAgICAgICBpbWFnZS5zcmMgPSB1cmk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRBbmRFbmNvZGUodXJsKSB7XG4gICAgICB2YXIgVElNRU9VVCA9IDMwMDAwO1xuICAgICAgaWYgKGRvbXRvaW1hZ2UuaW1wbC5vcHRpb25zLmNhY2hlQnVzdCkge1xuICAgICAgICAvLyBDYWNoZSBieXBhc3Mgc28gd2UgZG9udCBoYXZlIENPUlMgaXNzdWVzIHdpdGggY2FjaGVkIGltYWdlc1xuICAgICAgICAvLyBTb3VyY2U6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL2RvY3MvV2ViL0FQSS9YTUxIdHRwUmVxdWVzdC9Vc2luZ19YTUxIdHRwUmVxdWVzdCNCeXBhc3NpbmdfdGhlX2NhY2hlXG4gICAgICAgIHVybCArPSAoKC9cXD8vKS50ZXN0KHVybCkgPyBcIiZcIiA6IFwiP1wiKSArIChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgICAgIHJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZG9uZTtcbiAgICAgICAgcmVxdWVzdC5vbnRpbWVvdXQgPSB0aW1lb3V0O1xuICAgICAgICByZXF1ZXN0LnJlc3BvbnNlVHlwZSA9ICdibG9iJztcbiAgICAgICAgcmVxdWVzdC50aW1lb3V0ID0gVElNRU9VVDtcbiAgICAgICAgcmVxdWVzdC5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xuICAgICAgICByZXF1ZXN0LnNlbmQoKTtcblxuICAgICAgICB2YXIgcGxhY2Vob2xkZXI7XG4gICAgICAgIGlmIChkb210b2ltYWdlLmltcGwub3B0aW9ucy5pbWFnZVBsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgdmFyIHNwbGl0ID0gZG9tdG9pbWFnZS5pbXBsLm9wdGlvbnMuaW1hZ2VQbGFjZWhvbGRlci5zcGxpdCgvLC8pO1xuICAgICAgICAgIGlmIChzcGxpdCAmJiBzcGxpdFsxXSkge1xuICAgICAgICAgICAgcGxhY2Vob2xkZXIgPSBzcGxpdFsxXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkb25lKCkge1xuICAgICAgICAgIGlmIChyZXF1ZXN0LnJlYWR5U3RhdGUgIT09IDQpIHJldHVybjtcblxuICAgICAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyAhPT0gMjAwKSB7XG4gICAgICAgICAgICBpZiAocGxhY2Vob2xkZXIpIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZShwbGFjZWhvbGRlcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBmYWlsKCdjYW5ub3QgZmV0Y2ggcmVzb3VyY2U6ICcgKyB1cmwgKyAnLCBzdGF0dXM6ICcgKyByZXF1ZXN0LnN0YXR1cyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgZW5jb2RlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgICAgZW5jb2Rlci5vbmxvYWRlbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IGVuY29kZXIucmVzdWx0LnNwbGl0KC8sLylbMV07XG4gICAgICAgICAgICByZXNvbHZlKGNvbnRlbnQpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgZW5jb2Rlci5yZWFkQXNEYXRhVVJMKHJlcXVlc3QucmVzcG9uc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdGltZW91dCgpIHtcbiAgICAgICAgICBpZiAocGxhY2Vob2xkZXIpIHtcbiAgICAgICAgICAgIHJlc29sdmUocGxhY2Vob2xkZXIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmYWlsKCd0aW1lb3V0IG9mICcgKyBUSU1FT1VUICsgJ21zIG9jY3VyZWQgd2hpbGUgZmV0Y2hpbmcgcmVzb3VyY2U6ICcgKyB1cmwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGZhaWwobWVzc2FnZSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7XG4gICAgICAgICAgcmVzb2x2ZSgnJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRhdGFBc1VybChjb250ZW50LCB0eXBlKSB7XG4gICAgICByZXR1cm4gJ2RhdGE6JyArIHR5cGUgKyAnO2Jhc2U2NCwnICsgY29udGVudDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlc2NhcGUoc3RyaW5nKSB7XG4gICAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoLyhbLiorP14ke30oKXxcXFtcXF1cXC9cXFxcXSkvZywgJ1xcXFwkMScpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlbGF5KG1zKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKGFyZykge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlc29sdmUoYXJnKTtcbiAgICAgICAgICB9LCBtcyk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhc0FycmF5KGFycmF5TGlrZSkge1xuICAgICAgdmFyIGFycmF5ID0gW107XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXlMaWtlLmxlbmd0aDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIGFycmF5LnB1c2goYXJyYXlMaWtlW2ldKTtcbiAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlc2NhcGVYaHRtbChzdHJpbmcpIHtcbiAgICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvIy9nLCAnJTIzJykucmVwbGFjZSgvXFxuL2csICclMEEnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB3aWR0aChub2RlKSB7XG4gICAgICB2YXIgbGVmdEJvcmRlciA9IHB4KG5vZGUsICdib3JkZXItbGVmdC13aWR0aCcpO1xuICAgICAgdmFyIHJpZ2h0Qm9yZGVyID0gcHgobm9kZSwgJ2JvcmRlci1yaWdodC13aWR0aCcpO1xuICAgICAgcmV0dXJuIG5vZGUuc2Nyb2xsV2lkdGggKyBsZWZ0Qm9yZGVyICsgcmlnaHRCb3JkZXI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGVpZ2h0KG5vZGUpIHtcbiAgICAgIHZhciB0b3BCb3JkZXIgPSBweChub2RlLCAnYm9yZGVyLXRvcC13aWR0aCcpO1xuICAgICAgdmFyIGJvdHRvbUJvcmRlciA9IHB4KG5vZGUsICdib3JkZXItYm90dG9tLXdpZHRoJyk7XG4gICAgICByZXR1cm4gbm9kZS5zY3JvbGxIZWlnaHQgKyB0b3BCb3JkZXIgKyBib3R0b21Cb3JkZXI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcHgobm9kZSwgc3R5bGVQcm9wZXJ0eSkge1xuICAgICAgdmFyIHZhbHVlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUobm9kZSkuZ2V0UHJvcGVydHlWYWx1ZShzdHlsZVByb3BlcnR5KTtcbiAgICAgIHJldHVybiBwYXJzZUZsb2F0KHZhbHVlLnJlcGxhY2UoJ3B4JywgJycpKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBuZXdJbmxpbmVyKCkge1xuICAgIHZhciBVUkxfUkVHRVggPSAvdXJsXFwoWydcIl0/KFteJ1wiXSs/KVsnXCJdP1xcKS9nO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlubGluZUFsbDogaW5saW5lQWxsLFxuICAgICAgc2hvdWxkUHJvY2Vzczogc2hvdWxkUHJvY2VzcyxcbiAgICAgIGltcGw6IHtcbiAgICAgICAgcmVhZFVybHM6IHJlYWRVcmxzLFxuICAgICAgICBpbmxpbmU6IGlubGluZVxuICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBzaG91bGRQcm9jZXNzKHN0cmluZykge1xuICAgICAgcmV0dXJuIHN0cmluZy5zZWFyY2goVVJMX1JFR0VYKSAhPT0gLTE7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVhZFVybHMoc3RyaW5nKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICB2YXIgbWF0Y2g7XG4gICAgICB3aGlsZSAoKG1hdGNoID0gVVJMX1JFR0VYLmV4ZWMoc3RyaW5nKSkgIT09IG51bGwpIHtcbiAgICAgICAgcmVzdWx0LnB1c2gobWF0Y2hbMV0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdC5maWx0ZXIoZnVuY3Rpb24gKHVybCkge1xuICAgICAgICByZXR1cm4gIXV0aWwuaXNEYXRhVXJsKHVybCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbmxpbmUoc3RyaW5nLCB1cmwsIGJhc2VVcmwsIGdldCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh1cmwpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgICByZXR1cm4gYmFzZVVybCA/IHV0aWwucmVzb2x2ZVVybCh1cmwsIGJhc2VVcmwpIDogdXJsO1xuICAgICAgICB9KVxuICAgICAgICAudGhlbihnZXQgfHwgdXRpbC5nZXRBbmRFbmNvZGUpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgcmV0dXJuIHV0aWwuZGF0YUFzVXJsKGRhdGEsIHV0aWwubWltZVR5cGUodXJsKSk7XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhVXJsKSB7XG4gICAgICAgICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKHVybEFzUmVnZXgodXJsKSwgJyQxJyArIGRhdGFVcmwgKyAnJDMnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIGZ1bmN0aW9uIHVybEFzUmVnZXgodXJsKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVnRXhwKCcodXJsXFxcXChbXFwnXCJdPykoJyArIHV0aWwuZXNjYXBlKHVybCkgKyAnKShbXFwnXCJdP1xcXFwpKScsICdnJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5saW5lQWxsKHN0cmluZywgYmFzZVVybCwgZ2V0KSB7XG4gICAgICBpZiAobm90aGluZ1RvSW5saW5lKCkpIHJldHVybiBQcm9taXNlLnJlc29sdmUoc3RyaW5nKTtcblxuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShzdHJpbmcpXG4gICAgICAgIC50aGVuKHJlYWRVcmxzKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAodXJscykge1xuICAgICAgICAgIHZhciBkb25lID0gUHJvbWlzZS5yZXNvbHZlKHN0cmluZyk7XG4gICAgICAgICAgdXJscy5mb3JFYWNoKGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgICAgIGRvbmUgPSBkb25lLnRoZW4oZnVuY3Rpb24gKHN0cmluZykge1xuICAgICAgICAgICAgICByZXR1cm4gaW5saW5lKHN0cmluZywgdXJsLCBiYXNlVXJsLCBnZXQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIGRvbmU7XG4gICAgICAgIH0pO1xuXG4gICAgICBmdW5jdGlvbiBub3RoaW5nVG9JbmxpbmUoKSB7XG4gICAgICAgIHJldHVybiAhc2hvdWxkUHJvY2VzcyhzdHJpbmcpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG5ld0ZvbnRGYWNlcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzb2x2ZUFsbDogcmVzb2x2ZUFsbCxcbiAgICAgIGltcGw6IHtcbiAgICAgICAgcmVhZEFsbDogcmVhZEFsbFxuICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiByZXNvbHZlQWxsKCkge1xuICAgICAgcmV0dXJuIHJlYWRBbGwoZG9jdW1lbnQpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uICh3ZWJGb250cykge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChcbiAgICAgICAgICAgIHdlYkZvbnRzLm1hcChmdW5jdGlvbiAod2ViRm9udCkge1xuICAgICAgICAgICAgICByZXR1cm4gd2ViRm9udC5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICk7XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChjc3NTdHJpbmdzKSB7XG4gICAgICAgICAgcmV0dXJuIGNzc1N0cmluZ3Muam9pbignXFxuJyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlYWRBbGwoKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHV0aWwuYXNBcnJheShkb2N1bWVudC5zdHlsZVNoZWV0cykpXG4gICAgICAgIC50aGVuKGdldENzc1J1bGVzKVxuICAgICAgICAudGhlbihzZWxlY3RXZWJGb250UnVsZXMpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChydWxlcykge1xuICAgICAgICAgIHJldHVybiBydWxlcy5tYXAobmV3V2ViRm9udCk7XG4gICAgICAgIH0pO1xuXG4gICAgICBmdW5jdGlvbiBzZWxlY3RXZWJGb250UnVsZXMoY3NzUnVsZXMpIHtcbiAgICAgICAgcmV0dXJuIGNzc1J1bGVzXG4gICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAocnVsZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJ1bGUudHlwZSA9PT0gQ1NTUnVsZS5GT05UX0ZBQ0VfUlVMRTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHJ1bGUpIHtcbiAgICAgICAgICAgIHJldHVybiBpbmxpbmVyLnNob3VsZFByb2Nlc3MocnVsZS5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdzcmMnKSk7XG4gICAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGdldENzc1J1bGVzKHN0eWxlU2hlZXRzKSB7XG4gICAgICAgIHZhciBjc3NSdWxlcyA9IFtdO1xuICAgICAgICBzdHlsZVNoZWV0cy5mb3JFYWNoKGZ1bmN0aW9uIChzaGVldCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB1dGlsLmFzQXJyYXkoc2hlZXQuY3NzUnVsZXMgfHwgW10pLmZvckVhY2goY3NzUnVsZXMucHVzaC5iaW5kKGNzc1J1bGVzKSk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIHdoaWxlIHJlYWRpbmcgQ1NTIHJ1bGVzIGZyb20gJyArIHNoZWV0LmhyZWYsIGUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGNzc1J1bGVzO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBuZXdXZWJGb250KHdlYkZvbnRSdWxlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcmVzb2x2ZTogZnVuY3Rpb24gcmVzb2x2ZSgpIHtcbiAgICAgICAgICAgIHZhciBiYXNlVXJsID0gKHdlYkZvbnRSdWxlLnBhcmVudFN0eWxlU2hlZXQgfHwge30pLmhyZWY7XG4gICAgICAgICAgICByZXR1cm4gaW5saW5lci5pbmxpbmVBbGwod2ViRm9udFJ1bGUuY3NzVGV4dCwgYmFzZVVybCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzcmM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB3ZWJGb250UnVsZS5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdzcmMnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbmV3SW1hZ2VzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBpbmxpbmVBbGw6IGlubGluZUFsbCxcbiAgICAgIGltcGw6IHtcbiAgICAgICAgbmV3SW1hZ2U6IG5ld0ltYWdlXG4gICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIG5ld0ltYWdlKGVsZW1lbnQpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlubGluZTogaW5saW5lXG4gICAgICB9O1xuXG4gICAgICBmdW5jdGlvbiBpbmxpbmUoZ2V0KSB7XG4gICAgICAgIGlmICh1dGlsLmlzRGF0YVVybChlbGVtZW50LnNyYykpIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGVsZW1lbnQuc3JjKVxuICAgICAgICAgIC50aGVuKGdldCB8fCB1dGlsLmdldEFuZEVuY29kZSlcbiAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIHV0aWwuZGF0YUFzVXJsKGRhdGEsIHV0aWwubWltZVR5cGUoZWxlbWVudC5zcmMpKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhVXJsKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICBlbGVtZW50Lm9ubG9hZCA9IHJlc29sdmU7XG4gICAgICAgICAgICAgIGVsZW1lbnQub25lcnJvciA9IHJlamVjdDtcbiAgICAgICAgICAgICAgZWxlbWVudC5zcmMgPSBkYXRhVXJsO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5saW5lQWxsKG5vZGUpIHtcbiAgICAgIGlmICghKG5vZGUgaW5zdGFuY2VvZiBFbGVtZW50KSkgcmV0dXJuIFByb21pc2UucmVzb2x2ZShub2RlKTtcblxuICAgICAgcmV0dXJuIGlubGluZUJhY2tncm91bmQobm9kZSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudClcbiAgICAgICAgICAgIHJldHVybiBuZXdJbWFnZShub2RlKS5pbmxpbmUoKTtcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoXG4gICAgICAgICAgICAgIHV0aWwuYXNBcnJheShub2RlLmNoaWxkTm9kZXMpLm1hcChmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5saW5lQWxsKGNoaWxkKTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuXG4gICAgICBmdW5jdGlvbiBpbmxpbmVCYWNrZ3JvdW5kKG5vZGUpIHtcbiAgICAgICAgdmFyIGJhY2tncm91bmQgPSBub2RlLnN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ2JhY2tncm91bmQnKTtcblxuICAgICAgICBpZiAoIWJhY2tncm91bmQpIHJldHVybiBQcm9taXNlLnJlc29sdmUobm9kZSk7XG5cbiAgICAgICAgcmV0dXJuIGlubGluZXIuaW5saW5lQWxsKGJhY2tncm91bmQpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGlubGluZWQpIHtcbiAgICAgICAgICAgIG5vZGUuc3R5bGUuc2V0UHJvcGVydHkoXG4gICAgICAgICAgICAgICdiYWNrZ3JvdW5kJyxcbiAgICAgICAgICAgICAgaW5saW5lZCxcbiAgICAgICAgICAgICAgbm9kZS5zdHlsZS5nZXRQcm9wZXJ0eVByaW9yaXR5KCdiYWNrZ3JvdW5kJylcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pKHRoaXMpO1xuIiwgImltcG9ydCBFeHBvcnRJbWFnZVBsdWdpbiBmcm9tICcuL0V4cG9ydEltYWdlUGx1Z2luJztcblxuZXhwb3J0IGRlZmF1bHQgRXhwb3J0SW1hZ2VQbHVnaW47XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBNYXJrZG93blZpZXcsIE1hcmtkb3duUHJldmlld1ZpZXcsIE1hcmtkb3duUmVuZGVyZXIsIE5vdGljZSwgUGx1Z2luIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgc2F2ZUFzIH0gZnJvbSAnZmlsZS1zYXZlcic7XG5pbXBvcnQgeyBFeHBvcnRJbWFnZVNldHRpbmdUYWIgfSBmcm9tICcuL0V4cG9ydEltYWdlU2V0dGluZ1RhYic7XG5pbXBvcnQgeyBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSBcIi4vY29uc3RlbnRzXCI7XG5pbXBvcnQgeyBjbG9uZU5vZGUsIHRvQmxvYldpdGhDbG9uZWREb20gfSBmcm9tICdkb20tdG8taW1hZ2UnO1xuXG5mdW5jdGlvbiBkZWxheShtczogbnVtYmVyKTogUHJvbWlzZTx1bmRlZmluZWQ+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICByZXNvbHZlKHVuZGVmaW5lZCk7XG4gICAgfSwgbXMpO1xuICB9KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXhwb3J0SW1hZ2VQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICBzZXR0aW5nczogRXhwb3J0SW1hZ2VTZXR0aW5ncztcblxuICBhc3luYyBvbmxvYWQoKSB7XG4gICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuICAgIC8vIFRoaXMgYWRkcyBhIGNvbXBsZXggY29tbWFuZCB0aGF0IGNhbiBjaGVjayB3aGV0aGVyIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBhcHAgYWxsb3dzIGV4ZWN1dGlvbiBvZiB0aGUgY29tbWFuZFxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ2V4cG9ydC10by1pbWFnZS16aCcsXG4gICAgICBuYW1lOiAnRXhwb3J0IHRvIGltYWdlJyxcbiAgICAgIGNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbikgPT4ge1xuICAgICAgICAvLyBDb25kaXRpb25zIHRvIGNoZWNrXG4gICAgICAgIGNvbnN0IG1hcmtkb3duVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgICAgIGlmIChtYXJrZG93blZpZXc/LmdldE1vZGUoKSA9PT0gJ3ByZXZpZXcnKSB7XG4gICAgICAgICAgLy8gSWYgY2hlY2tpbmcgaXMgdHJ1ZSwgd2UncmUgc2ltcGx5IFwiY2hlY2tpbmdcIiBpZiB0aGUgY29tbWFuZCBjYW4gYmUgcnVuLlxuICAgICAgICAgIC8vIElmIGNoZWNraW5nIGlzIGZhbHNlLCB0aGVuIHdlIHdhbnQgdG8gYWN0dWFsbHkgcGVyZm9ybSB0aGUgb3BlcmF0aW9uLlxuICAgICAgICAgIGlmICghY2hlY2tpbmcpIHtcbiAgICAgICAgICAgIChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGVsID0gbWFya2Rvd25WaWV3LmNvbnRlbnRFbC5maW5kKCcubWFya2Rvd24tcHJldmlldy1zZWN0aW9uJyk7XG4gICAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGVsLnBhcmVudEVsZW1lbnQhO1xuXG4gICAgICAgICAgICAgIGNvbnN0IHNjcm9sbENhY2hlID0gY29udGFpbmVyLnNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgY29udGFpbmVyLnNjcm9sbFRvKDAsIDApO1xuICAgICAgICAgICAgICBhd2FpdCBkZWxheSg0MCk7XG4gICAgICAgICAgICAgIGNvbnN0IHRvdGFsSGVpZ2h0ID0gZWwuc2Nyb2xsSGVpZ2h0O1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2NvbGxIZWlnaHQ6JywgdG90YWxIZWlnaHQpO1xuICAgICAgICAgICAgICBjb25zdCBzY3JlZW5IZWlnaHQgPSBtYXJrZG93blZpZXcuY29udGVudEVsLmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgICAgbGV0IHNjcm9sbEluZGV4ID0gMDtcbiAgICAgICAgICAgICAgbGV0IGhlaWdodCA9IGVsLmNsaWVudEhlaWdodCAtIHBhcnNlRmxvYXQoZWwuc3R5bGUucGFkZGluZ0JvdHRvbSk7XG4gICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWwuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAvLyBoZWlnaHQgKz0gZWwuY2hpbGRyZW5baV0uY2xpZW50SGVpZ2h0O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNvbnN0IGNsb25lID0gYXdhaXQgY2xvbmVOb2RlKGVsKTtcbiAgICAgICAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihyZWNvcmRzID0+IHJlY29yZHMuZm9yRWFjaChyID0+IHIuYWRkZWROb2Rlcy5mb3JFYWNoKGFzeW5jIG5vZGUgPT4ge1xuICAgICAgICAgICAgICAgIGNsb25lLmFwcGVuZChhd2FpdCBjbG9uZU5vZGUobm9kZSBhcyBIVE1MRWxlbWVudCkpO1xuICAgICAgICAgICAgICAgIC8vIGhlaWdodCArPSAobm9kZSBhcyBIVE1MRWxlbWVudCkuY2xpZW50SGVpZ2h0O1xuICAgICAgICAgICAgICB9KSkpO1xuICAgICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGVsLCB7XG4gICAgICAgICAgICAgICAgY2hpbGRMaXN0OiB0cnVlXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB3aGlsZSAoc2Nyb2xsSW5kZXggPD0gdG90YWxIZWlnaHQgLSBzY3JlZW5IZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBzY3JvbGxJbmRleCArPSBzY3JlZW5IZWlnaHQ7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLnNjcm9sbFRvKDAsIHNjcm9sbEluZGV4KTtcbiAgICAgICAgICAgICAgICBhd2FpdCBkZWxheSg0MCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY29udGFpbmVyLnNjcm9sbFRvKDAsIHNjcm9sbENhY2hlKTtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coZWwuY2xpZW50V2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCB0b0Jsb2JXaXRoQ2xvbmVkRG9tKGVsLCBjbG9uZSwge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAoZWwuY2xpZW50V2lkdGggKyAyMDApICogMixcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IChoZWlnaHQgKyAxMDApICogMixcbiAgICAgICAgICAgICAgICBiZ2NvbG9yOiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbC5jbG9zZXN0KCcudmlldy1jb250ZW50JykhKS5iYWNrZ3JvdW5kQ29sb3IsXG4gICAgICAgICAgICAgICAgcXVhbGl0eTogMC45LFxuICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06ICdzY2FsZSgyKScsXG4gICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1PcmlnaW46ICd0b3AgbGVmdCcsXG4gICAgICAgICAgICAgICAgICBwYWRkaW5nVG9wOiAnNTBweCcsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgc2F2ZUFzKGJsb2IsIGAke21hcmtkb3duVmlldy5nZXREaXNwbGF5VGV4dCgpLnJlcGxhY2UoL1xccysvZywgJ18nKX0uanBnYCk7XG4gICAgICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIH0pKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gVGhpcyBjb21tYW5kIHdpbGwgb25seSBzaG93IHVwIGluIENvbW1hbmQgUGFsZXR0ZSB3aGVuIHRoZSBjaGVjayBmdW5jdGlvbiByZXR1cm5zIHRydWVcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG5cbiAgfVxuXG4gIG9udW5sb2FkKCkge1xuICB9XG5cbiAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuICB9XG5cbiAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gIH1cbn1cbiIsICIvKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvcHJlZmVyLWRlZmF1bHQtZXhwb3J0ICovXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogRXhwb3J0SW1hZ2VTZXR0aW5ncyA9IHtcbiAgd2lkdGg6ICc0MDAnLFxufTtcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWtCQSxpQkFBYyxJQUFNLElBQU07QUFBQSxlQUNKLEFBQWhCLE9BQU8sTUFBUyxjQUFhLEtBQU8sRUFBRSxTQUFPLE1BQVQsSUFDZixBQUFoQixPQUFPLE1BQVMsWUFDdkIsU0FBUSxLQUFLLG9EQUFiLEdBQ0EsS0FBTyxFQUFFLFNBQVMsQ0FBQyxHQUFaLElBS0wsR0FBSyxXQUFXLDZFQUE2RSxLQUFLLEdBQUssSUFBdkYsSUFDWCxJQUFJLEtBQUssQ0FBQSxVQUE4QixFQUE5QixHQUFxQyxFQUFFLE1BQU0sR0FBSyxLQUFiLENBQTlDLElBRUY7TUFDUjtBQUVELGlCQUFtQixJQUFLLElBQU0sSUFBTTtBQUNsQyxZQUFJLEtBQU0sSUFBSTtBQUNkLFdBQUksS0FBSyxPQUFPLEVBQWhCLEdBQ0EsR0FBSSxlQUFlLFFBQ25CLEdBQUksU0FBUyxXQUFZO0FBQ3ZCLFlBQU8sR0FBSSxVQUFVLElBQU0sRUFBckI7UUFDUCxHQUNELEdBQUksVUFBVSxXQUFZO0FBQ3hCLGtCQUFRLE1BQU0seUJBQWQ7UUFD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
