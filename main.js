/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target, mod));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// node_modules/file-saver/dist/FileSaver.min.js
var require_FileSaver_min = __commonJS({
  "node_modules/file-saver/dist/FileSaver.min.js"(exports, module2) {
    (function(a, b) {
      if (typeof define == "function" && define.amd)
        define([], b);
      else if (typeof exports != "undefined")
        b();
      else {
        b(), a.FileSaver = { exports: {} }.exports;
      }
    })(exports, function() {
      "use strict";
      function b(a2, b2) {
        return typeof b2 == "undefined" ? b2 = { autoBom: false } : typeof b2 != "object" && (console.warn("Deprecated: Expected third argument to be a object"), b2 = { autoBom: !b2 }), b2.autoBom && /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a2.type) ? new Blob(["\uFEFF", a2], { type: a2.type }) : a2;
      }
      function c(a2, b2, c2) {
        var d2 = new XMLHttpRequest();
        d2.open("GET", a2), d2.responseType = "blob", d2.onload = function() {
          g(d2.response, b2, c2);
        }, d2.onerror = function() {
          console.error("could not download file");
        }, d2.send();
      }
      function d(a2) {
        var b2 = new XMLHttpRequest();
        b2.open("HEAD", a2, false);
        try {
          b2.send();
        } catch (a3) {
        }
        return 200 <= b2.status && 299 >= b2.status;
      }
      function e(a2) {
        try {
          a2.dispatchEvent(new MouseEvent("click"));
        } catch (c2) {
          var b2 = document.createEvent("MouseEvents");
          b2.initMouseEvent("click", true, true, window, 0, 0, 0, 80, 20, false, false, false, false, 0, null), a2.dispatchEvent(b2);
        }
      }
      var f = typeof window == "object" && window.window === window ? window : typeof self == "object" && self.self === self ? self : typeof global == "object" && global.global === global ? global : void 0, a = f.navigator && /Macintosh/.test(navigator.userAgent) && /AppleWebKit/.test(navigator.userAgent) && !/Safari/.test(navigator.userAgent), g = f.saveAs || (typeof window != "object" || window !== f ? function() {
      } : "download" in HTMLAnchorElement.prototype && !a ? function(b2, g2, h) {
        var i = f.URL || f.webkitURL, j = document.createElement("a");
        g2 = g2 || b2.name || "download", j.download = g2, j.rel = "noopener", typeof b2 == "string" ? (j.href = b2, j.origin === location.origin ? e(j) : d(j.href) ? c(b2, g2, h) : e(j, j.target = "_blank")) : (j.href = i.createObjectURL(b2), setTimeout(function() {
          i.revokeObjectURL(j.href);
        }, 4e4), setTimeout(function() {
          e(j);
        }, 0));
      } : "msSaveOrOpenBlob" in navigator ? function(f2, g2, h) {
        if (g2 = g2 || f2.name || "download", typeof f2 != "string")
          navigator.msSaveOrOpenBlob(b(f2, h), g2);
        else if (d(f2))
          c(f2, g2, h);
        else {
          var i = document.createElement("a");
          i.href = f2, i.target = "_blank", setTimeout(function() {
            e(i);
          });
        }
      } : function(b2, d2, e2, g2) {
        if (g2 = g2 || open("", "_blank"), g2 && (g2.document.title = g2.document.body.innerText = "downloading..."), typeof b2 == "string")
          return c(b2, d2, e2);
        var h = b2.type === "application/octet-stream", i = /constructor/i.test(f.HTMLElement) || f.safari, j = /CriOS\/[\d]+/.test(navigator.userAgent);
        if ((j || h && i || a) && typeof FileReader != "undefined") {
          var k = new FileReader();
          k.onloadend = function() {
            var a2 = k.result;
            a2 = j ? a2 : a2.replace(/^data:[^;]*;/, "data:attachment/file;"), g2 ? g2.location.href = a2 : location = a2, g2 = null;
          }, k.readAsDataURL(b2);
        } else {
          var l = f.URL || f.webkitURL, m = l.createObjectURL(b2);
          g2 ? g2.location = m : location.href = m, g2 = null, setTimeout(function() {
            l.revokeObjectURL(m);
          }, 4e4);
        }
      });
      f.saveAs = g.saveAs = g, typeof module2 != "undefined" && (module2.exports = g);
    });
  }
});

// dom-to-image.js
var require_dom_to_image = __commonJS({
  "dom-to-image.js"(exports, module2) {
    (function(global2) {
      "use strict";
      var util = newUtil();
      var inliner = newInliner();
      var fontFaces = newFontFaces();
      var images = newImages();
      var defaultOptions = {
        imagePlaceholder: void 0,
        cacheBust: false
      };
      var domtoimage = {
        toSvg,
        toPng,
        toJpeg,
        toBlob,
        toPixelData,
        toBlobWithClonedDom: toBlobWithClonedDom2,
        cloneNode: cloneNode2,
        impl: {
          fontFaces,
          images,
          util,
          inliner,
          options: {}
        }
      };
      if (typeof module2 !== "undefined")
        module2.exports = domtoimage;
      else
        global2.domtoimage = domtoimage;
      function toSvg(node, options) {
        options = options || {};
        copyOptions(options);
        return Promise.resolve(node).then(function(node2) {
          return cloneNode2(node2, options.filter, true);
        }).then(embedFonts).then(inlineImages).then(applyOptions).then(function(clone) {
          return makeSvgDataUri(clone, options.width || util.width(node), options.height || util.height(node));
        });
        function applyOptions(clone) {
          if (options.bgcolor)
            clone.style.backgroundColor = options.bgcolor;
          if (options.width)
            clone.style.width = options.width + "px";
          if (options.height)
            clone.style.height = options.height + "px";
          if (options.style)
            Object.keys(options.style).forEach(function(property) {
              clone.style[property] = options.style[property];
            });
          return clone;
        }
      }
      function toSvgWithClonedDom(node, clone, options) {
        options = options || {};
        copyOptions(options);
        return Promise.resolve(clone).then(embedFonts).then(inlineImages).then(applyOptions).then(function(clone2) {
          return makeSvgDataUri(clone2, options.width * 2, options.height * 2);
        });
        function applyOptions(clone2) {
          if (options.bgcolor)
            clone2.style.backgroundColor = options.bgcolor;
          if (options.width)
            clone2.style.width = options.width + "px";
          if (options.height)
            clone2.style.height = options.height + "px";
          if (options.style)
            Object.keys(options.style).forEach(function(property) {
              clone2.style[property] = options.style[property];
            });
          return clone2;
        }
      }
      function toPixelData(node, options) {
        return draw(node, options || {}).then(function(canvas) {
          return canvas.getContext("2d").getImageData(0, 0, util.width(node), util.height(node)).data;
        });
      }
      function toPng(node, options) {
        return draw(node, options || {}).then(function(canvas) {
          return canvas.toDataURL();
        });
      }
      function toJpeg(node, options) {
        options = options || {};
        return draw(node, options).then(function(canvas) {
          return canvas.toDataURL("image/jpeg", options.quality || 1);
        });
      }
      function toBlob(node, options) {
        return draw(node, options || {}).then(function(canvas) {
          return util.canvasToBlob(canvas, options);
        });
      }
      function toBlobWithClonedDom2(node, clone, options) {
        return drawWithClonedDom(node, clone, options || {}).then(function(canvas) {
          return util.canvasToBlob(canvas, options);
        });
      }
      function copyOptions(options) {
        if (typeof options.imagePlaceholder === "undefined") {
          domtoimage.impl.options.imagePlaceholder = defaultOptions.imagePlaceholder;
        } else {
          domtoimage.impl.options.imagePlaceholder = options.imagePlaceholder;
        }
        if (typeof options.cacheBust === "undefined") {
          domtoimage.impl.options.cacheBust = defaultOptions.cacheBust;
        } else {
          domtoimage.impl.options.cacheBust = options.cacheBust;
        }
      }
      function draw(domNode, options) {
        return toSvg(domNode, options).then(util.makeImage).then(util.delay(100)).then(function(image) {
          var canvas = newCanvas(domNode);
          canvas.getContext("2d").drawImage(image, 0, 0);
          return canvas;
        });
        function newCanvas(domNode2) {
          var canvas = document.createElement("canvas");
          canvas.width = options.width || util.width(domNode2);
          canvas.height = options.height || util.height(domNode2);
          if (options.bgcolor) {
            var ctx = canvas.getContext("2d");
            ctx.fillStyle = options.bgcolor;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
          }
          return canvas;
        }
      }
      function drawWithClonedDom(domNode, clone, options) {
        return toSvgWithClonedDom(domNode, clone, options).then(util.makeImage).then(util.delay(100)).then(function(image) {
          var canvas = newCanvas();
          canvas.getContext("2d").drawImage(image, 0, 0, options.width * 2, options.height * 2);
          return canvas;
        });
        function newCanvas() {
          var canvas = document.createElement("canvas");
          canvas.width = options.width;
          canvas.height = options.height;
          if (options.bgcolor) {
            var ctx = canvas.getContext("2d");
            ctx.fillStyle = options.bgcolor;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
          }
          return canvas;
        }
      }
      function cloneNode2(node, filter, root) {
        if (!root && filter && !filter(node))
          return Promise.resolve();
        return Promise.resolve(node).then(makeNodeCopy).then(function(clone) {
          return cloneChildren(node, clone, filter);
        }).then(function(clone) {
          return processClone(node, clone);
        });
        function makeNodeCopy(node2) {
          if (node2 instanceof HTMLCanvasElement)
            return util.makeImage(node2.toDataURL());
          return node2.cloneNode(false);
        }
        function cloneChildren(original, clone, filter2) {
          var children = original.childNodes;
          if (children.length === 0)
            return Promise.resolve(clone);
          return cloneChildrenInOrder(clone, util.asArray(children), filter2).then(function() {
            return clone;
          });
          function cloneChildrenInOrder(parent, children2, filter3) {
            var done = Promise.resolve();
            children2.forEach(function(child) {
              done = done.then(function() {
                return cloneNode2(child, filter3);
              }).then(function(childClone) {
                if (childClone)
                  parent.appendChild(childClone);
              });
            });
            return done;
          }
        }
        function processClone(original, clone) {
          if (!(clone instanceof Element))
            return clone;
          return Promise.resolve().then(cloneStyle).then(clonePseudoElements).then(copyUserInput).then(fixSvg).then(function() {
            return clone;
          });
          function cloneStyle() {
            copyStyle(window.getComputedStyle(original), clone.style || {});
            function copyStyle(source, target) {
              if (source.cssText)
                target.cssText = source.cssText;
              else
                copyProperties(source, target);
              function copyProperties(source2, target2) {
                if (target2.setProperty) {
                  util.asArray(source2).forEach(function(name) {
                    target2.setProperty(name, source2.getPropertyValue(name), source2.getPropertyPriority(name));
                  });
                }
              }
            }
          }
          function clonePseudoElements() {
            [":before", ":after"].forEach(function(element) {
              clonePseudoElement(element);
            });
            function clonePseudoElement(element) {
              var style = window.getComputedStyle(original, element);
              var content = style.getPropertyValue("content");
              if (content === "" || content === "none")
                return;
              var className = util.uid();
              clone.className = clone.className + " " + className;
              var styleElement = document.createElement("style");
              styleElement.appendChild(formatPseudoElementStyle(className, element, style));
              clone.appendChild(styleElement);
              function formatPseudoElementStyle(className2, element2, style2) {
                var selector = "." + className2 + ":" + element2;
                var cssText = style2.cssText ? formatCssText(style2) : formatCssProperties(style2);
                return document.createTextNode(selector + "{" + cssText + "}");
                function formatCssText(style3) {
                  var content2 = style3.getPropertyValue("content");
                  return style3.cssText + " content: " + content2 + ";";
                }
                function formatCssProperties(style3) {
                  return util.asArray(style3).map(formatProperty).join("; ") + ";";
                  function formatProperty(name) {
                    return name + ": " + style3.getPropertyValue(name) + (style3.getPropertyPriority(name) ? " !important" : "");
                  }
                }
              }
            }
          }
          function copyUserInput() {
            if (original instanceof HTMLTextAreaElement)
              clone.innerHTML = original.value;
            if (original instanceof HTMLInputElement)
              clone.setAttribute("value", original.value);
          }
          function fixSvg() {
            if (!(clone instanceof SVGElement))
              return;
            clone.setAttribute("xmlns", "http://www.w3.org/2000/svg");
            if (!(clone instanceof SVGRectElement))
              return;
            ["width", "height"].forEach(function(attribute) {
              var value = clone.getAttribute(attribute);
              if (!value)
                return;
              clone.style.setProperty(attribute, value);
            });
          }
        }
      }
      function embedFonts(node) {
        return fontFaces.resolveAll().then(function(cssText) {
          var styleNode = document.createElement("style");
          node.appendChild(styleNode);
          styleNode.appendChild(document.createTextNode(cssText));
          return node;
        });
      }
      function inlineImages(node) {
        return images.inlineAll(node).then(function() {
          return node;
        });
      }
      function makeSvgDataUri(node, width, height) {
        return Promise.resolve(node).then(function(node2) {
          node2.setAttribute("xmlns", "http://www.w3.org/1999/xhtml");
          return new XMLSerializer().serializeToString(node2);
        }).then(util.escapeXhtml).then(function(xhtml) {
          return '<foreignObject x="0" y="0" width="100%" height="100%">' + xhtml + "</foreignObject>";
        }).then(function(foreignObject) {
          return '<svg xmlns="http://www.w3.org/2000/svg" width="' + width + '" height="' + height + '">' + foreignObject + "</svg>";
        }).then(function(svg) {
          return "data:image/svg+xml;charset=utf-8," + svg;
        });
      }
      function newUtil() {
        return {
          escape,
          parseExtension,
          mimeType,
          dataAsUrl,
          isDataUrl,
          canvasToBlob,
          resolveUrl,
          getAndEncode,
          uid: uid(),
          delay: delay2,
          asArray,
          escapeXhtml,
          makeImage,
          width,
          height
        };
        function mimes() {
          var WOFF = "application/font-woff";
          var JPEG = "image/jpeg";
          return {
            "woff": WOFF,
            "woff2": WOFF,
            "ttf": "application/font-truetype",
            "eot": "application/vnd.ms-fontobject",
            "png": "image/png",
            "jpg": JPEG,
            "jpeg": JPEG,
            "gif": "image/gif",
            "tiff": "image/tiff",
            "svg": "image/svg+xml"
          };
        }
        function parseExtension(url) {
          var match = /\.([^\.\/]*?)$/g.exec(url);
          if (match)
            return match[1];
          else
            return "";
        }
        function mimeType(url) {
          var extension = parseExtension(url).toLowerCase();
          return mimes()[extension] || "";
        }
        function isDataUrl(url) {
          return url.search(/^(data:)/) !== -1;
        }
        function toBlob2(canvas, options) {
          return new Promise(function(resolve) {
            var binaryString = window.atob(canvas.toDataURL("image/jpeg", options.quality || 1).split(",")[1]);
            var length = binaryString.length;
            var binaryArray = new Uint8Array(length);
            for (var i = 0; i < length; i++)
              binaryArray[i] = binaryString.charCodeAt(i);
            resolve(new Blob([binaryArray], {
              type: "image/jpeg"
            }));
          });
        }
        function canvasToBlob(canvas, options) {
          if (canvas.toBlob)
            return new Promise(function(resolve) {
              canvas.toBlob(resolve, "image/jpeg", options.quality || 1);
            });
          return toBlob2(canvas, options);
        }
        function resolveUrl(url, baseUrl) {
          var doc = document.implementation.createHTMLDocument();
          var base = doc.createElement("base");
          doc.head.appendChild(base);
          var a = doc.createElement("a");
          doc.body.appendChild(a);
          base.href = baseUrl;
          a.href = url;
          return a.href;
        }
        function uid() {
          var index = 0;
          return function() {
            return "u" + fourRandomChars() + index++;
            function fourRandomChars() {
              return ("0000" + (Math.random() * Math.pow(36, 4) << 0).toString(36)).slice(-4);
            }
          };
        }
        function makeImage(uri) {
          return new Promise(function(resolve, reject) {
            var image = new Image();
            image.onload = function() {
              resolve(image);
            };
            image.onerror = reject;
            image.src = uri;
          });
        }
        function getAndEncode(url) {
          var TIMEOUT = 3e4;
          if (domtoimage.impl.options.cacheBust) {
            url += (/\?/.test(url) ? "&" : "?") + new Date().getTime();
          }
          return new Promise(function(resolve) {
            var request = new XMLHttpRequest();
            request.onreadystatechange = done;
            request.ontimeout = timeout;
            request.responseType = "blob";
            request.timeout = TIMEOUT;
            request.open("GET", url, true);
            request.send();
            var placeholder;
            if (domtoimage.impl.options.imagePlaceholder) {
              var split = domtoimage.impl.options.imagePlaceholder.split(/,/);
              if (split && split[1]) {
                placeholder = split[1];
              }
            }
            function done() {
              if (request.readyState !== 4)
                return;
              if (request.status !== 200) {
                if (placeholder) {
                  resolve(placeholder);
                } else {
                  fail("cannot fetch resource: " + url + ", status: " + request.status);
                }
                return;
              }
              var encoder = new FileReader();
              encoder.onloadend = function() {
                var content = encoder.result.split(/,/)[1];
                resolve(content);
              };
              encoder.readAsDataURL(request.response);
            }
            function timeout() {
              if (placeholder) {
                resolve(placeholder);
              } else {
                fail("timeout of " + TIMEOUT + "ms occured while fetching resource: " + url);
              }
            }
            function fail(message) {
              console.error(message);
              resolve("");
            }
          });
        }
        function dataAsUrl(content, type) {
          return "data:" + type + ";base64," + content;
        }
        function escape(string) {
          return string.replace(/([.*+?^${}()|\[\]\/\\])/g, "\\$1");
        }
        function delay2(ms) {
          return function(arg) {
            return new Promise(function(resolve) {
              setTimeout(function() {
                resolve(arg);
              }, ms);
            });
          };
        }
        function asArray(arrayLike) {
          var array = [];
          var length = arrayLike.length;
          for (var i = 0; i < length; i++)
            array.push(arrayLike[i]);
          return array;
        }
        function escapeXhtml(string) {
          return string.replace(/#/g, "%23").replace(/\n/g, "%0A");
        }
        function width(node) {
          var leftBorder = px(node, "border-left-width");
          var rightBorder = px(node, "border-right-width");
          return node.scrollWidth + leftBorder + rightBorder;
        }
        function height(node) {
          var topBorder = px(node, "border-top-width");
          var bottomBorder = px(node, "border-bottom-width");
          return node.scrollHeight + topBorder + bottomBorder;
        }
        function px(node, styleProperty) {
          var value = window.getComputedStyle(node).getPropertyValue(styleProperty);
          return parseFloat(value.replace("px", ""));
        }
      }
      function newInliner() {
        var URL_REGEX = /url\(['"]?([^'"]+?)['"]?\)/g;
        return {
          inlineAll,
          shouldProcess,
          impl: {
            readUrls,
            inline
          }
        };
        function shouldProcess(string) {
          return string.search(URL_REGEX) !== -1;
        }
        function readUrls(string) {
          var result = [];
          var match;
          while ((match = URL_REGEX.exec(string)) !== null) {
            result.push(match[1]);
          }
          return result.filter(function(url) {
            return !util.isDataUrl(url);
          });
        }
        function inline(string, url, baseUrl, get) {
          return Promise.resolve(url).then(function(url2) {
            return baseUrl ? util.resolveUrl(url2, baseUrl) : url2;
          }).then(get || util.getAndEncode).then(function(data) {
            return util.dataAsUrl(data, util.mimeType(url));
          }).then(function(dataUrl) {
            return string.replace(urlAsRegex(url), "$1" + dataUrl + "$3");
          });
          function urlAsRegex(url2) {
            return new RegExp(`(url\\(['"]?)(` + util.escape(url2) + `)(['"]?\\))`, "g");
          }
        }
        function inlineAll(string, baseUrl, get) {
          if (nothingToInline())
            return Promise.resolve(string);
          return Promise.resolve(string).then(readUrls).then(function(urls) {
            var done = Promise.resolve(string);
            urls.forEach(function(url) {
              done = done.then(function(string2) {
                return inline(string2, url, baseUrl, get);
              });
            });
            return done;
          });
          function nothingToInline() {
            return !shouldProcess(string);
          }
        }
      }
      function newFontFaces() {
        return {
          resolveAll,
          impl: {
            readAll
          }
        };
        function resolveAll() {
          return readAll(document).then(function(webFonts) {
            return Promise.all(webFonts.map(function(webFont) {
              return webFont.resolve();
            }));
          }).then(function(cssStrings) {
            return cssStrings.join("\n");
          });
        }
        function readAll() {
          return Promise.resolve(util.asArray(document.styleSheets)).then(getCssRules).then(selectWebFontRules).then(function(rules) {
            return rules.map(newWebFont);
          });
          function selectWebFontRules(cssRules) {
            return cssRules.filter(function(rule) {
              return rule.type === CSSRule.FONT_FACE_RULE;
            }).filter(function(rule) {
              return inliner.shouldProcess(rule.style.getPropertyValue("src"));
            });
          }
          function getCssRules(styleSheets) {
            var cssRules = [];
            styleSheets.forEach(function(sheet) {
              try {
                util.asArray(sheet.cssRules || []).forEach(cssRules.push.bind(cssRules));
              } catch (e) {
                console.log("Error while reading CSS rules from " + sheet.href, e.toString());
              }
            });
            return cssRules;
          }
          function newWebFont(webFontRule) {
            return {
              resolve: function resolve() {
                var baseUrl = (webFontRule.parentStyleSheet || {}).href;
                return inliner.inlineAll(webFontRule.cssText, baseUrl);
              },
              src: function() {
                return webFontRule.style.getPropertyValue("src");
              }
            };
          }
        }
      }
      function newImages() {
        return {
          inlineAll,
          impl: {
            newImage
          }
        };
        function newImage(element) {
          return {
            inline
          };
          function inline(get) {
            if (util.isDataUrl(element.src))
              return Promise.resolve();
            return Promise.resolve(element.src).then(get || util.getAndEncode).then(function(data) {
              return util.dataAsUrl(data, util.mimeType(element.src));
            }).then(function(dataUrl) {
              return new Promise(function(resolve, reject) {
                element.onload = resolve;
                element.onerror = reject;
                element.src = dataUrl;
              });
            });
          }
        }
        function inlineAll(node) {
          if (!(node instanceof Element))
            return Promise.resolve(node);
          return inlineBackground(node).then(function() {
            if (node instanceof HTMLImageElement)
              return newImage(node).inline();
            else
              return Promise.all(util.asArray(node.childNodes).map(function(child) {
                return inlineAll(child);
              }));
          });
          function inlineBackground(node2) {
            try {
              var background = node2.style.getPropertyValue("background");
            } catch (e) {
              return Promise.resolve(node2);
            }
            if (!background)
              return Promise.resolve(node2);
            return inliner.inlineAll(background).then(function(inlined) {
              node2.style.setProperty("background", inlined, node2.style.getPropertyPriority("background"));
            }).then(function() {
              return node2;
            });
          }
        }
      }
    })(exports);
  }
});

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => main_default
});
module.exports = __toCommonJS(main_exports);

// ExportImagePlugin.ts
var import_obsidian = require("obsidian");
var import_file_saver = __toESM(require_FileSaver_min());

// constents.ts
var DEFAULT_SETTINGS = {
  width: "400"
};

// ExportImagePlugin.ts
var import_dom_to_image = __toESM(require_dom_to_image());
function delay(ms) {
  return new Promise(function(resolve) {
    setTimeout(function() {
      resolve(void 0);
    }, ms);
  });
}
var ExportImagePlugin = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    this.addCommand({
      id: "export-to-image-zh",
      name: "Export to image",
      checkCallback: (checking) => {
        const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
        if ((markdownView == null ? void 0 : markdownView.getMode()) === "preview") {
          if (!checking) {
            (async () => {
              const el = markdownView.contentEl.find(".markdown-preview-section");
              const container = el.parentElement;
              const scrollCache = container.scrollTop;
              container.scrollTo(0, 0);
              el.addClass("epxort-image-force-no-margin");
              await delay(40);
              const totalHeight = el.clientHeight;
              const screenHeight = markdownView.contentEl.clientHeight;
              let scrollIndex = 0;
              let height = el.clientHeight - parseFloat(el.style.paddingBottom) + 40;
              console.log("scollHeight:", height);
              const clone = await (0, import_dom_to_image.cloneNode)(el);
              const observer = new MutationObserver(async (records) => {
                for (let r of records) {
                  for (let node of Array.from(r.addedNodes)) {
                    clone.append(await (0, import_dom_to_image.cloneNode)(node));
                  }
                }
              });
              observer.observe(el, {
                childList: true
              });
              while (scrollIndex <= totalHeight - screenHeight) {
                scrollIndex += screenHeight;
                container.scrollTo(0, scrollIndex);
                await delay(40);
              }
              observer.disconnect();
              container.scrollTo(0, scrollCache);
              clone.addClass("export-image-clone");
              document.body.appendChild(clone);
              console.log(clone.clientWidth, clone.clientHeight);
              el.removeClass("epxort-image-force-no-margin");
              const blob = await (0, import_dom_to_image.toBlobWithClonedDom)(el, clone, {
                width: clone.clientWidth * 2,
                height: clone.clientHeight * 2,
                bgcolor: window.getComputedStyle(el.closest(".view-content")).backgroundColor,
                quality: 0.9,
                style: {
                  transform: "scale(2)",
                  transformOrigin: "top left"
                }
              });
              document.body.removeChild(clone);
              (0, import_file_saver.saveAs)(blob, `${markdownView.getDisplayText().replace(/\s+/g, "_")}.jpg`);
            })();
          }
          return true;
        }
      }
    });
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};

// main.ts
var main_default = ExportImagePlugin;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL2ZpbGUtc2F2ZXIvc3JjL0ZpbGVTYXZlci5qcyIsICJkb20tdG8taW1hZ2UuanMiLCAibWFpbi50cyIsICJFeHBvcnRJbWFnZVBsdWdpbi50cyIsICJjb25zdGVudHMudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8qXG4qIEZpbGVTYXZlci5qc1xuKiBBIHNhdmVBcygpIEZpbGVTYXZlciBpbXBsZW1lbnRhdGlvbi5cbipcbiogQnkgRWxpIEdyZXksIGh0dHA6Ly9lbGlncmV5LmNvbVxuKlxuKiBMaWNlbnNlIDogaHR0cHM6Ly9naXRodWIuY29tL2VsaWdyZXkvRmlsZVNhdmVyLmpzL2Jsb2IvbWFzdGVyL0xJQ0VOU0UubWQgKE1JVClcbiogc291cmNlICA6IGh0dHA6Ly9wdXJsLmVsaWdyZXkuY29tL2dpdGh1Yi9GaWxlU2F2ZXIuanNcbiovXG5cbi8vIFRoZSBvbmUgYW5kIG9ubHkgd2F5IG9mIGdldHRpbmcgZ2xvYmFsIHNjb3BlIGluIGFsbCBlbnZpcm9ubWVudHNcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcS8zMjc3MTgyLzEwMDg5OTlcbnZhciBfZ2xvYmFsID0gdHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LndpbmRvdyA9PT0gd2luZG93XG4gID8gd2luZG93IDogdHlwZW9mIHNlbGYgPT09ICdvYmplY3QnICYmIHNlbGYuc2VsZiA9PT0gc2VsZlxuICA/IHNlbGYgOiB0eXBlb2YgZ2xvYmFsID09PSAnb2JqZWN0JyAmJiBnbG9iYWwuZ2xvYmFsID09PSBnbG9iYWxcbiAgPyBnbG9iYWxcbiAgOiB0aGlzXG5cbmZ1bmN0aW9uIGJvbSAoYmxvYiwgb3B0cykge1xuICBpZiAodHlwZW9mIG9wdHMgPT09ICd1bmRlZmluZWQnKSBvcHRzID0geyBhdXRvQm9tOiBmYWxzZSB9XG4gIGVsc2UgaWYgKHR5cGVvZiBvcHRzICE9PSAnb2JqZWN0Jykge1xuICAgIGNvbnNvbGUud2FybignRGVwcmVjYXRlZDogRXhwZWN0ZWQgdGhpcmQgYXJndW1lbnQgdG8gYmUgYSBvYmplY3QnKVxuICAgIG9wdHMgPSB7IGF1dG9Cb206ICFvcHRzIH1cbiAgfVxuXG4gIC8vIHByZXBlbmQgQk9NIGZvciBVVEYtOCBYTUwgYW5kIHRleHQvKiB0eXBlcyAoaW5jbHVkaW5nIEhUTUwpXG4gIC8vIG5vdGU6IHlvdXIgYnJvd3NlciB3aWxsIGF1dG9tYXRpY2FsbHkgY29udmVydCBVVEYtMTYgVStGRUZGIHRvIEVGIEJCIEJGXG4gIGlmIChvcHRzLmF1dG9Cb20gJiYgL15cXHMqKD86dGV4dFxcL1xcUyp8YXBwbGljYXRpb25cXC94bWx8XFxTKlxcL1xcUypcXCt4bWwpXFxzKjsuKmNoYXJzZXRcXHMqPVxccyp1dGYtOC9pLnRlc3QoYmxvYi50eXBlKSkge1xuICAgIHJldHVybiBuZXcgQmxvYihbU3RyaW5nLmZyb21DaGFyQ29kZSgweEZFRkYpLCBibG9iXSwgeyB0eXBlOiBibG9iLnR5cGUgfSlcbiAgfVxuICByZXR1cm4gYmxvYlxufVxuXG5mdW5jdGlvbiBkb3dubG9hZCAodXJsLCBuYW1lLCBvcHRzKSB7XG4gIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKVxuICB4aHIub3BlbignR0VUJywgdXJsKVxuICB4aHIucmVzcG9uc2VUeXBlID0gJ2Jsb2InXG4gIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgc2F2ZUFzKHhoci5yZXNwb25zZSwgbmFtZSwgb3B0cylcbiAgfVxuICB4aHIub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zb2xlLmVycm9yKCdjb3VsZCBub3QgZG93bmxvYWQgZmlsZScpXG4gIH1cbiAgeGhyLnNlbmQoKVxufVxuXG5mdW5jdGlvbiBjb3JzRW5hYmxlZCAodXJsKSB7XG4gIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKVxuICAvLyB1c2Ugc3luYyB0byBhdm9pZCBwb3B1cCBibG9ja2VyXG4gIHhoci5vcGVuKCdIRUFEJywgdXJsLCBmYWxzZSlcbiAgdHJ5IHtcbiAgICB4aHIuc2VuZCgpXG4gIH0gY2F0Y2ggKGUpIHt9XG4gIHJldHVybiB4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDw9IDI5OVxufVxuXG4vLyBgYS5jbGljaygpYCBkb2Vzbid0IHdvcmsgZm9yIGFsbCBicm93c2VycyAoIzQ2NSlcbmZ1bmN0aW9uIGNsaWNrIChub2RlKSB7XG4gIHRyeSB7XG4gICAgbm9kZS5kaXNwYXRjaEV2ZW50KG5ldyBNb3VzZUV2ZW50KCdjbGljaycpKVxuICB9IGNhdGNoIChlKSB7XG4gICAgdmFyIGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdNb3VzZUV2ZW50cycpXG4gICAgZXZ0LmluaXRNb3VzZUV2ZW50KCdjbGljaycsIHRydWUsIHRydWUsIHdpbmRvdywgMCwgMCwgMCwgODAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDIwLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgMCwgbnVsbClcbiAgICBub2RlLmRpc3BhdGNoRXZlbnQoZXZ0KVxuICB9XG59XG5cbi8vIERldGVjdCBXZWJWaWV3IGluc2lkZSBhIG5hdGl2ZSBtYWNPUyBhcHAgYnkgcnVsaW5nIG91dCBhbGwgYnJvd3NlcnNcbi8vIFdlIGp1c3QgbmVlZCB0byBjaGVjayBmb3IgJ1NhZmFyaScgYmVjYXVzZSBhbGwgb3RoZXIgYnJvd3NlcnMgKGJlc2lkZXMgRmlyZWZveCkgaW5jbHVkZSB0aGF0IHRvb1xuLy8gaHR0cHM6Ly93d3cud2hhdGlzbXlicm93c2VyLmNvbS9ndWlkZXMvdGhlLWxhdGVzdC11c2VyLWFnZW50L21hY29zXG52YXIgaXNNYWNPU1dlYlZpZXcgPSBfZ2xvYmFsLm5hdmlnYXRvciAmJiAvTWFjaW50b3NoLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmIC9BcHBsZVdlYktpdC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiAhL1NhZmFyaS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KVxuXG52YXIgc2F2ZUFzID0gX2dsb2JhbC5zYXZlQXMgfHwgKFxuICAvLyBwcm9iYWJseSBpbiBzb21lIHdlYiB3b3JrZXJcbiAgKHR5cGVvZiB3aW5kb3cgIT09ICdvYmplY3QnIHx8IHdpbmRvdyAhPT0gX2dsb2JhbClcbiAgICA/IGZ1bmN0aW9uIHNhdmVBcyAoKSB7IC8qIG5vb3AgKi8gfVxuXG4gIC8vIFVzZSBkb3dubG9hZCBhdHRyaWJ1dGUgZmlyc3QgaWYgcG9zc2libGUgKCMxOTMgTHVtaWEgbW9iaWxlKSB1bmxlc3MgdGhpcyBpcyBhIG1hY09TIFdlYlZpZXdcbiAgOiAoJ2Rvd25sb2FkJyBpbiBIVE1MQW5jaG9yRWxlbWVudC5wcm90b3R5cGUgJiYgIWlzTWFjT1NXZWJWaWV3KVxuICA/IGZ1bmN0aW9uIHNhdmVBcyAoYmxvYiwgbmFtZSwgb3B0cykge1xuICAgIHZhciBVUkwgPSBfZ2xvYmFsLlVSTCB8fCBfZ2xvYmFsLndlYmtpdFVSTFxuICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpXG4gICAgbmFtZSA9IG5hbWUgfHwgYmxvYi5uYW1lIHx8ICdkb3dubG9hZCdcblxuICAgIGEuZG93bmxvYWQgPSBuYW1lXG4gICAgYS5yZWwgPSAnbm9vcGVuZXInIC8vIHRhYm5hYmJpbmdcblxuICAgIC8vIFRPRE86IGRldGVjdCBjaHJvbWUgZXh0ZW5zaW9ucyAmIHBhY2thZ2VkIGFwcHNcbiAgICAvLyBhLnRhcmdldCA9ICdfYmxhbmsnXG5cbiAgICBpZiAodHlwZW9mIGJsb2IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBTdXBwb3J0IHJlZ3VsYXIgbGlua3NcbiAgICAgIGEuaHJlZiA9IGJsb2JcbiAgICAgIGlmIChhLm9yaWdpbiAhPT0gbG9jYXRpb24ub3JpZ2luKSB7XG4gICAgICAgIGNvcnNFbmFibGVkKGEuaHJlZilcbiAgICAgICAgICA/IGRvd25sb2FkKGJsb2IsIG5hbWUsIG9wdHMpXG4gICAgICAgICAgOiBjbGljayhhLCBhLnRhcmdldCA9ICdfYmxhbmsnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2xpY2soYSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU3VwcG9ydCBibG9ic1xuICAgICAgYS5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKVxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IFVSTC5yZXZva2VPYmplY3RVUkwoYS5ocmVmKSB9LCA0RTQpIC8vIDQwc1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IGNsaWNrKGEpIH0sIDApXG4gICAgfVxuICB9XG5cbiAgLy8gVXNlIG1zU2F2ZU9yT3BlbkJsb2IgYXMgYSBzZWNvbmQgYXBwcm9hY2hcbiAgOiAnbXNTYXZlT3JPcGVuQmxvYicgaW4gbmF2aWdhdG9yXG4gID8gZnVuY3Rpb24gc2F2ZUFzIChibG9iLCBuYW1lLCBvcHRzKSB7XG4gICAgbmFtZSA9IG5hbWUgfHwgYmxvYi5uYW1lIHx8ICdkb3dubG9hZCdcblxuICAgIGlmICh0eXBlb2YgYmxvYiA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGlmIChjb3JzRW5hYmxlZChibG9iKSkge1xuICAgICAgICBkb3dubG9hZChibG9iLCBuYW1lLCBvcHRzKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcbiAgICAgICAgYS5ocmVmID0gYmxvYlxuICAgICAgICBhLnRhcmdldCA9ICdfYmxhbmsnXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyBjbGljayhhKSB9KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBuYXZpZ2F0b3IubXNTYXZlT3JPcGVuQmxvYihib20oYmxvYiwgb3B0cyksIG5hbWUpXG4gICAgfVxuICB9XG5cbiAgLy8gRmFsbGJhY2sgdG8gdXNpbmcgRmlsZVJlYWRlciBhbmQgYSBwb3B1cFxuICA6IGZ1bmN0aW9uIHNhdmVBcyAoYmxvYiwgbmFtZSwgb3B0cywgcG9wdXApIHtcbiAgICAvLyBPcGVuIGEgcG9wdXAgaW1tZWRpYXRlbHkgZG8gZ28gYXJvdW5kIHBvcHVwIGJsb2NrZXJcbiAgICAvLyBNb3N0bHkgb25seSBhdmFpbGFibGUgb24gdXNlciBpbnRlcmFjdGlvbiBhbmQgdGhlIGZpbGVSZWFkZXIgaXMgYXN5bmMgc28uLi5cbiAgICBwb3B1cCA9IHBvcHVwIHx8IG9wZW4oJycsICdfYmxhbmsnKVxuICAgIGlmIChwb3B1cCkge1xuICAgICAgcG9wdXAuZG9jdW1lbnQudGl0bGUgPVxuICAgICAgcG9wdXAuZG9jdW1lbnQuYm9keS5pbm5lclRleHQgPSAnZG93bmxvYWRpbmcuLi4nXG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBibG9iID09PSAnc3RyaW5nJykgcmV0dXJuIGRvd25sb2FkKGJsb2IsIG5hbWUsIG9wdHMpXG5cbiAgICB2YXIgZm9yY2UgPSBibG9iLnR5cGUgPT09ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nXG4gICAgdmFyIGlzU2FmYXJpID0gL2NvbnN0cnVjdG9yL2kudGVzdChfZ2xvYmFsLkhUTUxFbGVtZW50KSB8fCBfZ2xvYmFsLnNhZmFyaVxuICAgIHZhciBpc0Nocm9tZUlPUyA9IC9DcmlPU1xcL1tcXGRdKy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KVxuXG4gICAgaWYgKChpc0Nocm9tZUlPUyB8fCAoZm9yY2UgJiYgaXNTYWZhcmkpIHx8IGlzTWFjT1NXZWJWaWV3KSAmJiB0eXBlb2YgRmlsZVJlYWRlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIFNhZmFyaSBkb2Vzbid0IGFsbG93IGRvd25sb2FkaW5nIG9mIGJsb2IgVVJMc1xuICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKClcbiAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB1cmwgPSByZWFkZXIucmVzdWx0XG4gICAgICAgIHVybCA9IGlzQ2hyb21lSU9TID8gdXJsIDogdXJsLnJlcGxhY2UoL15kYXRhOlteO10qOy8sICdkYXRhOmF0dGFjaG1lbnQvZmlsZTsnKVxuICAgICAgICBpZiAocG9wdXApIHBvcHVwLmxvY2F0aW9uLmhyZWYgPSB1cmxcbiAgICAgICAgZWxzZSBsb2NhdGlvbiA9IHVybFxuICAgICAgICBwb3B1cCA9IG51bGwgLy8gcmV2ZXJzZS10YWJuYWJiaW5nICM0NjBcbiAgICAgIH1cbiAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGJsb2IpXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBVUkwgPSBfZ2xvYmFsLlVSTCB8fCBfZ2xvYmFsLndlYmtpdFVSTFxuICAgICAgdmFyIHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYilcbiAgICAgIGlmIChwb3B1cCkgcG9wdXAubG9jYXRpb24gPSB1cmxcbiAgICAgIGVsc2UgbG9jYXRpb24uaHJlZiA9IHVybFxuICAgICAgcG9wdXAgPSBudWxsIC8vIHJldmVyc2UtdGFibmFiYmluZyAjNDYwXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpIH0sIDRFNCkgLy8gNDBzXG4gICAgfVxuICB9XG4pXG5cbl9nbG9iYWwuc2F2ZUFzID0gc2F2ZUFzLnNhdmVBcyA9IHNhdmVBc1xuXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSBzYXZlQXM7XG59XG4iLCAiKGZ1bmN0aW9uIChnbG9iYWwpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciB1dGlsID0gbmV3VXRpbCgpO1xuICB2YXIgaW5saW5lciA9IG5ld0lubGluZXIoKTtcbiAgdmFyIGZvbnRGYWNlcyA9IG5ld0ZvbnRGYWNlcygpO1xuICB2YXIgaW1hZ2VzID0gbmV3SW1hZ2VzKCk7XG5cbiAgLy8gRGVmYXVsdCBpbXBsIG9wdGlvbnNcbiAgdmFyIGRlZmF1bHRPcHRpb25zID0ge1xuICAgIC8vIERlZmF1bHQgaXMgdG8gZmFpbCBvbiBlcnJvciwgbm8gcGxhY2Vob2xkZXJcbiAgICBpbWFnZVBsYWNlaG9sZGVyOiB1bmRlZmluZWQsXG4gICAgLy8gRGVmYXVsdCBjYWNoZSBidXN0IGlzIGZhbHNlLCBpdCB3aWxsIHVzZSB0aGUgY2FjaGVcbiAgICBjYWNoZUJ1c3Q6IGZhbHNlXG4gIH07XG5cbiAgdmFyIGRvbXRvaW1hZ2UgPSB7XG4gICAgdG9Tdmc6IHRvU3ZnLFxuICAgIHRvUG5nOiB0b1BuZyxcbiAgICB0b0pwZWc6IHRvSnBlZyxcbiAgICB0b0Jsb2I6IHRvQmxvYixcbiAgICB0b1BpeGVsRGF0YTogdG9QaXhlbERhdGEsXG4gICAgdG9CbG9iV2l0aENsb25lZERvbTogdG9CbG9iV2l0aENsb25lZERvbSxcbiAgICBjbG9uZU5vZGU6IGNsb25lTm9kZSxcbiAgICBpbXBsOiB7XG4gICAgICBmb250RmFjZXM6IGZvbnRGYWNlcyxcbiAgICAgIGltYWdlczogaW1hZ2VzLFxuICAgICAgdXRpbDogdXRpbCxcbiAgICAgIGlubGluZXI6IGlubGluZXIsXG4gICAgICBvcHRpb25zOiB7fVxuICAgIH1cbiAgfTtcblxuICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBkb210b2ltYWdlO1xuICBlbHNlXG4gICAgZ2xvYmFsLmRvbXRvaW1hZ2UgPSBkb210b2ltYWdlO1xuXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Tm9kZX0gbm9kZSAtIFRoZSBET00gTm9kZSBvYmplY3QgdG8gcmVuZGVyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gUmVuZGVyaW5nIG9wdGlvbnNcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3B0aW9ucy5maWx0ZXIgLSBTaG91bGQgcmV0dXJuIHRydWUgaWYgcGFzc2VkIG5vZGUgc2hvdWxkIGJlIGluY2x1ZGVkIGluIHRoZSBvdXRwdXRcbiAgICogICAgICAgICAgKGV4Y2x1ZGluZyBub2RlIG1lYW5zIGV4Y2x1ZGluZyBpdCdzIGNoaWxkcmVuIGFzIHdlbGwpLiBOb3QgY2FsbGVkIG9uIHRoZSByb290IG5vZGUuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBvcHRpb25zLmJnY29sb3IgLSBjb2xvciBmb3IgdGhlIGJhY2tncm91bmQsIGFueSB2YWxpZCBDU1MgY29sb3IgdmFsdWUuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBvcHRpb25zLndpZHRoIC0gd2lkdGggdG8gYmUgYXBwbGllZCB0byBub2RlIGJlZm9yZSByZW5kZXJpbmcuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBvcHRpb25zLmhlaWdodCAtIGhlaWdodCB0byBiZSBhcHBsaWVkIHRvIG5vZGUgYmVmb3JlIHJlbmRlcmluZy5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMuc3R5bGUgLSBhbiBvYmplY3Qgd2hvc2UgcHJvcGVydGllcyB0byBiZSBjb3BpZWQgdG8gbm9kZSdzIHN0eWxlIGJlZm9yZSByZW5kZXJpbmcuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBvcHRpb25zLnF1YWxpdHkgLSBhIE51bWJlciBiZXR3ZWVuIDAgYW5kIDEgaW5kaWNhdGluZyBpbWFnZSBxdWFsaXR5IChhcHBsaWNhYmxlIHRvIEpQRUcgb25seSksXG4gICAgICAgICAgICAgIGRlZmF1bHRzIHRvIDEuMC5cbiAgICogQHBhcmFtIHtTdHJpbmd9IG9wdGlvbnMuaW1hZ2VQbGFjZWhvbGRlciAtIGRhdGFVUkwgdG8gdXNlIGFzIGEgcGxhY2Vob2xkZXIgZm9yIGZhaWxlZCBpbWFnZXMsIGRlZmF1bHQgYmVoYXZpb3VyIGlzIHRvIGZhaWwgZmFzdCBvbiBpbWFnZXMgd2UgY2FuJ3QgZmV0Y2hcbiAgICogQHBhcmFtIHtCb29sZWFufSBvcHRpb25zLmNhY2hlQnVzdCAtIHNldCB0byB0cnVlIHRvIGNhY2hlIGJ1c3QgYnkgYXBwZW5kaW5nIHRoZSB0aW1lIHRvIHRoZSByZXF1ZXN0IHVybFxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIEEgcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aXRoIGEgU1ZHIGltYWdlIGRhdGEgVVJMXG4gICAqICovXG4gIGZ1bmN0aW9uIHRvU3ZnKG5vZGUsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICBjb3B5T3B0aW9ucyhvcHRpb25zKTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5vZGUpXG4gICAgICAudGhlbihmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICByZXR1cm4gY2xvbmVOb2RlKG5vZGUsIG9wdGlvbnMuZmlsdGVyLCB0cnVlKTtcbiAgICAgIH0pXG4gICAgICAudGhlbihlbWJlZEZvbnRzKVxuICAgICAgLnRoZW4oaW5saW5lSW1hZ2VzKVxuICAgICAgLnRoZW4oYXBwbHlPcHRpb25zKVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKGNsb25lKSB7XG4gICAgICAgIHJldHVybiBtYWtlU3ZnRGF0YVVyaShjbG9uZSxcbiAgICAgICAgICBvcHRpb25zLndpZHRoIHx8IHV0aWwud2lkdGgobm9kZSksXG4gICAgICAgICAgb3B0aW9ucy5oZWlnaHQgfHwgdXRpbC5oZWlnaHQobm9kZSlcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gYXBwbHlPcHRpb25zKGNsb25lKSB7XG4gICAgICBpZiAob3B0aW9ucy5iZ2NvbG9yKSBjbG9uZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBvcHRpb25zLmJnY29sb3I7XG5cbiAgICAgIGlmIChvcHRpb25zLndpZHRoKSBjbG9uZS5zdHlsZS53aWR0aCA9IG9wdGlvbnMud2lkdGggKyAncHgnO1xuICAgICAgaWYgKG9wdGlvbnMuaGVpZ2h0KSBjbG9uZS5zdHlsZS5oZWlnaHQgPSBvcHRpb25zLmhlaWdodCArICdweCc7XG5cbiAgICAgIGlmIChvcHRpb25zLnN0eWxlKVxuICAgICAgICBPYmplY3Qua2V5cyhvcHRpb25zLnN0eWxlKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuICAgICAgICAgIGNsb25lLnN0eWxlW3Byb3BlcnR5XSA9IG9wdGlvbnMuc3R5bGVbcHJvcGVydHldO1xuICAgICAgICB9KTtcblxuICAgICAgcmV0dXJuIGNsb25lO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHRvU3ZnV2l0aENsb25lZERvbShub2RlLCBjbG9uZSwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIGNvcHlPcHRpb25zKG9wdGlvbnMpO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoY2xvbmUpXG4gICAgICAudGhlbihlbWJlZEZvbnRzKVxuICAgICAgLnRoZW4oaW5saW5lSW1hZ2VzKVxuICAgICAgLnRoZW4oYXBwbHlPcHRpb25zKVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKGNsb25lKSB7XG4gICAgICAgIHJldHVybiBtYWtlU3ZnRGF0YVVyaShjbG9uZSxcbiAgICAgICAgICBvcHRpb25zLndpZHRoICogMixcbiAgICAgICAgICBvcHRpb25zLmhlaWdodCAqIDJcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gYXBwbHlPcHRpb25zKGNsb25lKSB7XG4gICAgICBpZiAob3B0aW9ucy5iZ2NvbG9yKSBjbG9uZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBvcHRpb25zLmJnY29sb3I7XG5cbiAgICAgIGlmIChvcHRpb25zLndpZHRoKSBjbG9uZS5zdHlsZS53aWR0aCA9IG9wdGlvbnMud2lkdGggKyAncHgnO1xuICAgICAgaWYgKG9wdGlvbnMuaGVpZ2h0KSBjbG9uZS5zdHlsZS5oZWlnaHQgPSBvcHRpb25zLmhlaWdodCArICdweCc7XG5cbiAgICAgIGlmIChvcHRpb25zLnN0eWxlKVxuICAgICAgICBPYmplY3Qua2V5cyhvcHRpb25zLnN0eWxlKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuICAgICAgICAgIGNsb25lLnN0eWxlW3Byb3BlcnR5XSA9IG9wdGlvbnMuc3R5bGVbcHJvcGVydHldO1xuICAgICAgICB9KTtcblxuICAgICAgcmV0dXJuIGNsb25lO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge05vZGV9IG5vZGUgLSBUaGUgRE9NIE5vZGUgb2JqZWN0IHRvIHJlbmRlclxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIFJlbmRlcmluZyBvcHRpb25zLCBAc2VlIHtAbGluayB0b1N2Z31cbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSBBIHByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgd2l0aCBhIFVpbnQ4QXJyYXkgY29udGFpbmluZyBSR0JBIHBpeGVsIGRhdGEuXG4gICAqICovXG4gIGZ1bmN0aW9uIHRvUGl4ZWxEYXRhKG5vZGUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZHJhdyhub2RlLCBvcHRpb25zIHx8IHt9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKGNhbnZhcykge1xuICAgICAgICByZXR1cm4gY2FudmFzLmdldENvbnRleHQoJzJkJykuZ2V0SW1hZ2VEYXRhKFxuICAgICAgICAgIDAsXG4gICAgICAgICAgMCxcbiAgICAgICAgICB1dGlsLndpZHRoKG5vZGUpLFxuICAgICAgICAgIHV0aWwuaGVpZ2h0KG5vZGUpXG4gICAgICAgICkuZGF0YTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Tm9kZX0gbm9kZSAtIFRoZSBET00gTm9kZSBvYmplY3QgdG8gcmVuZGVyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gUmVuZGVyaW5nIG9wdGlvbnMsIEBzZWUge0BsaW5rIHRvU3ZnfVxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIEEgcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aXRoIGEgUE5HIGltYWdlIGRhdGEgVVJMXG4gICAqICovXG4gIGZ1bmN0aW9uIHRvUG5nKG5vZGUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZHJhdyhub2RlLCBvcHRpb25zIHx8IHt9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKGNhbnZhcykge1xuICAgICAgICByZXR1cm4gY2FudmFzLnRvRGF0YVVSTCgpO1xuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtOb2RlfSBub2RlIC0gVGhlIERPTSBOb2RlIG9iamVjdCB0byByZW5kZXJcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBSZW5kZXJpbmcgb3B0aW9ucywgQHNlZSB7QGxpbmsgdG9Tdmd9XG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gQSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdpdGggYSBKUEVHIGltYWdlIGRhdGEgVVJMXG4gICAqICovXG4gIGZ1bmN0aW9uIHRvSnBlZyhub2RlLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgcmV0dXJuIGRyYXcobm9kZSwgb3B0aW9ucylcbiAgICAgIC50aGVuKGZ1bmN0aW9uIChjYW52YXMpIHtcbiAgICAgICAgcmV0dXJuIGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL2pwZWcnLCBvcHRpb25zLnF1YWxpdHkgfHwgMS4wKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Tm9kZX0gbm9kZSAtIFRoZSBET00gTm9kZSBvYmplY3QgdG8gcmVuZGVyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gUmVuZGVyaW5nIG9wdGlvbnMsIEBzZWUge0BsaW5rIHRvU3ZnfVxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIEEgcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aXRoIGEgUE5HIGltYWdlIGJsb2JcbiAgICogKi9cbiAgZnVuY3Rpb24gdG9CbG9iKG5vZGUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZHJhdyhub2RlLCBvcHRpb25zIHx8IHt9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKGNhbnZhcykge1xuICAgICAgICByZXR1cm4gdXRpbC5jYW52YXNUb0Jsb2IoY2FudmFzLCBvcHRpb25zKTtcbiAgICAgIH0pO1xuICB9XG5cblxuICBmdW5jdGlvbiB0b0Jsb2JXaXRoQ2xvbmVkRG9tKG5vZGUsIGNsb25lLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGRyYXdXaXRoQ2xvbmVkRG9tKG5vZGUsIGNsb25lLCBvcHRpb25zIHx8IHt9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKGNhbnZhcykge1xuICAgICAgICByZXR1cm4gdXRpbC5jYW52YXNUb0Jsb2IoY2FudmFzLCBvcHRpb25zKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gY29weU9wdGlvbnMob3B0aW9ucykge1xuICAgIC8vIENvcHkgb3B0aW9ucyB0byBpbXBsIG9wdGlvbnMgZm9yIHVzZSBpbiBpbXBsXG4gICAgaWYgKHR5cGVvZiAob3B0aW9ucy5pbWFnZVBsYWNlaG9sZGVyKSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRvbXRvaW1hZ2UuaW1wbC5vcHRpb25zLmltYWdlUGxhY2Vob2xkZXIgPSBkZWZhdWx0T3B0aW9ucy5pbWFnZVBsYWNlaG9sZGVyO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb210b2ltYWdlLmltcGwub3B0aW9ucy5pbWFnZVBsYWNlaG9sZGVyID0gb3B0aW9ucy5pbWFnZVBsYWNlaG9sZGVyO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgKG9wdGlvbnMuY2FjaGVCdXN0KSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRvbXRvaW1hZ2UuaW1wbC5vcHRpb25zLmNhY2hlQnVzdCA9IGRlZmF1bHRPcHRpb25zLmNhY2hlQnVzdDtcbiAgICB9IGVsc2Uge1xuICAgICAgZG9tdG9pbWFnZS5pbXBsLm9wdGlvbnMuY2FjaGVCdXN0ID0gb3B0aW9ucy5jYWNoZUJ1c3Q7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZHJhdyhkb21Ob2RlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRvU3ZnKGRvbU5vZGUsIG9wdGlvbnMpXG4gICAgICAudGhlbih1dGlsLm1ha2VJbWFnZSlcbiAgICAgIC50aGVuKHV0aWwuZGVsYXkoMTAwKSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uIChpbWFnZSkge1xuICAgICAgICB2YXIgY2FudmFzID0gbmV3Q2FudmFzKGRvbU5vZGUpO1xuICAgICAgICBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKS5kcmF3SW1hZ2UoaW1hZ2UsIDAsIDApO1xuICAgICAgICByZXR1cm4gY2FudmFzO1xuICAgICAgfSk7XG5cbiAgICBmdW5jdGlvbiBuZXdDYW52YXMoZG9tTm9kZSkge1xuICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgY2FudmFzLndpZHRoID0gb3B0aW9ucy53aWR0aCB8fCB1dGlsLndpZHRoKGRvbU5vZGUpO1xuICAgICAgY2FudmFzLmhlaWdodCA9IG9wdGlvbnMuaGVpZ2h0IHx8IHV0aWwuaGVpZ2h0KGRvbU5vZGUpO1xuXG4gICAgICBpZiAob3B0aW9ucy5iZ2NvbG9yKSB7XG4gICAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IG9wdGlvbnMuYmdjb2xvcjtcbiAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2FudmFzO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBkcmF3V2l0aENsb25lZERvbShkb21Ob2RlLCBjbG9uZSwgb3B0aW9ucykge1xuICAgIHJldHVybiB0b1N2Z1dpdGhDbG9uZWREb20oZG9tTm9kZSwgY2xvbmUsIG9wdGlvbnMpXG4gICAgICAudGhlbih1dGlsLm1ha2VJbWFnZSlcbiAgICAgIC50aGVuKHV0aWwuZGVsYXkoMTAwKSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uIChpbWFnZSkge1xuICAgICAgICB2YXIgY2FudmFzID0gbmV3Q2FudmFzKCk7XG4gICAgICAgIGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpLmRyYXdJbWFnZShpbWFnZSwgMCwgMCwgb3B0aW9ucy53aWR0aCAqIDIsIG9wdGlvbnMuaGVpZ2h0ICogMik7XG4gICAgICAgIHJldHVybiBjYW52YXM7XG4gICAgICB9KTtcblxuICAgIGZ1bmN0aW9uIG5ld0NhbnZhcygpIHtcbiAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgIGNhbnZhcy53aWR0aCA9IG9wdGlvbnMud2lkdGg7XG4gICAgICBjYW52YXMuaGVpZ2h0ID0gb3B0aW9ucy5oZWlnaHQ7XG5cbiAgICAgIGlmIChvcHRpb25zLmJnY29sb3IpIHtcbiAgICAgICAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gb3B0aW9ucy5iZ2NvbG9yO1xuICAgICAgICBjdHguZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNhbnZhcztcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjbG9uZU5vZGUobm9kZSwgZmlsdGVyLCByb290KSB7XG4gICAgaWYgKCFyb290ICYmIGZpbHRlciAmJiAhZmlsdGVyKG5vZGUpKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5vZGUpXG4gICAgICAudGhlbihtYWtlTm9kZUNvcHkpXG4gICAgICAudGhlbihmdW5jdGlvbiAoY2xvbmUpIHtcbiAgICAgICAgcmV0dXJuIGNsb25lQ2hpbGRyZW4obm9kZSwgY2xvbmUsIGZpbHRlcik7XG4gICAgICB9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKGNsb25lKSB7XG4gICAgICAgIHJldHVybiBwcm9jZXNzQ2xvbmUobm9kZSwgY2xvbmUpO1xuICAgICAgfSk7XG5cbiAgICBmdW5jdGlvbiBtYWtlTm9kZUNvcHkobm9kZSkge1xuICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCkgcmV0dXJuIHV0aWwubWFrZUltYWdlKG5vZGUudG9EYXRhVVJMKCkpO1xuICAgICAgcmV0dXJuIG5vZGUuY2xvbmVOb2RlKGZhbHNlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbG9uZUNoaWxkcmVuKG9yaWdpbmFsLCBjbG9uZSwgZmlsdGVyKSB7XG4gICAgICB2YXIgY2hpbGRyZW4gPSBvcmlnaW5hbC5jaGlsZE5vZGVzO1xuICAgICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFByb21pc2UucmVzb2x2ZShjbG9uZSk7XG5cbiAgICAgIHJldHVybiBjbG9uZUNoaWxkcmVuSW5PcmRlcihjbG9uZSwgdXRpbC5hc0FycmF5KGNoaWxkcmVuKSwgZmlsdGVyKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIGNsb25lO1xuICAgICAgICB9KTtcblxuICAgICAgZnVuY3Rpb24gY2xvbmVDaGlsZHJlbkluT3JkZXIocGFyZW50LCBjaGlsZHJlbiwgZmlsdGVyKSB7XG4gICAgICAgIHZhciBkb25lID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIGNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgICAgZG9uZSA9IGRvbmVcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGNsb25lTm9kZShjaGlsZCwgZmlsdGVyKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoY2hpbGRDbG9uZSkge1xuICAgICAgICAgICAgICBpZiAoY2hpbGRDbG9uZSkgcGFyZW50LmFwcGVuZENoaWxkKGNoaWxkQ2xvbmUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZG9uZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwcm9jZXNzQ2xvbmUob3JpZ2luYWwsIGNsb25lKSB7XG4gICAgICBpZiAoIShjbG9uZSBpbnN0YW5jZW9mIEVsZW1lbnQpKSByZXR1cm4gY2xvbmU7XG5cbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuICAgICAgICAudGhlbihjbG9uZVN0eWxlKVxuICAgICAgICAudGhlbihjbG9uZVBzZXVkb0VsZW1lbnRzKVxuICAgICAgICAudGhlbihjb3B5VXNlcklucHV0KVxuICAgICAgICAudGhlbihmaXhTdmcpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gY2xvbmU7XG4gICAgICAgIH0pO1xuXG4gICAgICBmdW5jdGlvbiBjbG9uZVN0eWxlKCkge1xuICAgICAgICBjb3B5U3R5bGUod2luZG93LmdldENvbXB1dGVkU3R5bGUob3JpZ2luYWwpLCBjbG9uZS5zdHlsZSB8fCB7fSk7XG5cbiAgICAgICAgZnVuY3Rpb24gY29weVN0eWxlKHNvdXJjZSwgdGFyZ2V0KSB7XG4gICAgICAgICAgaWYgKHNvdXJjZS5jc3NUZXh0KSB0YXJnZXQuY3NzVGV4dCA9IHNvdXJjZS5jc3NUZXh0O1xuICAgICAgICAgIGVsc2UgY29weVByb3BlcnRpZXMoc291cmNlLCB0YXJnZXQpO1xuXG4gICAgICAgICAgZnVuY3Rpb24gY29weVByb3BlcnRpZXMoc291cmNlLCB0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmICh0YXJnZXQuc2V0UHJvcGVydHkpIHtcbiAgICAgICAgICAgICAgdXRpbC5hc0FycmF5KHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgICAgIHRhcmdldC5zZXRQcm9wZXJ0eShcbiAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICBzb3VyY2UuZ2V0UHJvcGVydHlWYWx1ZShuYW1lKSxcbiAgICAgICAgICAgICAgICAgIHNvdXJjZS5nZXRQcm9wZXJ0eVByaW9yaXR5KG5hbWUpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGNsb25lUHNldWRvRWxlbWVudHMoKSB7XG4gICAgICAgIFsnOmJlZm9yZScsICc6YWZ0ZXInXS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgY2xvbmVQc2V1ZG9FbGVtZW50KGVsZW1lbnQpO1xuICAgICAgICB9KTtcblxuICAgICAgICBmdW5jdGlvbiBjbG9uZVBzZXVkb0VsZW1lbnQoZWxlbWVudCkge1xuICAgICAgICAgIHZhciBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG9yaWdpbmFsLCBlbGVtZW50KTtcbiAgICAgICAgICB2YXIgY29udGVudCA9IHN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ2NvbnRlbnQnKTtcblxuICAgICAgICAgIGlmIChjb250ZW50ID09PSAnJyB8fCBjb250ZW50ID09PSAnbm9uZScpIHJldHVybjtcblxuICAgICAgICAgIHZhciBjbGFzc05hbWUgPSB1dGlsLnVpZCgpO1xuICAgICAgICAgIGNsb25lLmNsYXNzTmFtZSA9IGNsb25lLmNsYXNzTmFtZSArICcgJyArIGNsYXNzTmFtZTtcbiAgICAgICAgICB2YXIgc3R5bGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgICAgICBzdHlsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZm9ybWF0UHNldWRvRWxlbWVudFN0eWxlKGNsYXNzTmFtZSwgZWxlbWVudCwgc3R5bGUpKTtcbiAgICAgICAgICBjbG9uZS5hcHBlbmRDaGlsZChzdHlsZUVsZW1lbnQpO1xuXG4gICAgICAgICAgZnVuY3Rpb24gZm9ybWF0UHNldWRvRWxlbWVudFN0eWxlKGNsYXNzTmFtZSwgZWxlbWVudCwgc3R5bGUpIHtcbiAgICAgICAgICAgIHZhciBzZWxlY3RvciA9ICcuJyArIGNsYXNzTmFtZSArICc6JyArIGVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgY3NzVGV4dCA9IHN0eWxlLmNzc1RleHQgPyBmb3JtYXRDc3NUZXh0KHN0eWxlKSA6IGZvcm1hdENzc1Byb3BlcnRpZXMoc3R5bGUpO1xuICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHNlbGVjdG9yICsgJ3snICsgY3NzVGV4dCArICd9Jyk7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGZvcm1hdENzc1RleHQoc3R5bGUpIHtcbiAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdjb250ZW50Jyk7XG4gICAgICAgICAgICAgIHJldHVybiBzdHlsZS5jc3NUZXh0ICsgJyBjb250ZW50OiAnICsgY29udGVudCArICc7JztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZm9ybWF0Q3NzUHJvcGVydGllcyhzdHlsZSkge1xuXG4gICAgICAgICAgICAgIHJldHVybiB1dGlsLmFzQXJyYXkoc3R5bGUpXG4gICAgICAgICAgICAgICAgLm1hcChmb3JtYXRQcm9wZXJ0eSlcbiAgICAgICAgICAgICAgICAuam9pbignOyAnKSArICc7JztcblxuICAgICAgICAgICAgICBmdW5jdGlvbiBmb3JtYXRQcm9wZXJ0eShuYW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5hbWUgKyAnOiAnICtcbiAgICAgICAgICAgICAgICAgIHN0eWxlLmdldFByb3BlcnR5VmFsdWUobmFtZSkgK1xuICAgICAgICAgICAgICAgICAgKHN0eWxlLmdldFByb3BlcnR5UHJpb3JpdHkobmFtZSkgPyAnICFpbXBvcnRhbnQnIDogJycpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGNvcHlVc2VySW5wdXQoKSB7XG4gICAgICAgIGlmIChvcmlnaW5hbCBpbnN0YW5jZW9mIEhUTUxUZXh0QXJlYUVsZW1lbnQpIGNsb25lLmlubmVySFRNTCA9IG9yaWdpbmFsLnZhbHVlO1xuICAgICAgICBpZiAob3JpZ2luYWwgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSBjbG9uZS5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBvcmlnaW5hbC52YWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGZpeFN2ZygpIHtcbiAgICAgICAgaWYgKCEoY2xvbmUgaW5zdGFuY2VvZiBTVkdFbGVtZW50KSkgcmV0dXJuO1xuICAgICAgICBjbG9uZS5zZXRBdHRyaWJ1dGUoJ3htbG5zJywgJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyk7XG5cbiAgICAgICAgaWYgKCEoY2xvbmUgaW5zdGFuY2VvZiBTVkdSZWN0RWxlbWVudCkpIHJldHVybjtcbiAgICAgICAgWyd3aWR0aCcsICdoZWlnaHQnXS5mb3JFYWNoKGZ1bmN0aW9uIChhdHRyaWJ1dGUpIHtcbiAgICAgICAgICB2YXIgdmFsdWUgPSBjbG9uZS5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlKTtcbiAgICAgICAgICBpZiAoIXZhbHVlKSByZXR1cm47XG5cbiAgICAgICAgICBjbG9uZS5zdHlsZS5zZXRQcm9wZXJ0eShhdHRyaWJ1dGUsIHZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZW1iZWRGb250cyhub2RlKSB7XG4gICAgcmV0dXJuIGZvbnRGYWNlcy5yZXNvbHZlQWxsKClcbiAgICAgIC50aGVuKGZ1bmN0aW9uIChjc3NUZXh0KSB7XG4gICAgICAgIHZhciBzdHlsZU5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgICBub2RlLmFwcGVuZENoaWxkKHN0eWxlTm9kZSk7XG4gICAgICAgIHN0eWxlTm9kZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3NUZXh0KSk7XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBpbmxpbmVJbWFnZXMobm9kZSkge1xuICAgIHJldHVybiBpbWFnZXMuaW5saW5lQWxsKG5vZGUpXG4gICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBtYWtlU3ZnRGF0YVVyaShub2RlLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShub2RlKVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ3htbG5zJywgJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwnKTtcbiAgICAgICAgcmV0dXJuIG5ldyBYTUxTZXJpYWxpemVyKCkuc2VyaWFsaXplVG9TdHJpbmcobm9kZSk7XG4gICAgICB9KVxuICAgICAgLnRoZW4odXRpbC5lc2NhcGVYaHRtbClcbiAgICAgIC50aGVuKGZ1bmN0aW9uICh4aHRtbCkge1xuICAgICAgICByZXR1cm4gJzxmb3JlaWduT2JqZWN0IHg9XCIwXCIgeT1cIjBcIiB3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCI+JyArIHhodG1sICsgJzwvZm9yZWlnbk9iamVjdD4nO1xuICAgICAgfSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uIChmb3JlaWduT2JqZWN0KSB7XG4gICAgICAgIHJldHVybiAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCInICsgd2lkdGggKyAnXCIgaGVpZ2h0PVwiJyArIGhlaWdodCArICdcIj4nICtcbiAgICAgICAgICBmb3JlaWduT2JqZWN0ICsgJzwvc3ZnPic7XG4gICAgICB9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKHN2Zykge1xuICAgICAgICByZXR1cm4gJ2RhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCcgKyBzdmc7XG4gICAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG5ld1V0aWwoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVzY2FwZTogZXNjYXBlLFxuICAgICAgcGFyc2VFeHRlbnNpb246IHBhcnNlRXh0ZW5zaW9uLFxuICAgICAgbWltZVR5cGU6IG1pbWVUeXBlLFxuICAgICAgZGF0YUFzVXJsOiBkYXRhQXNVcmwsXG4gICAgICBpc0RhdGFVcmw6IGlzRGF0YVVybCxcbiAgICAgIGNhbnZhc1RvQmxvYjogY2FudmFzVG9CbG9iLFxuICAgICAgcmVzb2x2ZVVybDogcmVzb2x2ZVVybCxcbiAgICAgIGdldEFuZEVuY29kZTogZ2V0QW5kRW5jb2RlLFxuICAgICAgdWlkOiB1aWQoKSxcbiAgICAgIGRlbGF5OiBkZWxheSxcbiAgICAgIGFzQXJyYXk6IGFzQXJyYXksXG4gICAgICBlc2NhcGVYaHRtbDogZXNjYXBlWGh0bWwsXG4gICAgICBtYWtlSW1hZ2U6IG1ha2VJbWFnZSxcbiAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgIGhlaWdodDogaGVpZ2h0XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIG1pbWVzKCkge1xuICAgICAgLypcbiAgICAgICAqIE9ubHkgV09GRiBhbmQgRU9UIG1pbWUgdHlwZXMgZm9yIGZvbnRzIGFyZSAncmVhbCdcbiAgICAgICAqIHNlZSBodHRwOi8vd3d3LmlhbmEub3JnL2Fzc2lnbm1lbnRzL21lZGlhLXR5cGVzL21lZGlhLXR5cGVzLnhodG1sXG4gICAgICAgKi9cbiAgICAgIHZhciBXT0ZGID0gJ2FwcGxpY2F0aW9uL2ZvbnQtd29mZic7XG4gICAgICB2YXIgSlBFRyA9ICdpbWFnZS9qcGVnJztcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgJ3dvZmYnOiBXT0ZGLFxuICAgICAgICAnd29mZjInOiBXT0ZGLFxuICAgICAgICAndHRmJzogJ2FwcGxpY2F0aW9uL2ZvbnQtdHJ1ZXR5cGUnLFxuICAgICAgICAnZW90JzogJ2FwcGxpY2F0aW9uL3ZuZC5tcy1mb250b2JqZWN0JyxcbiAgICAgICAgJ3BuZyc6ICdpbWFnZS9wbmcnLFxuICAgICAgICAnanBnJzogSlBFRyxcbiAgICAgICAgJ2pwZWcnOiBKUEVHLFxuICAgICAgICAnZ2lmJzogJ2ltYWdlL2dpZicsXG4gICAgICAgICd0aWZmJzogJ2ltYWdlL3RpZmYnLFxuICAgICAgICAnc3ZnJzogJ2ltYWdlL3N2Zyt4bWwnXG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlRXh0ZW5zaW9uKHVybCkge1xuICAgICAgdmFyIG1hdGNoID0gL1xcLihbXlxcLlxcL10qPykkL2cuZXhlYyh1cmwpO1xuICAgICAgaWYgKG1hdGNoKSByZXR1cm4gbWF0Y2hbMV07XG4gICAgICBlbHNlIHJldHVybiAnJztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtaW1lVHlwZSh1cmwpIHtcbiAgICAgIHZhciBleHRlbnNpb24gPSBwYXJzZUV4dGVuc2lvbih1cmwpLnRvTG93ZXJDYXNlKCk7XG4gICAgICByZXR1cm4gbWltZXMoKVtleHRlbnNpb25dIHx8ICcnO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzRGF0YVVybCh1cmwpIHtcbiAgICAgIHJldHVybiB1cmwuc2VhcmNoKC9eKGRhdGE6KS8pICE9PSAtMTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0b0Jsb2IoY2FudmFzLCBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgdmFyIGJpbmFyeVN0cmluZyA9IHdpbmRvdy5hdG9iKGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL2pwZWcnLCBvcHRpb25zLnF1YWxpdHkgfHwgMS4wKS5zcGxpdCgnLCcpWzFdKTtcbiAgICAgICAgdmFyIGxlbmd0aCA9IGJpbmFyeVN0cmluZy5sZW5ndGg7XG4gICAgICAgIHZhciBiaW5hcnlBcnJheSA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKylcbiAgICAgICAgICBiaW5hcnlBcnJheVtpXSA9IGJpbmFyeVN0cmluZy5jaGFyQ29kZUF0KGkpO1xuXG4gICAgICAgIHJlc29sdmUobmV3IEJsb2IoW2JpbmFyeUFycmF5XSwge1xuICAgICAgICAgIHR5cGU6ICdpbWFnZS9qcGVnJ1xuICAgICAgICB9KSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYW52YXNUb0Jsb2IoY2FudmFzLCBvcHRpb25zKSB7XG4gICAgICBpZiAoY2FudmFzLnRvQmxvYilcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgY2FudmFzLnRvQmxvYihyZXNvbHZlLCAnaW1hZ2UvanBlZycsIG9wdGlvbnMucXVhbGl0eSB8fCAxLjApO1xuICAgICAgICB9KTtcblxuICAgICAgcmV0dXJuIHRvQmxvYihjYW52YXMsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlc29sdmVVcmwodXJsLCBiYXNlVXJsKSB7XG4gICAgICB2YXIgZG9jID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCk7XG4gICAgICB2YXIgYmFzZSA9IGRvYy5jcmVhdGVFbGVtZW50KCdiYXNlJyk7XG4gICAgICBkb2MuaGVhZC5hcHBlbmRDaGlsZChiYXNlKTtcbiAgICAgIHZhciBhID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgIGRvYy5ib2R5LmFwcGVuZENoaWxkKGEpO1xuICAgICAgYmFzZS5ocmVmID0gYmFzZVVybDtcbiAgICAgIGEuaHJlZiA9IHVybDtcbiAgICAgIHJldHVybiBhLmhyZWY7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdWlkKCkge1xuICAgICAgdmFyIGluZGV4ID0gMDtcblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICd1JyArIGZvdXJSYW5kb21DaGFycygpICsgaW5kZXgrKztcblxuICAgICAgICBmdW5jdGlvbiBmb3VyUmFuZG9tQ2hhcnMoKSB7XG4gICAgICAgICAgLyogc2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzYyNDg3MjIvMjUxOTM3MyAqL1xuICAgICAgICAgIHJldHVybiAoJzAwMDAnICsgKE1hdGgucmFuZG9tKCkgKiBNYXRoLnBvdygzNiwgNCkgPDwgMCkudG9TdHJpbmcoMzYpKS5zbGljZSgtNCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWFrZUltYWdlKHVyaSkge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgdmFyIGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXNvbHZlKGltYWdlKTtcbiAgICAgICAgfTtcbiAgICAgICAgaW1hZ2Uub25lcnJvciA9IHJlamVjdDtcbiAgICAgICAgaW1hZ2Uuc3JjID0gdXJpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0QW5kRW5jb2RlKHVybCkge1xuICAgICAgdmFyIFRJTUVPVVQgPSAzMDAwMDtcbiAgICAgIGlmIChkb210b2ltYWdlLmltcGwub3B0aW9ucy5jYWNoZUJ1c3QpIHtcbiAgICAgICAgLy8gQ2FjaGUgYnlwYXNzIHNvIHdlIGRvbnQgaGF2ZSBDT1JTIGlzc3VlcyB3aXRoIGNhY2hlZCBpbWFnZXNcbiAgICAgICAgLy8gU291cmNlOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9kb2NzL1dlYi9BUEkvWE1MSHR0cFJlcXVlc3QvVXNpbmdfWE1MSHR0cFJlcXVlc3QjQnlwYXNzaW5nX3RoZV9jYWNoZVxuICAgICAgICB1cmwgKz0gKCgvXFw/LykudGVzdCh1cmwpID8gXCImXCIgOiBcIj9cIikgKyAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgICByZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGRvbmU7XG4gICAgICAgIHJlcXVlc3Qub250aW1lb3V0ID0gdGltZW91dDtcbiAgICAgICAgcmVxdWVzdC5yZXNwb25zZVR5cGUgPSAnYmxvYic7XG4gICAgICAgIHJlcXVlc3QudGltZW91dCA9IFRJTUVPVVQ7XG4gICAgICAgIHJlcXVlc3Qub3BlbignR0VUJywgdXJsLCB0cnVlKTtcbiAgICAgICAgcmVxdWVzdC5zZW5kKCk7XG5cbiAgICAgICAgdmFyIHBsYWNlaG9sZGVyO1xuICAgICAgICBpZiAoZG9tdG9pbWFnZS5pbXBsLm9wdGlvbnMuaW1hZ2VQbGFjZWhvbGRlcikge1xuICAgICAgICAgIHZhciBzcGxpdCA9IGRvbXRvaW1hZ2UuaW1wbC5vcHRpb25zLmltYWdlUGxhY2Vob2xkZXIuc3BsaXQoLywvKTtcbiAgICAgICAgICBpZiAoc3BsaXQgJiYgc3BsaXRbMV0pIHtcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyID0gc3BsaXRbMV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZG9uZSgpIHtcbiAgICAgICAgICBpZiAocmVxdWVzdC5yZWFkeVN0YXRlICE9PSA0KSByZXR1cm47XG5cbiAgICAgICAgICBpZiAocmVxdWVzdC5zdGF0dXMgIT09IDIwMCkge1xuICAgICAgICAgICAgaWYgKHBsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgICAgIHJlc29sdmUocGxhY2Vob2xkZXIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZmFpbCgnY2Fubm90IGZldGNoIHJlc291cmNlOiAnICsgdXJsICsgJywgc3RhdHVzOiAnICsgcmVxdWVzdC5zdGF0dXMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIGVuY29kZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICAgIGVuY29kZXIub25sb2FkZW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBlbmNvZGVyLnJlc3VsdC5zcGxpdCgvLC8pWzFdO1xuICAgICAgICAgICAgcmVzb2x2ZShjb250ZW50KTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIGVuY29kZXIucmVhZEFzRGF0YVVSTChyZXF1ZXN0LnJlc3BvbnNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHRpbWVvdXQoKSB7XG4gICAgICAgICAgaWYgKHBsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgICByZXNvbHZlKHBsYWNlaG9sZGVyKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZmFpbCgndGltZW91dCBvZiAnICsgVElNRU9VVCArICdtcyBvY2N1cmVkIHdoaWxlIGZldGNoaW5nIHJlc291cmNlOiAnICsgdXJsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBmYWlsKG1lc3NhZ2UpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xuICAgICAgICAgIHJlc29sdmUoJycpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkYXRhQXNVcmwoY29udGVudCwgdHlwZSkge1xuICAgICAgcmV0dXJuICdkYXRhOicgKyB0eXBlICsgJztiYXNlNjQsJyArIGNvbnRlbnQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZXNjYXBlKHN0cmluZykge1xuICAgICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC8oWy4qKz9eJHt9KCl8XFxbXFxdXFwvXFxcXF0pL2csICdcXFxcJDEnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWxheShtcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXNvbHZlKGFyZyk7XG4gICAgICAgICAgfSwgbXMpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXNBcnJheShhcnJheUxpa2UpIHtcbiAgICAgIHZhciBhcnJheSA9IFtdO1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5TGlrZS5sZW5ndGg7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSBhcnJheS5wdXNoKGFycmF5TGlrZVtpXSk7XG4gICAgICByZXR1cm4gYXJyYXk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZXNjYXBlWGh0bWwoc3RyaW5nKSB7XG4gICAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoLyMvZywgJyUyMycpLnJlcGxhY2UoL1xcbi9nLCAnJTBBJyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gd2lkdGgobm9kZSkge1xuICAgICAgdmFyIGxlZnRCb3JkZXIgPSBweChub2RlLCAnYm9yZGVyLWxlZnQtd2lkdGgnKTtcbiAgICAgIHZhciByaWdodEJvcmRlciA9IHB4KG5vZGUsICdib3JkZXItcmlnaHQtd2lkdGgnKTtcbiAgICAgIHJldHVybiBub2RlLnNjcm9sbFdpZHRoICsgbGVmdEJvcmRlciArIHJpZ2h0Qm9yZGVyO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhlaWdodChub2RlKSB7XG4gICAgICB2YXIgdG9wQm9yZGVyID0gcHgobm9kZSwgJ2JvcmRlci10b3Atd2lkdGgnKTtcbiAgICAgIHZhciBib3R0b21Cb3JkZXIgPSBweChub2RlLCAnYm9yZGVyLWJvdHRvbS13aWR0aCcpO1xuICAgICAgcmV0dXJuIG5vZGUuc2Nyb2xsSGVpZ2h0ICsgdG9wQm9yZGVyICsgYm90dG9tQm9yZGVyO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHB4KG5vZGUsIHN0eWxlUHJvcGVydHkpIHtcbiAgICAgIHZhciB2YWx1ZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG5vZGUpLmdldFByb3BlcnR5VmFsdWUoc3R5bGVQcm9wZXJ0eSk7XG4gICAgICByZXR1cm4gcGFyc2VGbG9hdCh2YWx1ZS5yZXBsYWNlKCdweCcsICcnKSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbmV3SW5saW5lcigpIHtcbiAgICB2YXIgVVJMX1JFR0VYID0gL3VybFxcKFsnXCJdPyhbXidcIl0rPylbJ1wiXT9cXCkvZztcblxuICAgIHJldHVybiB7XG4gICAgICBpbmxpbmVBbGw6IGlubGluZUFsbCxcbiAgICAgIHNob3VsZFByb2Nlc3M6IHNob3VsZFByb2Nlc3MsXG4gICAgICBpbXBsOiB7XG4gICAgICAgIHJlYWRVcmxzOiByZWFkVXJscyxcbiAgICAgICAgaW5saW5lOiBpbmxpbmVcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gc2hvdWxkUHJvY2VzcyhzdHJpbmcpIHtcbiAgICAgIHJldHVybiBzdHJpbmcuc2VhcmNoKFVSTF9SRUdFWCkgIT09IC0xO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlYWRVcmxzKHN0cmluZykge1xuICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgdmFyIG1hdGNoO1xuICAgICAgd2hpbGUgKChtYXRjaCA9IFVSTF9SRUdFWC5leGVjKHN0cmluZykpICE9PSBudWxsKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKG1hdGNoWzFdKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQuZmlsdGVyKGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgcmV0dXJuICF1dGlsLmlzRGF0YVVybCh1cmwpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5saW5lKHN0cmluZywgdXJsLCBiYXNlVXJsLCBnZXQpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodXJsKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgICAgcmV0dXJuIGJhc2VVcmwgPyB1dGlsLnJlc29sdmVVcmwodXJsLCBiYXNlVXJsKSA6IHVybDtcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oZ2V0IHx8IHV0aWwuZ2V0QW5kRW5jb2RlKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgIHJldHVybiB1dGlsLmRhdGFBc1VybChkYXRhLCB1dGlsLm1pbWVUeXBlKHVybCkpO1xuICAgICAgICB9KVxuICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YVVybCkge1xuICAgICAgICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSh1cmxBc1JlZ2V4KHVybCksICckMScgKyBkYXRhVXJsICsgJyQzJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICBmdW5jdGlvbiB1cmxBc1JlZ2V4KHVybCkge1xuICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cCgnKHVybFxcXFwoW1xcJ1wiXT8pKCcgKyB1dGlsLmVzY2FwZSh1cmwpICsgJykoW1xcJ1wiXT9cXFxcKSknLCAnZycpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlubGluZUFsbChzdHJpbmcsIGJhc2VVcmwsIGdldCkge1xuICAgICAgaWYgKG5vdGhpbmdUb0lubGluZSgpKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHN0cmluZyk7XG5cbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoc3RyaW5nKVxuICAgICAgICAudGhlbihyZWFkVXJscylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHVybHMpIHtcbiAgICAgICAgICB2YXIgZG9uZSA9IFByb21pc2UucmVzb2x2ZShzdHJpbmcpO1xuICAgICAgICAgIHVybHMuZm9yRWFjaChmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgICAgICBkb25lID0gZG9uZS50aGVuKGZ1bmN0aW9uIChzdHJpbmcpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGlubGluZShzdHJpbmcsIHVybCwgYmFzZVVybCwgZ2V0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBkb25lO1xuICAgICAgICB9KTtcblxuICAgICAgZnVuY3Rpb24gbm90aGluZ1RvSW5saW5lKCkge1xuICAgICAgICByZXR1cm4gIXNob3VsZFByb2Nlc3Moc3RyaW5nKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBuZXdGb250RmFjZXMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc29sdmVBbGw6IHJlc29sdmVBbGwsXG4gICAgICBpbXBsOiB7XG4gICAgICAgIHJlYWRBbGw6IHJlYWRBbGxcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gcmVzb2x2ZUFsbCgpIHtcbiAgICAgIHJldHVybiByZWFkQWxsKGRvY3VtZW50KVxuICAgICAgICAudGhlbihmdW5jdGlvbiAod2ViRm9udHMpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoXG4gICAgICAgICAgICB3ZWJGb250cy5tYXAoZnVuY3Rpb24gKHdlYkZvbnQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHdlYkZvbnQucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICApO1xuICAgICAgICB9KVxuICAgICAgICAudGhlbihmdW5jdGlvbiAoY3NzU3RyaW5ncykge1xuICAgICAgICAgIHJldHVybiBjc3NTdHJpbmdzLmpvaW4oJ1xcbicpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZWFkQWxsKCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh1dGlsLmFzQXJyYXkoZG9jdW1lbnQuc3R5bGVTaGVldHMpKVxuICAgICAgICAudGhlbihnZXRDc3NSdWxlcylcbiAgICAgICAgLnRoZW4oc2VsZWN0V2ViRm9udFJ1bGVzKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocnVsZXMpIHtcbiAgICAgICAgICByZXR1cm4gcnVsZXMubWFwKG5ld1dlYkZvbnQpO1xuICAgICAgICB9KTtcblxuICAgICAgZnVuY3Rpb24gc2VsZWN0V2ViRm9udFJ1bGVzKGNzc1J1bGVzKSB7XG4gICAgICAgIHJldHVybiBjc3NSdWxlc1xuICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHJ1bGUpIHtcbiAgICAgICAgICAgIHJldHVybiBydWxlLnR5cGUgPT09IENTU1J1bGUuRk9OVF9GQUNFX1JVTEU7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChydWxlKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5saW5lci5zaG91bGRQcm9jZXNzKHJ1bGUuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnc3JjJykpO1xuICAgICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBnZXRDc3NSdWxlcyhzdHlsZVNoZWV0cykge1xuICAgICAgICB2YXIgY3NzUnVsZXMgPSBbXTtcbiAgICAgICAgc3R5bGVTaGVldHMuZm9yRWFjaChmdW5jdGlvbiAoc2hlZXQpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdXRpbC5hc0FycmF5KHNoZWV0LmNzc1J1bGVzIHx8IFtdKS5mb3JFYWNoKGNzc1J1bGVzLnB1c2guYmluZChjc3NSdWxlcykpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciB3aGlsZSByZWFkaW5nIENTUyBydWxlcyBmcm9tICcgKyBzaGVldC5ocmVmLCBlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBjc3NSdWxlcztcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gbmV3V2ViRm9udCh3ZWJGb250UnVsZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHJlc29sdmU6IGZ1bmN0aW9uIHJlc29sdmUoKSB7XG4gICAgICAgICAgICB2YXIgYmFzZVVybCA9ICh3ZWJGb250UnVsZS5wYXJlbnRTdHlsZVNoZWV0IHx8IHt9KS5ocmVmO1xuICAgICAgICAgICAgcmV0dXJuIGlubGluZXIuaW5saW5lQWxsKHdlYkZvbnRSdWxlLmNzc1RleHQsIGJhc2VVcmwpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc3JjOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gd2ViRm9udFJ1bGUuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnc3JjJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG5ld0ltYWdlcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaW5saW5lQWxsOiBpbmxpbmVBbGwsXG4gICAgICBpbXBsOiB7XG4gICAgICAgIG5ld0ltYWdlOiBuZXdJbWFnZVxuICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBuZXdJbWFnZShlbGVtZW50KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpbmxpbmU6IGlubGluZVxuICAgICAgfTtcblxuICAgICAgZnVuY3Rpb24gaW5saW5lKGdldCkge1xuICAgICAgICBpZiAodXRpbC5pc0RhdGFVcmwoZWxlbWVudC5zcmMpKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShlbGVtZW50LnNyYylcbiAgICAgICAgICAudGhlbihnZXQgfHwgdXRpbC5nZXRBbmRFbmNvZGUpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiB1dGlsLmRhdGFBc1VybChkYXRhLCB1dGlsLm1pbWVUeXBlKGVsZW1lbnQuc3JjKSk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YVVybCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgZWxlbWVudC5vbmxvYWQgPSByZXNvbHZlO1xuICAgICAgICAgICAgICBlbGVtZW50Lm9uZXJyb3IgPSByZWplY3Q7XG4gICAgICAgICAgICAgIGVsZW1lbnQuc3JjID0gZGF0YVVybDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlubGluZUFsbChub2RlKSB7XG4gICAgICBpZiAoIShub2RlIGluc3RhbmNlb2YgRWxlbWVudCkpIHJldHVybiBQcm9taXNlLnJlc29sdmUobm9kZSk7XG5cbiAgICAgIHJldHVybiBpbmxpbmVCYWNrZ3JvdW5kKG5vZGUpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQpXG4gICAgICAgICAgICByZXR1cm4gbmV3SW1hZ2Uobm9kZSkuaW5saW5lKCk7XG4gICAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFxuICAgICAgICAgICAgICB1dGlsLmFzQXJyYXkobm9kZS5jaGlsZE5vZGVzKS5tYXAoZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlubGluZUFsbChjaGlsZCk7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcblxuICAgICAgZnVuY3Rpb24gaW5saW5lQmFja2dyb3VuZChub2RlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdmFyIGJhY2tncm91bmQgPSBub2RlLnN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ2JhY2tncm91bmQnKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobm9kZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWJhY2tncm91bmQpIHJldHVybiBQcm9taXNlLnJlc29sdmUobm9kZSk7XG5cbiAgICAgICAgcmV0dXJuIGlubGluZXIuaW5saW5lQWxsKGJhY2tncm91bmQpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGlubGluZWQpIHtcbiAgICAgICAgICAgIG5vZGUuc3R5bGUuc2V0UHJvcGVydHkoXG4gICAgICAgICAgICAgICdiYWNrZ3JvdW5kJyxcbiAgICAgICAgICAgICAgaW5saW5lZCxcbiAgICAgICAgICAgICAgbm9kZS5zdHlsZS5nZXRQcm9wZXJ0eVByaW9yaXR5KCdiYWNrZ3JvdW5kJylcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pKHRoaXMpO1xuIiwgImltcG9ydCBFeHBvcnRJbWFnZVBsdWdpbiBmcm9tICcuL0V4cG9ydEltYWdlUGx1Z2luJztcblxuZXhwb3J0IGRlZmF1bHQgRXhwb3J0SW1hZ2VQbHVnaW47XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBNYXJrZG93blZpZXcsIE1hcmtkb3duUHJldmlld1ZpZXcsIE1hcmtkb3duUmVuZGVyZXIsIE5vdGljZSwgUGx1Z2luIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgc2F2ZUFzIH0gZnJvbSAnZmlsZS1zYXZlcic7XG5pbXBvcnQgeyBFeHBvcnRJbWFnZVNldHRpbmdUYWIgfSBmcm9tICcuL0V4cG9ydEltYWdlU2V0dGluZ1RhYic7XG5pbXBvcnQgeyBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSBcIi4vY29uc3RlbnRzXCI7XG5pbXBvcnQgeyBjbG9uZU5vZGUsIHRvQmxvYldpdGhDbG9uZWREb20gfSBmcm9tICdkb20tdG8taW1hZ2UnO1xuXG5mdW5jdGlvbiBkZWxheShtczogbnVtYmVyKTogUHJvbWlzZTx1bmRlZmluZWQ+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICByZXNvbHZlKHVuZGVmaW5lZCk7XG4gICAgfSwgbXMpO1xuICB9KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXhwb3J0SW1hZ2VQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICBzZXR0aW5nczogRXhwb3J0SW1hZ2VTZXR0aW5ncztcblxuICBhc3luYyBvbmxvYWQoKSB7XG4gICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuICAgIC8vIFRoaXMgYWRkcyBhIGNvbXBsZXggY29tbWFuZCB0aGF0IGNhbiBjaGVjayB3aGV0aGVyIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBhcHAgYWxsb3dzIGV4ZWN1dGlvbiBvZiB0aGUgY29tbWFuZFxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ2V4cG9ydC10by1pbWFnZS16aCcsXG4gICAgICBuYW1lOiAnRXhwb3J0IHRvIGltYWdlJyxcbiAgICAgIGNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbikgPT4ge1xuICAgICAgICAvLyBDb25kaXRpb25zIHRvIGNoZWNrXG4gICAgICAgIGNvbnN0IG1hcmtkb3duVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgICAgIGlmIChtYXJrZG93blZpZXc/LmdldE1vZGUoKSA9PT0gJ3ByZXZpZXcnKSB7XG4gICAgICAgICAgLy8gSWYgY2hlY2tpbmcgaXMgdHJ1ZSwgd2UncmUgc2ltcGx5IFwiY2hlY2tpbmdcIiBpZiB0aGUgY29tbWFuZCBjYW4gYmUgcnVuLlxuICAgICAgICAgIC8vIElmIGNoZWNraW5nIGlzIGZhbHNlLCB0aGVuIHdlIHdhbnQgdG8gYWN0dWFsbHkgcGVyZm9ybSB0aGUgb3BlcmF0aW9uLlxuICAgICAgICAgIGlmICghY2hlY2tpbmcpIHtcbiAgICAgICAgICAgIChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGVsID0gbWFya2Rvd25WaWV3LmNvbnRlbnRFbC5maW5kKCcubWFya2Rvd24tcHJldmlldy1zZWN0aW9uJyk7XG4gICAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGVsLnBhcmVudEVsZW1lbnQhO1xuICAgICAgICAgICAgICBjb25zdCBzY3JvbGxDYWNoZSA9IGNvbnRhaW5lci5zY3JvbGxUb3A7XG4gICAgICAgICAgICAgIGNvbnRhaW5lci5zY3JvbGxUbygwLCAwKTtcbiAgICAgICAgICAgICAgZWwuYWRkQ2xhc3MoJ2VweG9ydC1pbWFnZS1mb3JjZS1uby1tYXJnaW4nKTtcbiAgICAgICAgICAgICAgYXdhaXQgZGVsYXkoNDApO1xuICAgICAgICAgICAgICBjb25zdCB0b3RhbEhlaWdodCA9IGVsLmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgICAgY29uc3Qgc2NyZWVuSGVpZ2h0ID0gbWFya2Rvd25WaWV3LmNvbnRlbnRFbC5jbGllbnRIZWlnaHQ7XG4gICAgICAgICAgICAgIGxldCBzY3JvbGxJbmRleCA9IDA7XG4gICAgICAgICAgICAgIGxldCBoZWlnaHQgPSBlbC5jbGllbnRIZWlnaHQgLSBwYXJzZUZsb2F0KGVsLnN0eWxlLnBhZGRpbmdCb3R0b20pICsgNDA7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzY29sbEhlaWdodDonLCBoZWlnaHQpO1xuICAgICAgICAgICAgICBjb25zdCBjbG9uZSA9IGF3YWl0IGNsb25lTm9kZShlbCk7XG4gICAgICAgICAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoYXN5bmMgcmVjb3JkcyA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgciBvZiByZWNvcmRzKSB7XG4gICAgICAgICAgICAgICAgICBmb3IgKGxldCBub2RlIG9mIEFycmF5LmZyb20oci5hZGRlZE5vZGVzKSkge1xuICAgICAgICAgICAgICAgICAgICBjbG9uZS5hcHBlbmQoYXdhaXQgY2xvbmVOb2RlKG5vZGUgYXMgSFRNTEVsZW1lbnQpKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGVsLCB7XG4gICAgICAgICAgICAgICAgY2hpbGRMaXN0OiB0cnVlXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB3aGlsZSAoc2Nyb2xsSW5kZXggPD0gdG90YWxIZWlnaHQgLSBzY3JlZW5IZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBzY3JvbGxJbmRleCArPSBzY3JlZW5IZWlnaHQ7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLnNjcm9sbFRvKDAsIHNjcm9sbEluZGV4KTtcbiAgICAgICAgICAgICAgICBhd2FpdCBkZWxheSg0MCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgICBjb250YWluZXIuc2Nyb2xsVG8oMCwgc2Nyb2xsQ2FjaGUpO1xuXG4gICAgICAgICAgICAgIGNsb25lLmFkZENsYXNzKCdleHBvcnQtaW1hZ2UtY2xvbmUnKTtcbiAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjbG9uZSk7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNsb25lLmNsaWVudFdpZHRoLCBjbG9uZS5jbGllbnRIZWlnaHQpO1xuICAgICAgICAgICAgICBlbC5yZW1vdmVDbGFzcygnZXB4b3J0LWltYWdlLWZvcmNlLW5vLW1hcmdpbicpO1xuICAgICAgICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgdG9CbG9iV2l0aENsb25lZERvbShlbCwgY2xvbmUsIHtcbiAgICAgICAgICAgICAgICAvLyB3aWR0aDogd2lkdGggKiAyLFxuICAgICAgICAgICAgICAgIC8vIGhlaWdodDogaGVpZ2h0ICogMixcbiAgICAgICAgICAgICAgICB3aWR0aDogY2xvbmUuY2xpZW50V2lkdGggKiAyLFxuICAgICAgICAgICAgICAgIGhlaWdodDogY2xvbmUuY2xpZW50SGVpZ2h0ICogMixcbiAgICAgICAgICAgICAgICBiZ2NvbG9yOiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbC5jbG9zZXN0KCcudmlldy1jb250ZW50JykhKS5iYWNrZ3JvdW5kQ29sb3IsXG4gICAgICAgICAgICAgICAgcXVhbGl0eTogMC45LFxuICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06ICdzY2FsZSgyKScsXG4gICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1PcmlnaW46ICd0b3AgbGVmdCdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGNsb25lKTtcbiAgICAgICAgICAgICAgc2F2ZUFzKGJsb2IsIGAke21hcmtkb3duVmlldy5nZXREaXNwbGF5VGV4dCgpLnJlcGxhY2UoL1xccysvZywgJ18nKX0uanBnYCk7XG4gICAgICAgICAgICB9KSgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFRoaXMgY29tbWFuZCB3aWxsIG9ubHkgc2hvdyB1cCBpbiBDb21tYW5kIFBhbGV0dGUgd2hlbiB0aGUgY2hlY2sgZnVuY3Rpb24gcmV0dXJucyB0cnVlXG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICAvLyBUaGlzIGFkZHMgYSBzZXR0aW5ncyB0YWIgc28gdGhlIHVzZXIgY2FuIGNvbmZpZ3VyZSB2YXJpb3VzIGFzcGVjdHMgb2YgdGhlIHBsdWdpblxuICAgIC8vIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgRXhwb3J0SW1hZ2VTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG5cbiAgfVxuXG4gIG9udW5sb2FkKCkge1xuICB9XG5cbiAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuICB9XG5cbiAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gIH1cbn1cbiIsICIvKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvcHJlZmVyLWRlZmF1bHQtZXhwb3J0ICovXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogRXhwb3J0SW1hZ2VTZXR0aW5ncyA9IHtcbiAgd2lk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
